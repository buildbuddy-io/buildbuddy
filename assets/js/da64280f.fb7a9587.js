"use strict";(self.webpackChunkbuildbuddy_docs_website=self.webpackChunkbuildbuddy_docs_website||[]).push([[9069],{20613:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=n(85893),i=n(11151);const a={slug:"customer-managed-encryption-keys",title:"Providing Control Over Cache Encryption",description:"We are announcing a feature that allows customers to control how their data is encrypted in in our cache.",author:"Vadim Berezniker",author_title:"Engineer @ BuildBuddy",date:"2023-06-05:11:00:00",author_url:"https://www.linkedin.com/in/vadimberezniker/",author_image_url:"https://avatars.githubusercontent.com/u/1335358?v=4",image:"/img/blog/cmek.png",tags:["product","security","encryption","enterprise"]},o=void 0,s={permalink:"/blog/customer-managed-encryption-keys",editUrl:"https://github.com/buildbuddy-io/buildbuddy/edit/master/website/blog/customer-managed-encryption-keys.md",source:"@site/blog/customer-managed-encryption-keys.md",title:"Providing Control Over Cache Encryption",description:"We are announcing a feature that allows customers to control how their data is encrypted in in our cache.",date:"2023-06-05T11:00:00.000Z",formattedDate:"June 5, 2023",tags:[{label:"product",permalink:"/blog/tags/product"},{label:"security",permalink:"/blog/tags/security"},{label:"encryption",permalink:"/blog/tags/encryption"},{label:"enterprise",permalink:"/blog/tags/enterprise"}],readingTime:1.65,hasTruncateMarker:!0,authors:[{name:"Vadim Berezniker",title:"Engineer @ BuildBuddy",url:"https://www.linkedin.com/in/vadimberezniker/",imageURL:"https://avatars.githubusercontent.com/u/1335358?v=4"}],frontMatter:{slug:"customer-managed-encryption-keys",title:"Providing Control Over Cache Encryption",description:"We are announcing a feature that allows customers to control how their data is encrypted in in our cache.",author:"Vadim Berezniker",author_title:"Engineer @ BuildBuddy",date:"2023-06-05:11:00:00",author_url:"https://www.linkedin.com/in/vadimberezniker/",author_image_url:"https://avatars.githubusercontent.com/u/1335358?v=4",image:"/img/blog/cmek.png",tags:["product","security","encryption","enterprise"]},unlisted:!1,prevItem:{title:"PostgreSQL Support for BuildBuddy",permalink:"/blog/postgres-support"},nextItem:{title:"Buck2 Unboxing",permalink:"/blog/buck2-review"}},d={authorsImageUrls:[void 0]},c=[{value:"Encryption model",id:"encryption-model",level:2},{value:"Technical Details",id:"technical-details",level:2}];function u(e){const t={a:"a",h2:"h2",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"BuildBuddy enables fast builds by providing a high-performance cache that stores and serves artifacts, such as the\ninputs and outputs to your build actions."}),"\n",(0,r.jsxs)(t.p,{children:["Starting today, BuildBuddy customers can provide their own encryption keys that will be used to encrypt and decrypt data\nstored in the cache. At launch, we are supporting keys managed by ",(0,r.jsx)(t.a,{href:"https://cloud.google.com/security-key-management",children:"Google Cloud Platform KMS"})," and ",(0,r.jsx)(t.a,{href:"https://aws.amazon.com/kms/",children:"Amazon Web Services KMS"}),"."]}),"\n",(0,r.jsx)(t.p,{children:'To get started, head over to your organization Settings page and look for the "Encryption Keys" tab. Note that these\nsettings are only visible to Organization Administrators.'}),"\n",(0,r.jsxs)(t.p,{children:["For more details, see the ",(0,r.jsx)(t.a,{href:"https://www.buildbuddy.io/docs/cache-encryption-keys",children:"Customer Managed Encryption Keys documentation"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"encryption-model",children:"Encryption model"}),"\n",(0,r.jsxs)(t.p,{children:["We\u2019ve modeled our Customer Managed Encryption Key implementation on Snowflake\u2019s ",(0,r.jsx)(t.a,{href:"https://docs.snowflake.com/en/user-guide/security-encryption-manage#tri-secret-secure",children:"Tri-Secret Secure"})," design."]}),"\n",(0,r.jsx)(t.p,{children:"In this model, the customer-supplied key is combined with a BuildBuddy-maintained key to create a composite master key\nthat is used to protect your BuildBuddy data."}),"\n",(0,r.jsx)(t.p,{children:"If the customer-managed key in the composite master key is revoked, your data can no longer be decrypted by BuildBuddy -\nproviding a level of security and control above BuildBuddy\u2019s standard level of encryption that is controlled by GCP."}),"\n",(0,r.jsx)(t.p,{children:"This dual-key encryption model, together with BuildBuddy\u2019s built-in user authentication enables three levels of data\nprotection."}),"\n",(0,r.jsx)(t.h2,{id:"technical-details",children:"Technical Details"}),"\n",(0,r.jsx)(t.p,{children:"In order to generate the master key, two internal 256-bit symmetric keys are first created. These keys are then\nencrypted by both the customer-supplied key and the BuildBuddy-managed key."}),"\n",(0,r.jsxs)(t.p,{children:["To perform cryptographic operations on data, these two keys are decrypted and passed through the\n",(0,r.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/HKDF",children:"HKDF-Expand"})," key derivation function to generate a single master key. When cache\nreads and writes are performed, the ",(0,r.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/ChaCha20-Poly1305",children:"XChaCha20-Poly1305"})," algorithm is\nused to encrypt, decrypt and authenticate the data using this master key."]}),"\n",(0,r.jsx)(t.p,{children:"Revocation of either the customer-supplied key or the BuildBuddy-managed key renders previously written artifacts undecryptable."}),"\n",(0,r.jsx)(t.p,{children:"Both the encryption design and source code have been audited by a third party."}),"\n",(0,r.jsxs)(t.p,{children:["If you have any questions or feedback about this feature, please reach out to us on ",(0,r.jsx)(t.a,{href:"https://community.buildbuddy.io/",children:"Slack"}),"\nor at ",(0,r.jsx)(t.a,{href:"mailto:security@buildbuddy.io",children:"security@buildbuddy.io"}),"."]})]})}function l(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>o});var r=n(67294);const i={},a=r.createContext(i);function o(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);