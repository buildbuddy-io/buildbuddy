/*! For license information please see 6ae8a29a.58e52e50.js.LICENSE.txt */
"use strict";(self.webpackChunkbuildbuddy_docs_website=self.webpackChunkbuildbuddy_docs_website||[]).push([[2395],{2525:function(e){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,a){for(var i,u,l=o(e),c=1;c<arguments.length;c++){for(var s in i=Object(arguments[c]))n.call(i,s)&&(l[s]=i[s]);if(t){u=t(i);for(var d=0;d<u.length;d++)r.call(i,u[d])&&(l[u[d]]=i[u[d]])}}return l}},1535:function(e,t,n){var r=n(2525),o="function"==typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,s=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,y=o?Symbol.for("react.memo"):60115,h=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||k}function w(){}function O(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||k}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var j=O.prototype=new w;j.constructor=O,r(j,v.prototype),j.isPureReactComponent=!0;var P={current:null},x=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,o={},i=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),s=0;s<l;s++)c[s]=arguments[s+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:a,type:e,key:i,ref:u,props:o,_owner:P.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var _=/\/+/g,C=[];function N(e,t,n,r){if(C.length){var o=C.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function E(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function z(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var u=!1;if(null===e)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return n(r,e,""===t?"."+U(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+U(o=e[l],l);u+=z(o,c,n,r)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),l=0;!(o=e.next()).done;)u+=z(o=o.value,c=t+U(o,l++),n,r);else if("object"===o)throw n=""+e,Error(b(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function B(e,t,n){return null==e?0:z(e,"",t,n)}function U(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function D(e,t){e.func.call(e.context,t,e.count++)}function R(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?T(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n)),r.push(e))}function T(e,t,n,r,o){var a="";null!=n&&(a=(""+n).replace(_,"$&/")+"/"),B(e,R,t=N(t,a,r,o)),E(t)}var Y={current:null};function $(){var e=Y.current;if(null===e)throw Error(b(321));return e}},7378:function(e,t,n){n(1535)},4137:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=c(n),f=o,y=p["".concat(l,".").concat(f)]||p[f]||d[f]||a;return n?r.createElement(y,i(i({ref:t},s),{},{components:n})):r.createElement(y,i({ref:t},s))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:o,i[1]=u;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1391:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return s},default:function(){return p}});var r=n(7462),o=n(3366),a=(n(7378),n(4137)),i=["components"],u={id:"guide-auth",title:"Authentication Guide",sidebar_label:"Authentication Guide"},l=void 0,c={unversionedId:"guide-auth",id:"guide-auth",title:"Authentication Guide",description:"BuildBuddy uses API keys to authenticate Bazel invocations. In order to authenticate an invocation, you must first create a BuildBuddy account.",source:"@site/../docs/guide-auth.md",sourceDirName:".",slug:"/guide-auth",permalink:"/docs/guide-auth",editUrl:"https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/guide-auth.md",tags:[],version:"current",lastUpdatedBy:"Siggi Simonarson",lastUpdatedAt:1645659546,formattedLastUpdatedAt:"2/23/2022",frontMatter:{id:"guide-auth",title:"Authentication Guide",sidebar_label:"Authentication Guide"},sidebar:"someSidebar",previous:{title:"Guides",permalink:"/docs/guides"},next:{title:"Build Metadata Guide",permalink:"/docs/guide-metadata"}},s=[{value:"Setup",id:"setup",children:[],level:2},{value:"Separate auth file",id:"separate-auth-file",children:[],level:2},{value:"Command line",id:"command-line",children:[],level:2},{value:"Managing keys",id:"managing-keys",children:[],level:2},{value:"Read only keys",id:"read-only-keys",children:[],level:2},{value:"Executor keys",id:"executor-keys",children:[],level:2}],d={toc:s};function p(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"BuildBuddy uses API keys to authenticate Bazel invocations. In order to authenticate an invocation, you must first ",(0,a.kt)("a",{parentName:"p",href:"https://app.buildbuddy.io/"},"create a BuildBuddy account"),"."),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("p",null,"An API key should be passed along with all gRPCs requests that you'd like to be associated with your BuildBuddy organization. This key can be used by anyone in your organization, as it ties builds to your org - not your individual user."),(0,a.kt)("p",null,"You can find your API key on your ",(0,a.kt)("a",{parentName:"p",href:"https://app.buildbuddy.io/docs/setup/"},"setup instructions")," once you've ",(0,a.kt)("a",{parentName:"p",href:"https://app.buildbuddy.io/"},"created an account")," and logged in. You can also create multiple API keys for use in different contexts."),(0,a.kt)("p",null,"Your API key can be added directly to your ",(0,a.kt)("inlineCode",{parentName:"p"},".bazelrc")," as long as no one outside of your organization has access to your source code."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"build --remote_header=x-buildbuddy-api-key=YOUR_API_KEY\n")),(0,a.kt)("p",null,"If people outside of your organization have access to your source code (open source projects, etc) - you'll want to pull your credentials into a separate file that is only accessible by members of your organization and/or your CI machines."),(0,a.kt)("p",null,"Alternatively, you can store your API key in an environment variable / secret and pass these flags in manually or with a wrapper script."),(0,a.kt)("h2",{id:"separate-auth-file"},"Separate auth file"),(0,a.kt)("p",null,"Using the ",(0,a.kt)("inlineCode",{parentName:"p"},"try-import")," directive in your ",(0,a.kt)("inlineCode",{parentName:"p"},".bazelrc")," - you can direct bazel to pull in additional bazel configuration flags from a different file if the file exists (if the file does not exist, this directive will be ignored)."),(0,a.kt)("p",null,"You can then place a second ",(0,a.kt)("inlineCode",{parentName:"p"},"auth.bazelrc")," file in a location that's only accessible to members of your organization:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"build --remote_header=x-buildbuddy-api-key=YOUR_API_KEY\n")),(0,a.kt)("p",null,"And add a ",(0,a.kt)("inlineCode",{parentName:"p"},"try-import")," to your main ",(0,a.kt)("inlineCode",{parentName:"p"},".bazelrc")," file at the root of your ",(0,a.kt)("inlineCode",{parentName:"p"},"WORKSPACE"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"try-import /path/to/your/auth.bazelrc\n")),(0,a.kt)("h2",{id:"command-line"},"Command line"),(0,a.kt)("p",null,"The command line method allows you to store your API key in an environment variable or Github secret, and then pass authenticated flags in either manually or with a wrapper script."),(0,a.kt)("p",null,"If using Github secrets - you can create a secret called ",(0,a.kt)("inlineCode",{parentName:"p"},"BUILDBUDDY_API_KEY")," containing your API key, then use that in your actions:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"bazel build --config=remote --remote_header=x-buildbuddy-api-key=${BUILDBUDDY_API_KEY}\n")),(0,a.kt)("h2",{id:"managing-keys"},"Managing keys"),(0,a.kt)("p",null,"You can create multiple API keys on your ",(0,a.kt)("a",{parentName:"p",href:"https://app.buildbuddy.dev/settings/org/api-keys"},"organization settings page"),". These keys can be used in different contexts (i.e. one for CI, one for developers) and cycled independently. Here you can also edit and delete existing API keys."),(0,a.kt)("p",null,"When creating multiple keys, we recommending labeling your API keys with descriptive names to describe how they will be used."),(0,a.kt)("h2",{id:"read-only-keys"},"Read only keys"),(0,a.kt)("p",null,"When creating new API keys, you can check the box that says ",(0,a.kt)("strong",{parentName:"p"},"Read-only key (disable remote cache uploads)"),". This will allow users of these keys to download from the remote cache, but not upload artifacts into the cache."),(0,a.kt)("h2",{id:"executor-keys"},"Executor keys"),(0,a.kt)("p",null,"When creating API keys to link your self-hosted executors to your organization (if using ",(0,a.kt)("strong",{parentName:"p"},"Bring Your Own Runners"),"), you'll need to check the box that says ",(0,a.kt)("strong",{parentName:"p"},"Executor key (for self-hosted executors)"),"."))}p.isMDXComponent=!0}}]);