(self.webpackChunkbuildbuddy_docs_website=self.webpackChunkbuildbuddy_docs_website||[]).push([[6436],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return b}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),l=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(n),b=a,h=u["".concat(c,".").concat(b)]||u[b]||p[b]||o;return n?i.createElement(h,r(r({ref:t},d),{},{components:n})):i.createElement(h,r({ref:t},d))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<o;l++)r[l]=n[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4462:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return r},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var i=n(2122),a=n(9756),o=(n(7294),n(3905)),r={id:"enterprise-api",title:"API Documentation",sidebar_label:"Enterprise API"},s={unversionedId:"enterprise-api",id:"enterprise-api",isDocsHomePage:!1,title:"API Documentation",description:"The BuildBuddy API let's you programmatically obtain information about your Bazel builds. API access available to Enterprise BuildBuddy Customers.",source:"@site/../docs/enterprise-api.md",sourceDirName:".",slug:"/enterprise-api",permalink:"/docs/enterprise-api",editUrl:"https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/enterprise-api.md",version:"current",sidebar_label:"Enterprise API",frontMatter:{id:"enterprise-api",title:"API Documentation",sidebar_label:"Enterprise API"},sidebar:"someSidebar",previous:{title:"Enterprise Mac RBE Setup",permalink:"/docs/enterprise-mac-rbe"},next:{title:"Prometheus Metrics",permalink:"/docs/prometheus-metrics"}},c=[{value:"GetInvocation",id:"getinvocation",children:[{value:"Endpoint",id:"endpoint",children:[]},{value:"Service",id:"service",children:[]},{value:"Example cURL request",id:"example-curl-request",children:[]},{value:"Example cURL response",id:"example-curl-response",children:[]},{value:"GetInvocationRequest",id:"getinvocationrequest",children:[]},{value:"GetInvocationResponse",id:"getinvocationresponse",children:[]},{value:"InvocationSelector",id:"invocationselector",children:[]},{value:"Invocation",id:"invocation",children:[]}]},{value:"GetTarget",id:"gettarget",children:[{value:"Endpoint",id:"endpoint-1",children:[]},{value:"Service",id:"service-1",children:[]},{value:"Example cURL request",id:"example-curl-request-1",children:[]},{value:"Example cURL response",id:"example-curl-response-1",children:[]},{value:"GetTargetRequest",id:"gettargetrequest",children:[]},{value:"GetTargetResponse",id:"gettargetresponse",children:[]},{value:"TargetSelector",id:"targetselector",children:[]},{value:"Target",id:"target",children:[]}]},{value:"GetAction",id:"getaction",children:[{value:"Endpoint",id:"endpoint-2",children:[]},{value:"Service",id:"service-2",children:[]},{value:"Example cURL request",id:"example-curl-request-2",children:[]},{value:"Example cURL response",id:"example-curl-response-2",children:[]},{value:"GetActionRequest",id:"getactionrequest",children:[]},{value:"GetActionResponse",id:"getactionresponse",children:[]},{value:"ActionSelector",id:"actionselector",children:[]},{value:"Action",id:"action",children:[]}]},{value:"GetFile",id:"getfile",children:[{value:"Endpoint",id:"endpoint-3",children:[]},{value:"Service",id:"service-3",children:[]},{value:"Example cURL request",id:"example-curl-request-3",children:[]},{value:"Example cURL response",id:"example-curl-response-3",children:[]},{value:"GetFileRequest",id:"getfilerequest",children:[]},{value:"GetFileResponse",id:"getfileresponse",children:[]},{value:"File",id:"file",children:[]}]}],l={toc:c};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,i.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The BuildBuddy API let's you programmatically obtain information about your Bazel builds. API access available to Enterprise BuildBuddy Customers. "),(0,o.kt)("p",null,"Requests can be made via JSON or using Protobuf. The examples below are using the JSON API. For a full overview of the service, you can view the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/proto/api/v1/service.proto"},"service definition")," or the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/tree/master/proto/api/v1"},"individual protos"),"."),(0,o.kt)("h2",{id:"getinvocation"},"GetInvocation"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"GetInvocation")," endpoint allows you to fetch invocations associated with a commit SHA or invocation ID. View full ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/proto/api/v1/invocation.proto"},"Invocation proto"),"."),(0,o.kt)("h3",{id:"endpoint"},"Endpoint"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"https://app.buildbuddy.io/api/v1/GetInvocation\n")),(0,o.kt)("h3",{id:"service"},"Service"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Retrieves a list of invocations or a specific invocation matching the given\n// request selector.\nrpc GetInvocation(GetInvocationRequest) returns (GetInvocationResponse);\n")),(0,o.kt)("h3",{id:"example-curl-request"},"Example cURL request"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -d '{\"selector\": {\"invocation_id\":\"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845\"}}' \\\n  -H 'x-buildbuddy-api-key: YOUR_BUILDBUDDY_API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  https://app.buildbuddy.io/api/v1/GetInvocation\n")),(0,o.kt)("p",null,"Make sure to replace ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_BUILDBUDDY_API_KEY")," and the invocation ID ",(0,o.kt)("inlineCode",{parentName:"p"},"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845")," with your own values."),(0,o.kt)("h3",{id:"example-curl-response"},"Example cURL response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "invocation":[\n      {\n         "id":{\n            "invocationId":"c7fbfe97-8298-451f-b91d-722ad91632ea"\n         },\n         "success":true,\n         "user":"runner",\n         "durationUsec":"221970000",\n         "host":"fv-az278-49",\n         "command":"build",\n         "pattern":"//...",\n         "actionCount":"1402",\n         "createdAtUsec":"1623193638545989",\n         "updatedAtUsec":"1623193638545989",\n         "repoUrl":"https://github.com/buildbuddy-io/buildbuddy",\n         "commitSha":"800f549937a4c0a1614e65501caf7577d2a00624",\n         "role":"CI"\n      }\n   ]\n}\n')),(0,o.kt)("h3",{id:"getinvocationrequest"},"GetInvocationRequest"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Request passed into GetInvocation\nmessage GetInvocationRequest {\n  // The selector defining which invocations(s) to retrieve.\n  InvocationSelector selector = 1;\n\n  // The next_page_token value returned from a previous request, if any.\n  string page_token = 3;\n}\n")),(0,o.kt)("h3",{id:"getinvocationresponse"},"GetInvocationResponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Response from calling GetInvocation\nmessage GetInvocationResponse {\n  // Invocations matching the request invocation, possibly capped by a\n  // server limit.\n  repeated Invocation invocation = 1;\n\n  // Token to retrieve the next page of results, or empty if there are no\n  // more results in the list.\n  string next_page_token = 2;\n}\n")),(0,o.kt)("h3",{id:"invocationselector"},"InvocationSelector"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// The selector used to specify which invocations to return.\nmessage InvocationSelector {\n  // One invocation_id or commit_sha is required.\n\n  // Optional: The Invocation ID.\n  // Return only the invocation with this invocation ID.\n  string invocation_id = 1;\n\n  // Optional: The commmit SHA.\n  // If set, only the invocations with this commit SHA will be returned.\n  string commit_sha = 2;\n}\n")),(0,o.kt)("h3",{id:"invocation"},"Invocation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},'// Response from calling GetInvocation\nmessage GetInvocationResponse {\n  // Invocations matching the request invocation, possibly capped by a\n  // server limit.\n  repeated Invocation invocation = 1;\n\n  // Token to retrieve the next page of results, or empty if there are no\n  // more results in the list.\n  string next_page_token = 2;\n}\n\n// Each Invocation represents metadata associated with a given invocation.\nmessage Invocation {\n  // The resource ID components that identify the Invocation.\n  message Id {\n    // The Invocation ID.\n    string invocation_id = 1;\n  }\n\n  // The resource ID components that identify the Invocation.\n  Id id = 1;\n\n  // Whether or not the build was successful.\n  bool success = 3;\n\n  // The user who performed this build.\n  string user = 4;\n\n  // The duration of this build, from start to finish.\n  int64 duration_usec = 5;\n\n  // The host this build was executed on.\n  string host = 6;\n\n  // The command performed (usually "build" or "test").\n  string command = 7;\n\n  // The build patterns specified for this build.\n  string pattern = 8;\n\n  // The number of actions performed.\n  int64 action_count = 9;\n\n  // The time this invocation was created and updated, respectively. Invocations\n  // are created as soon as the first event is received from the client and\n  // updated with subsequent events until they are finalized.\n  int64 created_at_usec = 13;\n  int64 updated_at_usec = 14;\n\n  // A URL to the git repo this invocation was for.\n  string repo_url = 15;\n\n  // The commit SHA that this invocation was for.\n  string commit_sha = 16;\n\n  // The role played by this invocation. Ex: "CI"\n  string role = 19;\n}\n')),(0,o.kt)("h2",{id:"gettarget"},"GetTarget"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"GetTarget")," endpoint allows you to fetch targets associated with a given invocation ID. View full ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/proto/api/v1/target.proto"},"Target proto"),"."),(0,o.kt)("h3",{id:"endpoint-1"},"Endpoint"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"https://app.buildbuddy.io/api/v1/GetTarget\n")),(0,o.kt)("h3",{id:"service-1"},"Service"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Retrieves a list of targets or a specific target matching the given\n// request selector.\nrpc GetTarget(GetTargetRequest) returns (GetTargetResponse);\n")),(0,o.kt)("h3",{id:"example-curl-request-1"},"Example cURL request"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -d '{\"selector\": {\"invocation_id\":\"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845\"}}' \\\n  -H 'x-buildbuddy-api-key: YOUR_BUILDBUDDY_API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  https://app.buildbuddy.io/api/v1/GetTarget\n")),(0,o.kt)("p",null,"Make sure to replace ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_BUILDBUDDY_API_KEY")," and the invocation ID ",(0,o.kt)("inlineCode",{parentName:"p"},"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845")," with your own values."),(0,o.kt)("h3",{id:"example-curl-response-1"},"Example cURL response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "target":[\n      {\n         "id":{\n            "invocationId":"c7fbfe97-8298-451f-b91d-722ad91632ea",\n            "targetId":"aWQ6OnYxOjovL3Rvb2xzL3JlcGxheV9hY3Rpb246cmVwbGF5X2FjdGlvbl9saWI"\n         },\n         "label":"//tools/replay_action:replay_action_lib",\n         "status":"BUILT",\n         "ruleType":"go_library"\n      },\n      ...\n      {\n         "id":{\n            "invocationId":"c7fbfe97-8298-451f-b91d-722ad91632ea",\n            "targetId":"aWQ6OnYxOjovL2VudGVycHJpc2UvYXBwOmNvcHlfYXBwX2J1bmRsZV9zb3VyY2VtYXA"\n         },\n         "label":"//enterprise/app:copy_app_bundle_sourcemap",\n         "status":"BUILT",\n         "ruleType":"genrule"\n      },\n      {\n         "id":{\n            "invocationId":"c7fbfe97-8298-451f-b91d-722ad91632ea",\n            "targetId":"aWQ6OnYxOjovL2VudGVycHJpc2U6YnVpbGRidWRkeQ"\n         },\n         "label":"//enterprise:buildbuddy",\n         "status":"BUILT",\n         "ruleType":"go_binary"\n      }\n   ]\n}\n')),(0,o.kt)("h3",{id:"gettargetrequest"},"GetTargetRequest"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Request passed into GetTarget\nmessage GetTargetRequest {\n  // The selector defining which target(s) to retrieve.\n  TargetSelector selector = 1;\n\n  // The next_page_token value returned from a previous request, if any.\n  string page_token = 3;\n}\n")),(0,o.kt)("h3",{id:"gettargetresponse"},"GetTargetResponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Response from calling GetTarget\nmessage GetTargetResponse {\n  // Targets matching the request invocation, possibly capped by a\n  // server limit.\n  repeated Target target = 1;\n\n  // Token to retrieve the next page of results, or empty if there are no\n  // more results in the list.\n  string next_page_token = 2;\n}\n")),(0,o.kt)("h3",{id:"targetselector"},"TargetSelector"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// The selector used to specify which targets to return.\nmessage TargetSelector {\n  // Required: The Invocation ID.\n  // All actions returned will be scoped to this invocation.\n  string invocation_id = 1;\n\n  // Optional: The Target ID.\n  // If set, only the target with this target id will be returned.\n  string target_id = 2;\n}\n")),(0,o.kt)("h3",{id:"target"},"Target"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Each Target represents data for a given target in a given Invocation.\nmessage Target {\n  // The resource ID components that identify the Target.\n  message Id {\n    // The Invocation ID.\n    string invocation_id = 1;\n\n    // The Target ID.\n    string target_id = 2;\n  }\n\n  // The resource ID components that identify the Target.\n  Id id = 1;\n\n  // The label of the target Ex: //server/test:foo\n  string label = 2;\n\n  // The aggregate status of the target.\n  Status status = 3;\n\n  // When this target started and its duration.\n  Timing timing = 4;\n\n  // The type of the target rule. Ex: java_binary\n  string rule_type = 5;\n\n  // Tags applied to this target (if any).\n  repeated string tag = 6;\n}\n")),(0,o.kt)("h2",{id:"getaction"},"GetAction"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"GetAction")," endpoint allows you to fetch actions associated with a given target or invocation. View full ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/proto/api/v1/action.proto"},"Action proto"),"."),(0,o.kt)("h3",{id:"endpoint-2"},"Endpoint"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"https://app.buildbuddy.io/api/v1/GetAction\n")),(0,o.kt)("h3",{id:"service-2"},"Service"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Retrieves a list of targets or a specific target matching the given\n// request selector.\nrpc GetAction(GetActionRequest) returns (GetActionResponse);\n")),(0,o.kt)("h3",{id:"example-curl-request-2"},"Example cURL request"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -d '{\"selector\": {\"invocation_id\":\"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845\"}}' \\\n  -H 'x-buildbuddy-api-key: YOUR_BUILDBUDDY_API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  https://app.buildbuddy.io/api/v1/GetAction\n")),(0,o.kt)("p",null,"Make sure to replace ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_BUILDBUDDY_API_KEY")," and the invocation ID ",(0,o.kt)("inlineCode",{parentName:"p"},"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845")," with your own values."),(0,o.kt)("h3",{id:"example-curl-response-2"},"Example cURL response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "action":[\n      {\n         "id":{\n            "invocationId":"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845",\n            "targetId":"aWQ6OnYxOjovLzpzdGF0aWM",\n            "configurationId":"00e90e1ab7325d5e63d03bfe5f808477b2bb66ca6ae9af26c036cae67ee81cf9",\n            "actionId":"aWQ6OnYxOjpidWlsZA"\n         }\n      },\n      [...]\n      {\n         "id":{\n            "invocationId":"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845",\n            "targetId":"aWQ6OnYxOjovL2VudGVycHJpc2UvYXBwOnN0eWxl",\n            "configurationId":"00e90e1ab7325d5e63d03bfe5f808477b2bb66ca6ae9af26c036cae67ee81cf9",\n            "actionId":"aWQ6OnYxOjpidWlsZA"\n         },\n         "file":[\n            {\n               "name":"enterprise/app/style.css",\n               "uri":"bytestream://cloud.buildbuddy.io/buildbuddy-io/buildbuddy-internal/ci/blobs/e21b1e3411792e17e698be879a3548527d620c65953986c96d5a81f933e776aa/68837"\n            }\n         ]\n      },\n      {\n         "id":{\n            "invocationId":"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845",\n            "targetId":"aWQ6OnYxOjovLzp2ZXQ",\n            "configurationId":"9a01374ae0e8164eec90f708e7a997520994e71b433a5265c89582c4490d75e9",\n            "actionId":"aWQ6OnYxOjpidWlsZA"\n         },\n         "file":[\n            {\n               "name":"vet_/vet",\n               "uri":"bytestream://cloud.buildbuddy.io/buildbuddy-io/buildbuddy-internal/ci/blobs/915edf6aca4bd4eac3e4602641b0633a7aaf038d62d5ae087884a2d8acf0926a/7029420"\n            }\n         ]\n      },\n      {\n         "id":{\n            "invocationId":"c6b2b6de-c7bb-4dd9-b7fd-a530362f0845",\n            "targetId":"aWQ6OnYxOjovL2VudGVycHJpc2Uvc2VydmVyL3Rlc3QvaW50ZWdyYXRpb24vcmVtb3RlX2NhY2hlOnJlbW90ZV9jYWNoZV90ZXN0",\n            "configurationId":"00e90e1ab7325d5e63d03bfe5f808477b2bb66ca6ae9af26c036cae67ee81cf9",\n            "actionId":"aWQ6OnYxOjp0ZXN0LVNfMy1SXzEtQV8x"\n         },\n         "file":[\n            {\n               "name":"test.log",\n               "uri":"bytestream://cloud.buildbuddy.io/buildbuddy-io/buildbuddy-internal/ci/blobs/09e6fe6e1fd8c8734339a0a84c3c7a0eb121b57a45d21cfeb1f265bffe4c4888/216"\n            }\n         ]\n      }\n   ]\n}\n')),(0,o.kt)("h3",{id:"getactionrequest"},"GetActionRequest"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Request passed into GetAction\nmessage GetActionRequest {\n  // The selector defining which action(s) to retrieve.\n  ActionSelector selector = 1;\n\n  // The next_page_token value returned from a previous request, if any.\n  string page_token = 2;\n}\n")),(0,o.kt)("h3",{id:"getactionresponse"},"GetActionResponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Response from calling GetAction\nmessage GetActionResponse {\n  // Actions matching the request, possibly capped a server limit.\n  repeated Action action = 1;\n\n  // Token to retrieve the next page of results, or empty if there are no\n  // more results in the list.\n  string next_page_token = 2;\n}\n")),(0,o.kt)("h3",{id:"actionselector"},"ActionSelector"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// The selector used to specify which actions to return.\nmessage ActionSelector {\n  // Required: The Invocation ID.\n  // All actions returned will be scoped to this invocation.\n  string invocation_id = 1;\n\n  // Optional: The Target ID.\n  // If set, all actions returned will be scoped to this target.\n  string target_id = 2;\n\n  // Optional: The Configuration ID.\n  // If set, all actions returned will be scoped to this configuration.\n  string configuration_id = 3;\n\n  // Optional: The Action ID.\n  // If set, only the action with this action id will be returned.\n  string action_id = 4;\n}\n")),(0,o.kt)("h3",{id:"action"},"Action"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// An action that happened as part of a configured target. This action could be\n// a build, a test, or another type of action.\nmessage Action {\n  // The resource ID components that identify the Action.\n  message Id {\n    // The Invocation ID.\n    string invocation_id = 1;\n\n    // The Target ID.\n    string target_id = 2;\n\n    // The Configuration ID.\n    string configuration_id = 3;\n\n    // The Action ID.\n    string action_id = 4;\n  }\n\n  // The resource ID components that identify the Action.\n  Id id = 1;\n\n  // A list of file references for action level files.\n  repeated File file = 2;\n}\n")),(0,o.kt)("h2",{id:"getfile"},"GetFile"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"GetFile")," endpoint allows you to fetch files associated with a given url. View full ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/proto/api/v1/file.proto"},"File proto"),"."),(0,o.kt)("h3",{id:"endpoint-3"},"Endpoint"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"https://app.buildbuddy.io/api/v1/GetFile\n")),(0,o.kt)("h3",{id:"service-3"},"Service"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Streams the File with the given uri.\n// - Over gRPC returns a stream of bytes to be stitched together in order.\n// - Over HTTP this simply returns the requested file.\nrpc GetFile(GetFileRequest) returns (stream GetFileResponse);\n")),(0,o.kt)("h3",{id:"example-curl-request-3"},"Example cURL request"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -d '{\"uri\":\"bytestream://cloud.buildbuddy.io/buildbuddy-io/buildbuddy-internal/ci/blobs/09e6fe6e1fd8c8734339a0a84c3c7a0eb121b57a45d21cfeb1f265bffe4c4888/216\"}' \\\n  -H 'x-buildbuddy-api-key: YOUR_BUILDBUDDY_API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  https://app.buildbuddy.io/api/v1/GetFile\n")),(0,o.kt)("p",null,"Make sure to replace ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_BUILDBUDDY_API_KEY")," and the file uri ",(0,o.kt)("inlineCode",{parentName:"p"},"bytestream://cloud.buildbuddy.io/buildbuddy-io/buildbuddy-internal/ci/blobs/09e6fe6e1fd8c8734339a0a84c3c7a0eb121b57a45d21cfeb1f265bffe4c4888/216")," with your own values."),(0,o.kt)("h3",{id:"example-curl-response-3"},"Example cURL response"),(0,o.kt)("p",null,"The file contents."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'exec ${PAGER:-/usr/bin/less} "$0" || exit 1\nExecuting tests from //enterprise/server/test/integration/remote_cache:remote_cache_test\n-----------------------------------------------------------------------------\nPASS\n')),(0,o.kt)("h3",{id:"getfilerequest"},"GetFileRequest"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Request object for GetFile\nmessage GetFileRequest {\n  // This corresponds to the uri field in the File message.\n  string uri = 1;\n}\n")),(0,o.kt)("h3",{id:"getfileresponse"},"GetFileResponse"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// Response object for GetFile\nmessage GetFileResponse {\n  // The file data.\n  bytes data = 1;\n}\n")),(0,o.kt)("h3",{id:"file"},"File"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"// A file associated with a BuildBuddy build.\nmessage File {\n  string name = 1;\n  string uri = 2;\n}\n")))}d.isMDXComponent=!0}}]);