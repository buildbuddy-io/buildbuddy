"use strict";(self.webpackChunkbuildbuddy_docs_website=self.webpackChunkbuildbuddy_docs_website||[]).push([[9423],{59649:(e,s,d)=>{d.r(s),d.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>u});var n=d(74848),l=d(28453);function r(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"invocation-build-event-metrics",children:"Invocation build event metrics"}),"\n",(0,n.jsxs)(s.p,{children:["All invocation metrics are recorded at the ",(0,n.jsx)(s.em,{children:"end"})," of each invocation."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of invocations whose logs were uploaded to BuildBuddy."}),"\n",(0,n.jsx)(s.h4,{id:"labels",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"invocation_status"}),": Invocation status: ",(0,n.jsx)(s.code,{children:"success"}),", ",(0,n.jsx)(s.code,{children:"failure"}),", ",(0,n.jsx)(s.code,{children:"disconnected"}),", or ",(0,n.jsx)(s.code,{children:"unknown"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"bazel_exit_code"}),": Exit code of a completed bazel command"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"bazel_command"}),": Command provided to the Bazel daemon: ",(0,n.jsx)(s.code,{children:"run"}),", ",(0,n.jsx)(s.code,{children:"test"}),", ",(0,n.jsx)(s.code,{children:"build"}),", ",(0,n.jsx)(s.code,{children:"coverage"}),", ",(0,n.jsx)(s.code,{children:"mobile-install"}),", ..."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Number of invocations per second by invocation status\nsum by (invocation_status) (rate(buildbuddy_invocation_count[5m]))\n\n# Invocation success rate\nsum(rate(buildbuddy_invocation_count{invocation_status="success"}[5m]))\n/\nsum(rate(buildbuddy_invocation_count[5m]))\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The total duration of each invocation, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-1",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"invocation_status"}),": Invocation status: ",(0,n.jsx)(s.code,{children:"success"}),", ",(0,n.jsx)(s.code,{children:"failure"}),", ",(0,n.jsx)(s.code,{children:"disconnected"}),", or ",(0,n.jsx)(s.code,{children:"unknown"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"bazel_command"}),": Command provided to the Bazel daemon: ",(0,n.jsx)(s.code,{children:"run"}),", ",(0,n.jsx)(s.code,{children:"test"}),", ",(0,n.jsx)(s.code,{children:"build"}),", ",(0,n.jsx)(s.code,{children:"coverage"}),", ",(0,n.jsx)(s.code,{children:"mobile-install"}),", ..."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-1",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Median invocation duration in the past 5 minutes\nhistogram_quantile(\n0.5,\nsum(rate(buildbuddy_invocation_duration_usec_bucket[5m])) by (le)\n)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_build_event_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_build_event_count"})})," (Counter)"]}),"\n",(0,n.jsxs)(s.p,{children:["Number of ",(0,n.jsx)(s.a,{href:"https://docs.bazel.build/versions/master/build-event-protocol.html",children:"build events"})," uploaded to BuildBuddy."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-2",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-2",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Build events uploaded per second\nsum(rate(buildbuddy_invocation_build_event_count[5m]))\n\n# Approximate error rate of build event upload handler\nsum(rate(buildbuddy_invocation_build_event_count{status="0"}[5m]))\n/\nsum(rate(buildbuddy_invocation_build_event_count[5m]))\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_stats_recorder_workers-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_stats_recorder_workers"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of invocation stats recorder workers currently running."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_stats_recorder_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_stats_recorder_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["How long it took to finalize an invocation's stats, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This includes the time required to wait for all BuildBuddy apps to flush their local metrics to Redis (if applicable) and then record the metrics to the DB."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_webhook_invocation_lookup_workers-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_webhook_invocation_lookup_workers"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of webhook invocation lookup workers currently running."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_webhook_invocation_lookup_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["How long it took to lookup an invocation before posting to the webhook, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_webhook_notify_workers-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_webhook_notify_workers"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of webhook notify workers currently running."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_invocation_webhook_notify_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_invocation_webhook_notify_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["How long it took to post an invocation proto to the webhook, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"remote-cache-metrics",children:"Remote cache metrics"}),"\n",(0,n.jsxs)(s.p,{children:["NOTE: Cache metrics are recorded at the end of each invocation,\nwhich means that these metrics provide ",(0,n.jsx)(s.em,{children:"approximate"})," real-time signals."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_events-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_events"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of cache events handled."}),"\n",(0,n.jsx)(s.h4,{id:"labels-3",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_event_type"}),": Cache event type: ",(0,n.jsx)(s.code,{children:"hit"}),", ",(0,n.jsx)(s.code,{children:"miss"}),", or ",(0,n.jsx)(s.code,{children:"upload"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_download_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_download_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes downloaded from the remote cache in each download."}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total downloaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of downloaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-4",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-3",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Cache download rate (bytes per second)\nsum(rate(buildbuddy_cache_download_size_bytes_sum[5m]))\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_download_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_download_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Download duration for each file downloaded from the remote cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-5",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-4",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Median download duration for content-addressable store (CAS)\nhistogram_quantile(\n0.5,\nsum(rate(buildbuddy_remote_cache_download_duration_usec{cache_type="cas"}[5m])) by (le)\n)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_upload_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_upload_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes uploaded to the remote cache in each upload."}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total uploaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of uploaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-6",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-5",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Cache upload rate (bytes per second)\nsum(rate(buildbuddy_cache_upload_size_bytes_sum[5m]))\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_upload_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_upload_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Upload duration for each file uploaded to the remote cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-7",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-6",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Median upload duration for content-addressable store (CAS)\nhistogram_quantile(\n0.5,\nsum(rate(buildbuddy_remote_cache_upload_duration_usec{cache_type="cas"}[5m])) by (le)\n)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_last_eviction_age_usec"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["The age of the item most recently evicted from the cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-8",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_eviction_age_msec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Age of items evicted from the cache, in ",(0,n.jsx)(s.strong,{children:"milliseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-9",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_num_evictions-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_num_evictions"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of items evicted."}),"\n",(0,n.jsx)(s.h4,{id:"labels-10",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_partition_size_bytes_evicted-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_partition_size_bytes_evicted"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes in the partition evicted."}),"\n",(0,n.jsx)(s.h4,{id:"labels-11",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_partition_size_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes in the partition."}),"\n",(0,n.jsx)(s.h4,{id:"labels-12",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_partition_capacity_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes in the partition."}),"\n",(0,n.jsx)(s.h4,{id:"labels-13",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_partition_num_items-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_partition_num_items"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of items in the partition."}),"\n",(0,n.jsx)(s.h4,{id:"labels-14",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_duplicate_writes-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_duplicate_writes"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of writes for digests that already exist."}),"\n",(0,n.jsx)(s.h4,{id:"labels-15",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_added_file_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Size of artifacts added to the file cache, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-16",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_filesystem_total_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Total size of the underlying filesystem."}),"\n",(0,n.jsx)(s.h4,{id:"labels-17",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Available bytes in the underlying filesystem."}),"\n",(0,n.jsx)(s.h4,{id:"labels-18",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-7",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Total number of duplicate writes.\nsum(buildbuddy_remote_cache_duplicate_writes)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes written that already existed in the cache."}),"\n",(0,n.jsx)(s.h4,{id:"labels-19",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_distributed_cache_peer_lookups-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_distributed_cache_peer_lookups"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of peers consulted (including the 'local peer') for a distributed cache read before returning a response."}),"\n",(0,n.jsx)(s.p,{children:"For batch requests, one observation is recorded for each digest in the request."}),"\n",(0,n.jsx)(s.h4,{id:"labels-20",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"op"}),': Distributed cache operation name, such as "FindMissing" or "Get".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Cache lookup result - "hit," "miss," or "partial" (for batched, proxied RPCs where part of the response is served out of the local cache).']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_migration_not_found_error_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_migration_not_found_error_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of not found errors from the destination cache during a cache migration."}),"\n",(0,n.jsx)(s.h4,{id:"labels-21",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"type"}),": Describes the type of cache request"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_migration_double_read_hit_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_migration_double_read_hit_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of double reads where the source and destination caches hold the same digests during a cache migration."}),"\n",(0,n.jsx)(s.h4,{id:"labels-22",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"type"}),": Describes the type of cache request"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_migration_copy_chan_size-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_migration_copy_chan_size"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of digests queued to be copied during a cache migration."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_migration_bytes_copied-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_migration_bytes_copied"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes copied from the source to destination cache during a cache migration."}),"\n",(0,n.jsx)(s.h4,{id:"labels-23",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_migration_blobs_copied-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_migration_blobs_copied"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of blobs copied from the source to destination cache during a cache migration."}),"\n",(0,n.jsx)(s.h4,{id:"labels-24",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_tree_cache_lookup_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_tree_cache_lookup_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of TreeCache lookups."}),"\n",(0,n.jsx)(s.h4,{id:"labels-25",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": The TreeCache status: hit/miss/invalid_entry."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": TreeCache directory depth: 0 for the root dir, 1 for a direct child of the root dir, and so on."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_tree_cache_split_lookup_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_tree_cache_split_lookup_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of TreeCache split lookups."}),"\n",(0,n.jsx)(s.h4,{id:"labels-26",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": The TreeCache split lookup status: hit/miss/failure"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_tree_cache_split_write_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_tree_cache_split_write_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of splits written to TreeCache."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_tree_cache_set_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_tree_cache_set_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of TreeCache sets."}),"\n",(0,n.jsx)(s.h4,{id:"labels-27",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": The TreeCache set status: success/deadline_exceeded/other_error"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_tree_cache_bytes_transferred-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_tree_cache_bytes_transferred"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes written or read from tree cache"}),"\n",(0,n.jsx)(s.h4,{id:"labels-28",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"op"}),': TreeCache operation "read" or "write"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_lookaside_cache_lookup_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_lookaside_cache_lookup_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of Lookaside Cache lookups."}),"\n",(0,n.jsx)(s.h4,{id:"labels-29",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": The Lookaside cache status: hit/miss."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_lookaside_cache_eviction_age_msec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_lookaside_cache_eviction_age_msec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Age of items evicted from the cache, in ",(0,n.jsx)(s.strong,{children:"milliseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-30",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"eviction_reason"}),': The reason an item was evicted from the lookaside cache. One of: "expired" or "size"']}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"remote-execution-metrics",children:"Remote execution metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of actions executed remotely."}),"\n",(0,n.jsx)(s.p,{children:"This only includes actions which reached the execution phase. If an action fails before execution (for example, if it fails authentication) then this metric is not incremented."}),"\n",(0,n.jsx)(s.h4,{id:"labels-31",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"exit_code"}),": Process exit code of an executed action."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"isolation"}),': Effective workload isolation type used for an executed task, such as "docker", "podman", "firecracker", or "none".']}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-8",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Total number of actions executed per second\nsum(rate(buildbuddy_remote_execution_count[5m]))\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_tasks_started_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_tasks_started_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of tasks started remotely, but not necessarily completed."}),"\n",(0,n.jsx)(s.p,{children:"Includes retry attempts of the same task."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_executed_action_metadata_durations_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Time spent in each stage of action execution, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Queries should filter or group by the ",(0,n.jsx)(s.code,{children:"stage"})," label, taking care not to aggregate different stages."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-32",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stage"}),": Executed action stage. Action execution is split into stages corresponding to the timestamps defined in ",(0,n.jsx)(s.a,{href:"https://github.com/buildbuddy-io/buildbuddy/blob/fb2e3a74083d82797926654409dc3858089d260b/proto/remote_execution.proto#L797",children:(0,n.jsx)(s.code,{children:"ExecutedActionMetadata"})}),": ",(0,n.jsx)(s.code,{children:"queued"}),", ",(0,n.jsx)(s.code,{children:"input_fetch"}),", ",(0,n.jsx)(s.code,{children:"execution"}),", and ",(0,n.jsx)(s.code,{children:"output_upload"}),". An additional stage, ",(0,n.jsx)(s.code,{children:"worker"}),", includes all stages during which a worker is handling the action, which is all stages except the ",(0,n.jsx)(s.code,{children:"queued"})," stage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-9",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Median duration of all command stages\nhistogram_quantile(\n0.5,\nsum(rate(buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket[5m])) by (le, stage)\n)\n\n# p90 duration of just the command execution stage\nhistogram_quantile(\n0.9,\nsum(rate(buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket{stage="execution"}[5m])) by (le)\n)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_task_pressure_stall_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_task_pressure_stall_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Linux PSI metrics for each executed action, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-33",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"resource"}),': System resource: "cpu", "memory", or "io".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stall_type"}),': Pressure stall type: "some" (task is partially stalled on the resource) or "full" (task is completely stalled on the resource).']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_task_size_read_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_task_size_read_requests"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of read requests to the task sizer, which estimates action resource usage based on historical execution stats."}),"\n",(0,n.jsx)(s.h4,{id:"labels-34",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status of the task size read request: ",(0,n.jsx)(s.code,{children:"hit"}),", ",(0,n.jsx)(s.code,{children:"miss"}),", or ",(0,n.jsx)(s.code,{children:"error"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"isolation"}),': Effective workload isolation type used for an executed task, such as "docker", "podman", "firecracker", or "none".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"os"}),": OS associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"arch"}),": CPU architecture associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_task_size_write_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_task_size_write_requests"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of write requests to the task sizer, which estimates action resource usage based on historical execution stats."}),"\n",(0,n.jsx)(s.h4,{id:"labels-35",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status of the task size write request: ",(0,n.jsx)(s.code,{children:"ok"}),", ",(0,n.jsx)(s.code,{children:"missing_stats"})," or ",(0,n.jsx)(s.code,{children:"error"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"isolation"}),': Effective workload isolation type used for an executed task, such as "docker", "podman", "firecracker", or "none".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"os"}),": OS associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"arch"}),": CPU architecture associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_task_size_prediction_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Task size prediction model request duration in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-36",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_enqueued_task_milli_cpu-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_enqueued_task_milli_cpu"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Milli-CPU prediction of enqueued tasks."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_enqueued_task_memory_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_enqueued_task_memory_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Memory prediction of enqueued tasks."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_waiting_execution_result-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_waiting_execution_result"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of execution requests for which the client is actively waiting for results."}),"\n",(0,n.jsx)(s.h4,{id:"labels-37",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-10",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Total number of execution requests with client waiting for result.\nsum(buildbuddy_remote_execution_waiting_execution_result)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_requests"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of execution requests received."}),"\n",(0,n.jsx)(s.h4,{id:"labels-38",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"os"}),": OS associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"arch"}),": CPU architecture associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_executor_registration_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_executor_registration_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of executor registrations on the scheduler."}),"\n",(0,n.jsx)(s.h4,{id:"labels-39",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"version"}),": Binary version. Example: ",(0,n.jsx)(s.code,{children:"v2.0.0"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-11",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Rate of new execution requests by OS/Arch.\nsum(rate(buildbuddy_remote_execution_requests[1m])) by (os, arch)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_merged_actions-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_merged_actions"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of identical execution requests that have been merged."}),"\n",(0,n.jsx)(s.h4,{id:"labels-40",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_hedged_actions-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_hedged_actions"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of identicial execution request which were merged for which a hedged execution was run in the background."}),"\n",(0,n.jsx)(s.h4,{id:"labels-41",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_merged_actions_per_execution-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_merged_actions_per_execution"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Distribution of how many actions were submitted and merged against a single, canonical execution over the lifetime of that canonical execution."}),"\n",(0,n.jsx)(s.p,{children:"Note that this metric is recorded once per merged-action, so distribution values are cumulative, or recorded n-times per canonical execution."}),"\n",(0,n.jsx)(s.h4,{id:"labels-42",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_merged_action_submit_time_offset_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_merged_action_submit_time_offset_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The offset, in microseconds of wall-time, between the time when a merged action was submitted to the execution server and when the original action was submitted to the execution server."}),"\n",(0,n.jsx)(s.h4,{id:"labels-43",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-12",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Rate of merged actions by group.\nsum(rate(buildbuddy_remote_execution_merged_actions[1m])) by (group_id)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_queue_length-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_queue_length"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of actions currently waiting in the executor queue."}),"\n",(0,n.jsx)(s.h4,{id:"labels-44",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-13",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Median queue length across all executors\nquantile(0.5, buildbuddy_remote_execution_queue_length)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_tasks_executing-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_tasks_executing"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of tasks currently being executed by the executor."}),"\n",(0,n.jsx)(s.h4,{id:"labels-45",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stage"}),": Executed action stage. Action execution is split into stages corresponding to the timestamps defined in ",(0,n.jsx)(s.a,{href:"https://github.com/buildbuddy-io/buildbuddy/blob/fb2e3a74083d82797926654409dc3858089d260b/proto/remote_execution.proto#L797",children:(0,n.jsx)(s.code,{children:"ExecutedActionMetadata"})}),": ",(0,n.jsx)(s.code,{children:"queued"}),", ",(0,n.jsx)(s.code,{children:"input_fetch"}),", ",(0,n.jsx)(s.code,{children:"execution"}),", and ",(0,n.jsx)(s.code,{children:"output_upload"}),". An additional stage, ",(0,n.jsx)(s.code,{children:"worker"}),", includes all stages during which a worker is handling the action, which is all stages except the ",(0,n.jsx)(s.code,{children:"queued"})," stage."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-14",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Fraction of idle executors\ncount_values(0, buildbuddy_remote_execution_tasks_executing)\n/\ncount(buildbuddy_remote_execution_tasks_executing)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assigned_ram_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assigned_ram_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Estimated RAM on the executor that is currently allocated for task execution, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assigned_and_queued_estimated_ram_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assigned_and_queued_estimated_ram_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Estimated RAM on the executor that is currently allocated for queued or executing tasks, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Note that this is a fuzzy estimate because there's no guarantee that tasks queued on a machine will be handled by that machine."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assignable_ram_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assignable_ram_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Maximum total RAM that can be allocated for task execution, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assigned_milli_cpu-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assigned_milli_cpu"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Estimated CPU time on the executor that is currently allocated for task execution, in ",(0,n.jsx)(s.strong,{children:"milliCPU"})," (CPU-milliseconds per second)."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assigned_and_queued_estimated_milli_cpu-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assigned_and_queued_estimated_milli_cpu"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Estimated CPU time on the executor that is currently allocated for queued or executing tasks, in ",(0,n.jsx)(s.strong,{children:"milliCPU"})," (CPU-milliseconds per second)."]}),"\n",(0,n.jsx)(s.p,{children:"Note that this is a fuzzy estimate because there's no guarantee that tasks queued on a machine will be handled by that machine."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_assignable_milli_cpu-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_assignable_milli_cpu"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Maximum total CPU time on the executor that can be allocated for task execution, in ",(0,n.jsx)(s.strong,{children:"milliCPU"})," (CPU-milliseconds per second)."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_memory_usage_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_memory_usage_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Current total task memory usage in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This only accounts for tasks which are actively executing. To see memory usage of pooled runners, sum with runner pool memory usage."}),"\n",(0,n.jsx)(s.h4,{id:"examples-15",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Total approximate memory usage of active and pooled runners,\n# grouped by executor pod.\nsum by (pod_name) (\nbuildbuddy_remote_execution_memory_usage_bytes\n+ buildbuddy_remote_execution_runner_pool_memory_usage_bytes\n)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_peak_memory_usage_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_peak_memory_usage_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Current total peak memory usage in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["This is the sum of the peak memory usage for all tasks currently executing. It is not a very useful metric on its own, and is mainly intended for comparison with ",(0,n.jsx)(s.code,{children:"assigned_ram_bytes"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_used_milli_cpu-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_used_milli_cpu"})})," (Counter)"]}),"\n",(0,n.jsxs)(s.p,{children:["Approximate cumulative CPU usage of executed tasks, in ",(0,n.jsx)(s.strong,{children:"CPU-milliseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_cpu_utilization_milli_cpu"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Approximate current CPU utilization of tasks executing, in ",(0,n.jsx)(s.strong,{children:"milli-CPU"})," (CPU-milliseconds per second)."]}),"\n",(0,n.jsxs)(s.p,{children:["This allows for much higher granularity than using a ",(0,n.jsx)(s.code,{children:"rate()"})," on ",(0,n.jsx)(s.code,{children:"used_milli_cpu"})," metric."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_download_count-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_download_count"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of files downloaded during remote execution."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_download_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_download_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of bytes downloaded during remote execution."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_download_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_download_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Per-file download duration during remote execution, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_upload_count-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_upload_count"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of files uploaded during remote execution."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_upload_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_upload_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of bytes uploaded during remote execution."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_upload_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_upload_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Per-file upload duration during remote execution, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_stage_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_stage_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The total duration of each firecracker stage, in microseconds."}),"\n",(0,n.jsx)(s.h4,{id:"labels-46",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stage"}),": Generic label to describe the stage the metric is capturing"]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"stage-label-values",children:"Stage label values"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:'"init": Time for the VM to start up (either a new VM or from a snapshot)'}),"\n",(0,n.jsx)(s.li,{children:'"exec": Time to run the command inside the container'}),"\n",(0,n.jsx)(s.li,{children:"\"task_lifecycle\": Time from when the task if first assigned to the VM\n(beginning of init) to after it's finished execution. This roughly\nrepresents what a customer will wait for the task to complete after it's\nbeen scheduled to a firecracker runner"}),"\n",(0,n.jsx)(s.li,{children:'"pause": Time to pause the VM, save a snapshot, and cleanup resources'}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-16",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# P95 workflow lifecycle duration in the past 5 minutes, grouped by group_id\nhistogram_quantile(\n0.95,\nsum by(le, group_id) (\nrate(buildbuddy_firecracker_stage_duration_usec_bucket{job="executor-workflows", stage="task_lifecycle"}[5m])\n)\n)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_exec_dial_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_exec_dial_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Time taken to dial the VM guest execution server after it has been started or resumed, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_snapshot_remote_cache_upload_size_bytes-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_snapshot_remote_cache_upload_size_bytes"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"After a copy-on-write snapshot has been used, the total count of bytes dirtied."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_dirty_chunk_ratio-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_dirty_chunk_ratio"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"After a copy-on-write snapshot has been used, the ratio of dirty/total chunks."}),"\n",(0,n.jsx)(s.h4,{id:"labels-47",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"file_name"}),": Name of a file."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-17",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# To view how many elements fall into each bucket\n# Visualize with the Bar Gauge type\n# Legend: {{le}}\n# Format: Heatmap\nsum(increase(buildbuddy_firecracker_cow_snapshot_dirty_chunk_ratio_bucket[5m])) by(le)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_dirty_bytes-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_dirty_bytes"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"After a copy-on-write snapshot has been used, the total count of bytes dirtied."}),"\n",(0,n.jsx)(s.h4,{id:"labels-48",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"file_name"}),": Name of a file."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_chunk_source_ratio-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_chunk_source_ratio"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"After a copy-on-write snapshot has been used, the percentage of chunks that were initialized by the given source."}),"\n",(0,n.jsx)(s.h4,{id:"labels-49",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"file_name"}),": Name of a file."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"chunk_source"}),": For chunked snapshot files, describes the initialization source of the chunk (Ex. ",(0,n.jsx)(s.code,{children:"remote_cache"})," or ",(0,n.jsx)(s.code,{children:"local_filecache"}),")"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_memory_mapped_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_memory_mapped_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of bytes currently memory-mapped."}),"\n",(0,n.jsx)(s.h4,{id:"labels-50",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"file_name"}),": Name of a file."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_page_fault_total_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_page_fault_total_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"For a snapshotted VM, total time spent fulfilling page faults."}),"\n",(0,n.jsx)(s.h4,{id:"labels-51",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stage"}),": Generic label to describe the stage the metric is capturing"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_firecracker_cow_snapshot_chunk_operation_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_firecracker_cow_snapshot_chunk_operation_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"For a COW snapshot, cumulative time spent on an operation type."}),"\n",(0,n.jsx)(s.h4,{id:"labels-52",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"file_name"}),": Name of a file."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"name"}),": The name used to identify the type of an unexpected event."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"stage"}),": Generic label to describe the stage the metric is capturing"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_max_recyclable_resource_usage_event-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_max_recyclable_resource_usage_event"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Counter for firecracker runners that reach max disk/memory usage and won't get recycled."}),"\n",(0,n.jsx)(s.h4,{id:"labels-53",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"name"}),": The name used to identify the type of an unexpected event."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"recycled_runner_status"}),": For remote execution runners, describes the recycling status (Ex. 'clean' if the runner is not recycled or 'recycled')"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_recycle_runner_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_recycle_runner_requests"})})," (Counter)"]}),"\n",(0,n.jsxs)(s.p,{children:["Number of execution requests with runner recycling enabled (via the platform property ",(0,n.jsx)(s.code,{children:"recycle-runner=true"}),")."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-54",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status of the recycle runner request: ",(0,n.jsx)(s.code,{children:"hit"})," if the executor assigned a recycled runner to the action; ",(0,n.jsx)(s.code,{children:"miss"})," otherwise."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_runner_pool_count-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_runner_pool_count"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of command runners that are currently pooled (and available for recycling)."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_runner_pool_evictions-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_runner_pool_evictions"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of command runners removed from the pool to make room for other runners."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_runner_pool_failed_recycle_attempts"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of failed attempts to add runners to the pool."}),"\n",(0,n.jsx)(s.h4,{id:"labels-55",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"reason"}),": Reason for a runner not being added to the runner pool."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_runner_pool_memory_usage_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Total memory usage of pooled command runners, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"Currently only supported for Docker-based executors."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_runner_pool_disk_usage_bytes"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Total disk usage of pooled command runners, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_cache_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_cache_requests"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of local executor file cache requests."}),"\n",(0,n.jsx)(s.h4,{id:"labels-56",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status of the file cache request: ",(0,n.jsx)(s.code,{children:"hit"})," if found in cache, ",(0,n.jsx)(s.code,{children:"miss"})," otherwise."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_cache_last_eviction_age_usec"})})," (Gauge)"]}),"\n",(0,n.jsxs)(s.p,{children:["Age of the last entry evicted from the executor's local file cache (relative to when it was added to the cache), in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_execution_file_cache_added_file_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Size of artifacts added to the file cache, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"blobstore-metrics",children:"Blobstore metrics"}),"\n",(0,n.jsx)(s.p,{children:'"Blobstore" refers to the backing storage that BuildBuddy uses to\nstore objects in the cache, as well as certain pieces of temporary\ndata (such as invocation events while an invocation is in progress).'}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_read_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_read_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of files read from the blobstore."}),"\n",(0,n.jsx)(s.h4,{id:"labels-57",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_read_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_read_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes read from the blobstore per file."}),"\n",(0,n.jsx)(s.h4,{id:"labels-58",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h1,{id:"bytes-downloaded-per-second",children:"Bytes downloaded per second"}),"\n",(0,n.jsx)(s.p,{children:"sum(rate(buildbuddy_blobstore_read_size_bytes[5m]))"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"\n### **`buildbuddy_blobstore_read_duration_usec`** (Histogram)\n\nDuration per blobstore file read, in **microseconds**.\n\n#### Labels\n\n- **blobstore_type**: `gcs` (Google Cloud Storage), `aws_s3`, or `disk`.\n\n\n### **`buildbuddy_blobstore_write_count`** (Counter)\n\nNumber of files written to the blobstore.\n\n#### Labels\n\n- **status**: Status code as defined by [grpc/codes](https://godoc.org/google.golang.org/grpc/codes#Code). This is a numeric value; any non-zero code indicates an error.\n- **blobstore_type**: `gcs` (Google Cloud Storage), `aws_s3`, or `disk`.\n\n# Bytes uploaded per second\nsum(rate(buildbuddy_blobstore_write_size_bytes[5m]))\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_write_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_write_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes written to the blobstore per file."}),"\n",(0,n.jsx)(s.h4,{id:"labels-59",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_write_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_write_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Duration per blobstore file write, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-60",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_delete_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_delete_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of files deleted from the blobstore."}),"\n",(0,n.jsx)(s.h4,{id:"labels-61",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_blobstore_delete_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_blobstore_delete_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Delete duration per blobstore file deletion, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-62",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"blobstore_type"}),": ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"disk"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h1,{id:"sql-metrics",children:"SQL metrics"}),"\n",(0,n.jsx)(s.p,{children:"The following metrics are for monitoring the SQL database configured\nfor BuildBuddy."}),"\n",(0,n.jsxs)(s.p,{children:["If you'd like to see an up-to-date catalog of what BuildBuddy stores in\nits SQL database, see the table definitions ",(0,n.jsx)(s.a,{href:"https://github.com/buildbuddy-io/buildbuddy/blob/master/server/tables/tables.go",children:"here"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"query--error-rate-metrics",children:"Query / error rate metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_query_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_query_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of SQL queries executed."}),"\n",(0,n.jsx)(s.h4,{id:"labels-63",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-18",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# SQL queries per second (by query template).\nsum by (sql_query_template) (rate(buildbuddy_sql_query_count[5m]))\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_query_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_query_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["SQL query duration, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-64",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-19",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Median SQL query duration\nhistogram_quantile(\n0.5,\nsum(rate(buildbuddy_sql_query_duration_usec_bucket[5m])) by (le)\n)\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_error_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_error_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of SQL queries that resulted in an error."}),"\n",(0,n.jsx)(s.h4,{id:"labels-65",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-20",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# SQL error rate\nsum(rate(buildbuddy_sql_error_count[5m]))\n/\nsum(rate(buildbuddy_sql_query_count[5m]))\n"})}),"\n",(0,n.jsxs)(s.h2,{id:"databasesql-metrics",children:[(0,n.jsx)(s.code,{children:"database/sql"})," metrics"]}),"\n",(0,n.jsxs)(s.p,{children:["The following metrics directly expose\n",(0,n.jsx)(s.a,{href:"https://golang.org/pkg/database/sql/#DBStats",children:"DBStats"})," from the\n",(0,n.jsx)(s.code,{children:"database/sql"})," Go package."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_max_open_connections-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_max_open_connections"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Maximum number of open connections to the database."}),"\n",(0,n.jsx)(s.h4,{id:"labels-66",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_open_connections-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_open_connections"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of established connections to the database."}),"\n",(0,n.jsx)(s.h4,{id:"labels-67",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"connection_status"}),": Status of the database connection: ",(0,n.jsx)(s.code,{children:"in_use"})," or ",(0,n.jsx)(s.code,{children:"idle"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_wait_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_wait_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of connections waited for."}),"\n",(0,n.jsx)(s.h4,{id:"labels-68",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_wait_duration_usec-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_wait_duration_usec"})})," (Counter)"]}),"\n",(0,n.jsxs)(s.p,{children:["The total time blocked waiting for a new connection, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-69",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_max_idle_closed-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_max_idle_closed"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of connections closed due to SetMaxIdleConns."}),"\n",(0,n.jsx)(s.h4,{id:"labels-70",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_max_idle_time_closed-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_max_idle_time_closed"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of connections closed due to SetConnMaxIdleTime."}),"\n",(0,n.jsx)(s.h4,{id:"labels-71",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_sql_max_lifetime_closed-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_sql_max_lifetime_closed"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of connections closed due to SetConnMaxLifetime."}),"\n",(0,n.jsx)(s.h4,{id:"labels-72",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_db_role"}),": SQL DB replica role: ",(0,n.jsx)(s.code,{children:"primary"})," for read+write replicas, or ",(0,n.jsx)(s.code,{children:"read_replica"})," for read-only DB replicas."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"http-metrics",children:"HTTP metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_http_request_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_http_request_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"HTTP request count."}),"\n",(0,n.jsx)(s.h4,{id:"labels-73",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"route"}),": HTTP route before substituting path parameters (",(0,n.jsx)(s.code,{children:"/invocation/:id"}),", ",(0,n.jsx)(s.code,{children:"/settings"}),", ...)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"method"}),": HTTP method: ",(0,n.jsx)(s.code,{children:"GET"}),", ",(0,n.jsx)(s.code,{children:"POST"}),", ..."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-21",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Requests per second, by status code\nsum by (code) (rate(buildbuddy_http_request_count[5m]))\n\n# 5xx error ratio\nsum(rate(buildbuddy_http_request_count{code=~"5.."}[5m]))\n/\nsum(rate(buildbuddy_http_request_count[5m]))\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_http_request_handler_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_http_request_handler_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Time taken to handle each HTTP request in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-74",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"route"}),": HTTP route before substituting path parameters (",(0,n.jsx)(s.code,{children:"/invocation/:id"}),", ",(0,n.jsx)(s.code,{children:"/settings"}),", ...)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"method"}),": HTTP method: ",(0,n.jsx)(s.code,{children:"GET"}),", ",(0,n.jsx)(s.code,{children:"POST"}),", ..."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"code"}),": HTTP response code: ",(0,n.jsx)(s.code,{children:"200"}),", ",(0,n.jsx)(s.code,{children:"302"}),", ",(0,n.jsx)(s.code,{children:"401"}),", ",(0,n.jsx)(s.code,{children:"404"}),", ",(0,n.jsx)(s.code,{children:"500"}),", ..."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-22",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Median request duration for successfuly processed (2xx) requests.\n# Other status codes may be associated with early-exits and are\n# likely to add too much noise.\nhistogram_quantile(\n0.5,\nsum by (le)\t(rate(buildbuddy_http_request_handler_duration_usec{code=~"2.."}[5m]))\n)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_http_response_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_http_response_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Response size of each HTTP response in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-75",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"route"}),": HTTP route before substituting path parameters (",(0,n.jsx)(s.code,{children:"/invocation/:id"}),", ",(0,n.jsx)(s.code,{children:"/settings"}),", ...)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"method"}),": HTTP method: ",(0,n.jsx)(s.code,{children:"GET"}),", ",(0,n.jsx)(s.code,{children:"POST"}),", ..."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"code"}),": HTTP response code: ",(0,n.jsx)(s.code,{children:"200"}),", ",(0,n.jsx)(s.code,{children:"302"}),", ",(0,n.jsx)(s.code,{children:"401"}),", ",(0,n.jsx)(s.code,{children:"404"}),", ",(0,n.jsx)(s.code,{children:"500"}),", ..."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-23",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:"# Median HTTP response size\nhistogram_quantile(\n0.5,\nsum by (le)\t(rate(buildbuddy_http_response_size_bytes[5m]))\n)\n"})}),"\n",(0,n.jsx)(s.h2,{id:"internal-metrics",children:"Internal metrics"}),"\n",(0,n.jsx)(s.p,{children:"These metrics are for monitoring lower-level subsystems of BuildBuddy."}),"\n",(0,n.jsx)(s.h3,{id:"build-event-handler",children:"Build event handler"}),"\n",(0,n.jsx)(s.p,{children:"The build event handler logs all build events uploaded to BuildBuddy\nas part of the Build Event Protocol."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_build_event_handler_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_build_event_handler_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent handling each build event in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-76",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"webhooks",children:"Webhooks"}),"\n",(0,n.jsx)(s.p,{children:"Webhooks are HTTP endpoints exposed by BuildBuddy server which allow it to\nrespond to repository events. These URLs are created as part of BuildBuddy\nworkflows."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_webhook_handler_workflows_started-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_webhook_handler_workflows_started"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of workflows triggered by the webhook handler."}),"\n",(0,n.jsx)(s.h4,{id:"labels-77",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"event"}),": Type of event sent to BuildBuddy's webhook handler: ",(0,n.jsx)(s.code,{children:"push"})," or ",(0,n.jsx)(s.code,{children:"pull_request"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"cache",children:"Cache"}),"\n",(0,n.jsx)(s.p,{children:'"Cache" refers to the cache backend(s) that BuildBuddy uses to\naccelerate file IO operations, which are common in different\nsubsystems such as the remote cache and the fetch server (for\ndownloading invocation artifacts).'}),"\n",(0,n.jsx)(s.p,{children:"BuildBuddy can be configured to use multiple layers of caching\n(an in-memory layer, coupled with a cloud storage layer)."}),"\n",(0,n.jsxs)(s.h4,{id:"get-metrics",children:[(0,n.jsx)(s.code,{children:"get"})," metrics"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"get"})," metrics track non-streamed cache reads (all data is fetched\nfrom the cache in a single request)."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_get_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_get_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of cache get requests."}),"\n",(0,n.jsx)(s.h4,{id:"labels-78",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_get_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_get_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent retrieving each entry from the cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only for successful gets."}),"\n",(0,n.jsx)(s.h4,{id:"labels-79",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_get_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_get_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Size of each entry retrieved from the cache, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only for successful gets."}),"\n",(0,n.jsx)(s.h4,{id:"labels-80",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"read-metrics",children:[(0,n.jsx)(s.code,{children:"read"})," metrics"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"read"})," metrics track streamed cache reads."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_read_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_read_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of streamed cache reads started."}),"\n",(0,n.jsxs)(s.p,{children:["This is incremented once for each started stream, ",(0,n.jsx)(s.strong,{children:"not"})," for each chunk in the stream."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-81",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_read_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_read_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The total time spent for each read stream, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only for successful reads, and measures the entire read stream (not just individual chunks)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-82",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_read_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_read_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Total size of each entry retrieved from the cache via streaming, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only on success, and measures the entire stream (not just individual chunks)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-83",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"set-metrics",children:[(0,n.jsx)(s.code,{children:"set"})," metrics"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"set"})," metrics track non-streamed cache writes (all data is wrtiten\nin a single request)."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_set_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_set_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of cache set requests."}),"\n",(0,n.jsx)(s.h4,{id:"labels-84",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_set_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_set_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent writing each entry to the cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only for successful sets."}),"\n",(0,n.jsx)(s.h4,{id:"labels-85",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_set_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_set_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Size of the value stored in each set operation, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only for successful sets."}),"\n",(0,n.jsx)(s.h4,{id:"labels-86",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_set_retries-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_set_retries"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of retries required to fulfill the set request (an observed value of 0 means the transfer succeeded on the first try)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-87",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h4,{id:"write-metrics",children:[(0,n.jsx)(s.code,{children:"write"})," metrics"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"write"})," metrics track streamed cache writes."]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_write_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_write_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of streamed cache writes started."}),"\n",(0,n.jsxs)(s.p,{children:["This is incremented once for each started stream, ",(0,n.jsx)(s.strong,{children:"not"})," for each chunk in the stream."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-88",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_write_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_write_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent for each streamed write to the cache, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only on success, and measures the entire stream (not just individual chunks)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-89",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_write_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_write_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Size of each entry written to the cache via streaming, in ",(0,n.jsx)(s.strong,{children:"bytes"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This is recorded only on success, and measures the entire stream (not just individual chunks)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-90",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_write_retries-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_write_retries"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of retries required to write each chunk in the stream (an observed value of 0 means the transfer succeeded on the first try)."}),"\n",(0,n.jsx)(s.h4,{id:"labels-91",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"other-cache-metrics",children:"Other cache metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_delete_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_delete_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of deletes from the cache."}),"\n",(0,n.jsx)(s.h4,{id:"labels-92",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_delete_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_delete_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Duration of each cache deletion, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-93",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_contains_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_contains_count"})})," (Counter)"]}),"\n",(0,n.jsxs)(s.p,{children:["Number of ",(0,n.jsx)(s.code,{children:"contains(key)"})," requests made to the cache."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-94",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_contains_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_contains_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Duration of each each ",(0,n.jsx)(s.code,{children:"contains(key)"})," request, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-95",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_cache_contains_retry_count-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_cache_contains_retry_count"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["Number of retries required to fulfill each ",(0,n.jsx)(s.code,{children:"contains(key)"})," request to the cache (an observed value of 0 means the request succeeded on the first try)."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-96",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"tier"}),": Cache tier: ",(0,n.jsx)(s.code,{children:"memory"})," or ",(0,n.jsx)(s.code,{children:"cloud"}),". This label can be used to write Prometheus queries that don't break if the cache backend is swapped out for a different backend."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"backend"}),": Cache backend: ",(0,n.jsx)(s.code,{children:"gcs"})," (Google Cloud Storage), ",(0,n.jsx)(s.code,{children:"aws_s3"}),", or ",(0,n.jsx)(s.code,{children:"redis"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"misc-metrics",children:"Misc metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_version-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_version"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Binary version of the running instance."}),"\n",(0,n.jsxs)(s.p,{children:["Always reports a value of 1 similar to the ",(0,n.jsx)(s.code,{children:"up"})," metric, but has a label containing the version."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-97",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"version"}),": Binary version. Example: ",(0,n.jsx)(s.code,{children:"v2.0.0"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"commit"}),": Binary git commit SHA. Example: ",(0,n.jsx)(s.code,{children:"4bd7046417608d785094aa5ec7aa009a9ae53753"})]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_unexpected_event-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_unexpected_event"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Counter for unexpected events."}),"\n",(0,n.jsx)(s.h4,{id:"labels-98",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"name"}),": The name used to identify the type of an unexpected event."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_health_check_status-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_health_check_status"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Health check status."}),"\n",(0,n.jsx)(s.h4,{id:"labels-99",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"health_check_name"}),': Name of service the health check is running for (Ex "distributed_cache" or "sql_primary").']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_quota_rpcs_handled_total_by_quota_key-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_quota_rpcs_handled_total_by_quota_key"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of RPCs completed on the server by quota_key, regardless of success or failure."}),"\n",(0,n.jsx)(s.h4,{id:"labels-100",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"grpc_full_method"}),": The full name of the grpc method: ",(0,n.jsx)(s.code,{children:"/<service>/<method>"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"quota_key"}),": The key used for quota accounting, either a group ID or an IP address."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"quota_allowed"}),": Whether the request was allowed by quota manager."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_registry_blob_range_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_registry_blob_range_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Latency of serving layer blob ranges."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_clickhouse_insert_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_clickhouse_insert_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Num of rows inserted into ClickHouse"}),"\n",(0,n.jsx)(s.h4,{id:"labels-101",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"clickhouse_table_name"}),": The name of the table in Clickhouse"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status of the Clickhouse operation: ",(0,n.jsx)(s.code,{children:"ok"}),", ",(0,n.jsx)(s.code,{children:"error"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_clickhouse_query_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_clickhouse_query_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["ClickHouse query duration, in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-102",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_clickhouse_error_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_clickhouse_error_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of ClickHouse SQL queries that resulted in an error."}),"\n",(0,n.jsx)(s.h4,{id:"labels-103",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_clickhouse_query_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_clickhouse_query_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of ClickHouse SQL queries executed."}),"\n",(0,n.jsx)(s.h4,{id:"labels-104",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"sql_query_template"}),": SQL query before substituting template parameters."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_compressor_bytes_compressed-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_compressor_bytes_compressed"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of decompressed bytes passed into compressors"}),"\n",(0,n.jsx)(s.h4,{id:"labels-105",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compression"}),": Describes the type of compression"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_compressor_bytes_decompressed-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_compressor_bytes_decompressed"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of decompressed bytes passed out of decompressors"}),"\n",(0,n.jsx)(s.h4,{id:"labels-106",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compression"}),": Describes the type of compression"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_pebble_compression_ratio-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_pebble_compression_ratio"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The aggregate compression ratio (compressed / decompressed bytes) for a stream of data"}),"\n",(0,n.jsx)(s.h4,{id:"labels-107",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compression"}),": Describes the type of compression"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_compressor_compressed_blob_size_write-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_compressor_compressed_blob_size_write"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of compressed bytes in all blobs"}),"\n",(0,n.jsx)(s.h4,{id:"labels-108",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compression"}),": Describes the type of compression"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_compressor_decompressed_blob_size_write-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_compressor_decompressed_blob_size_write"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of decompressed bytes in all blobs"}),"\n",(0,n.jsx)(s.h4,{id:"labels-109",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compression"}),": Describes the type of compression"]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"examples-24",children:"Examples"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-promql",children:'# Histogram buckets with the count of elements in each compression ratio bucket\n# Visualize with the Bar Gauge type\n# Legend: {{le}}\n# Format: Heatmap\nsum(increase(buildbuddy_pebble_compression_ratio_bucket[5m])) by(le)\n\n# Percentage of elements that increased in size when compressed (compression ratio > 1)\n# Visualize with the Stat type\n(sum(buildbuddy_pebble_compression_ratio_count) - sum(buildbuddy_pebble_compression_ratio_bucket{le="1.0"})) / sum(buildbuddy_pebble_compression_ratio_count)\n'})}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_upload_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_upload_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes uploaded to the server in each upload."}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total uploaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of uploaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-110",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_uncompressed_upload_bytes_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_uncompressed_upload_bytes_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of uncompressed bytes uploaded to the server."}),"\n",(0,n.jsx)(s.h4,{id:"labels-111",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_download_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_download_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes downloaded from the server in each download."}),"\n",(0,n.jsxs)(s.p,{children:["Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total downloaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of downloaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-112",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_uncompressed_download_bytes_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_uncompressed_download_bytes_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of uncompressed bytes downloaded from the server."}),"\n",(0,n.jsx)(s.h4,{id:"labels-113",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_digest_upload_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_digest_upload_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Digest size uploaded to the server in each upload."}),"\n",(0,n.jsxs)(s.p,{children:["This does not always match the actual size uploaded to the server, if the client sends compressed bytes. Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total uploaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of uploaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-114",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_server_digest_download_size_bytes-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_server_digest_download_size_bytes"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Digest size downloaded from the server in each download."}),"\n",(0,n.jsxs)(s.p,{children:["This does not always match the actual size downloaded to the server, if the client requests compressed bytes. Use the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_sum"})})," suffix to get the total downloaded bytes and the ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"_count"})})," suffix to get the number of downloaded files."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-115",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_type"}),": Cache type: ",(0,n.jsx)(s.code,{children:"action"})," for action cache, ",(0,n.jsx)(s.code,{children:"cas"})," for content-addressable storage."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"server_name"}),': Describes the name of the server that handles a client request, such as "byte_stream_server" or "cas_server"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_logger_log_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_logger_log_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of logs"}),"\n",(0,n.jsx)(s.h4,{id:"labels-116",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"raft-cache-metrics",children:"Raft cache metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_ranges-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_ranges"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of raft ranges on each nodehost."}),"\n",(0,n.jsx)(s.h4,{id:"labels-117",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"node_host_id"}),": The ID of a raft nodehost."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_records-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_records"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of raft records in each range."}),"\n",(0,n.jsx)(s.h4,{id:"labels-118",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"range_id"}),": The range ID of a raft region."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Size (in bytes) of each range."}),"\n",(0,n.jsx)(s.h4,{id:"labels-119",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"range_id"}),": The range ID of a raft region."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_proposals-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_proposals"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of statemachine proposals on each range."}),"\n",(0,n.jsx)(s.h4,{id:"labels-120",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"range_id"}),": The range ID of a raft region."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_splits-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_splits"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of splits per nodehost."}),"\n",(0,n.jsx)(s.h4,{id:"labels-121",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"node_host_id"}),": The ID of a raft nodehost."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_moves-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_moves"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of moves per nodehost."}),"\n",(0,n.jsx)(s.h4,{id:"labels-122",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"node_host_id"}),": The ID of a raft nodehost."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"move_type"}),": The type of raft move ",(0,n.jsx)(s.code,{children:"add"}),", or ",(0,n.jsx)(s.code,{children:"remove"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_rangecache_lookups-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_rangecache_lookups"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of rangecache lookups per nodehost."}),"\n",(0,n.jsx)(s.h4,{id:"labels-123",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"rangecache_event_type"}),": Raft RangeCache event type: ",(0,n.jsx)(s.code,{children:"hit"}),", ",(0,n.jsx)(s.code,{children:"miss"}),", or ",(0,n.jsx)(s.code,{children:"update"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_split_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_split_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent splitting a range in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-124",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"range_id"}),": The range ID of a raft region."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_replica_update_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_replica_update_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsxs)(s.p,{children:["The time spent on replica.Update in ",(0,n.jsx)(s.strong,{children:"microseconds"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"labels-125",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"range_id"}),": The range ID of a raft region."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_eviction_errors-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_eviction_errors"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of eviction errors"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_raft_listener_events_dropped-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_raft_listener_events_dropped"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of eviction errors"}),"\n",(0,n.jsx)(s.h4,{id:"labels-126",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"listener_id"}),": The ID of a raft listener"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"listener_event"}),": Raft Listener Event Type"]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_auth_api_key_lookup_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_auth_api_key_lookup_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of API key lookups."}),"\n",(0,n.jsx)(s.h4,{id:"labels-127",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Whether or not the API Key lookup hit the in memory cache or not: "cache_hit", "cache_miss" or "invalid_key".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_auth_ip_rules_check_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_auth_ip_rules_check_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Latency of IP authorization checks."}),"\n",(0,n.jsx)(s.h4,{id:"labels-128",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),' in human-readable format, such as "OK" or "NotFound".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_key_refresh_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_key_refresh_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of encryption key refresh attempts."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_key_refresh_failure_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_key_refresh_failure_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of unsuccessful encryption key refresh attempts."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_encrypted_block_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_encrypted_block_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of blocks encrypted."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_encrypted_blob_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_encrypted_blob_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of blobs encrypted."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_decrypted_block_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_decrypted_block_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of blocks decrypted."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_decrypted_blob_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_decrypted_blob_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of blobs decrypted."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_decryption_error_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_decryption_error_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of decryption errors."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_encryption_key_last_encryption_age_msec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_encryption_key_last_encryption_age_msec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Age of encrypted keys (i.e."}),"\n",(0,n.jsx)(s.p,{children:"how long it has been since the keys were re-encrypted)."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_atime_update_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_atime_update_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Count of processed atime updates."}),"\n",(0,n.jsx)(s.h4,{id:"labels-129",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_atime_delta_when_read-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_atime_delta_when_read"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Previous atime of items in the cache when they are read, in msec"}),"\n",(0,n.jsx)(s.h4,{id:"labels-130",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_eviction_samples_chan_size-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_eviction_samples_chan_size"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Num of items in eviction samples chan"}),"\n",(0,n.jsx)(s.h4,{id:"labels-131",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_eviction_resample_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_eviction_resample_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Latency of resampling during a single eviction iteration."}),"\n",(0,n.jsx)(s.h4,{id:"labels-132",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_eviction_evict_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_eviction_evict_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Latency of evicting a single key."}),"\n",(0,n.jsx)(s.h4,{id:"labels-133",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"partition_id"}),": The ID of the disk cache partition this event applied to."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_compact_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of compactions performed by the underlying Pebble database."}),"\n",(0,n.jsx)(s.h4,{id:"labels-134",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"compaction_type"}),": Pebble DB compaction type."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Estimated number of bytes that need to be compacted for the LMS to reach a stable state."}),"\n",(0,n.jsx)(s.h4,{id:"labels-135",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of bytes present in sstables being written by in-progress compactions."}),"\n",(0,n.jsx)(s.h4,{id:"labels-136",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of compactions that are in-progress"}),"\n",(0,n.jsx)(s.h4,{id:"labels-137",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Count of files that are marked for compaction."}),"\n",(0,n.jsx)(s.h4,{id:"labels-138",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of sublevels within the level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-139",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_num_files"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The total number of files in the level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-140",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The total size in bytes of the files in the level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-141",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_score"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The level's compaction score."}),"\n",(0,n.jsx)(s.h4,{id:"labels-142",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of incoming bytes from other levels read during compactions."}),"\n",(0,n.jsx)(s.p,{children:"This excludes bytes moved and bytes ingested. For L0 this is the bytes written to the WAL."}),"\n",(0,n.jsx)(s.h4,{id:"labels-143",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of bytes ingested."}),"\n",(0,n.jsx)(s.h4,{id:"labels-144",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of bytes moved into the level by a move compaction."}),"\n",(0,n.jsx)(s.h4,{id:"labels-145",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of bytes read for compactions at the level."}),"\n",(0,n.jsx)(s.p,{children:"This includes bytes read from other levels (BytesIn), as well as bytes read for the level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-146",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of bytes written during compactions."}),"\n",(0,n.jsx)(s.h4,{id:"labels-147",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of bytes written during flushes."}),"\n",(0,n.jsx)(s.h4,{id:"labels-148",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of sstables compacted to this level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-149",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of sstables flushed to this level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-150",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of sstables ingested into this level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-151",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of sstables ingested into to this level."}),"\n",(0,n.jsx)(s.h4,{id:"labels-152",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"level"}),": Pebble DB level number."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_op_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of operations performed against the pebble database."}),"\n",(0,n.jsx)(s.h4,{id:"labels-153",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"pebble_id"}),": Pebble DB ID"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"pebble_op"}),": Pebble DB operation type."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The latency of operations performed against the pebble database, in microseconds."}),"\n",(0,n.jsx)(s.h4,{id:"labels-154",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"pebble_id"}),": Pebble DB ID"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"pebble_op"}),": Pebble DB operation type."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_block_cache_size_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_block_cache_size_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The total size in pebble's block cache."}),"\n",(0,n.jsx)(s.h4,{id:"labels-155",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_count-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_count"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of write stalls"}),"\n",(0,n.jsx)(s.h4,{id:"labels-156",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_duration_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_duration_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The duration of write stall in pebble, in microseconds."}),"\n",(0,n.jsx)(s.h4,{id:"labels-157",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_zombie_table_count-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_zombie_table_count"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of zombie tables"}),"\n",(0,n.jsx)(s.h4,{id:"labels-158",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_zombie_table_size_bytes-gauge",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_zombie_table_size_bytes"})})," (Gauge)"]}),"\n",(0,n.jsx)(s.p,{children:"The size of zombie tables in bytes"}),"\n",(0,n.jsx)(s.h4,{id:"labels-159",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_groupid_sample_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of times a group has been selected for key sampling."}),"\n",(0,n.jsx)(s.h4,{id:"labels-160",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_remote_cache_pebble_cache_num_chunks_per_file-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_remote_cache_pebble_cache_num_chunks_per_file"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"Number of chunks per file stored in pebble cache"}),"\n",(0,n.jsx)(s.h4,{id:"labels-161",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"cache_name"}),': Cache name: Custom name to describe the cache, like "pebble-cache".']}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"podman-metrics",children:"Podman metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_podman_soci_store_crash_count-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_podman_soci_store_crash_count"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"Total number of times the soci store binary crashed and was restarted."}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_podman_get_soci_artifacts_latency_usec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_podman_get_soci_artifacts_latency_usec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The latency of retrieving SOCI artifacts from the app and storing them locally per image, in microseconds."}),"\n",(0,n.jsx)(s.p,{children:"Note this is slightly different than the latency of the GetArtifacts RPC as the artifacts must be fetched from the cache and stored locally, which adds some additional time."}),"\n",(0,n.jsx)(s.h4,{id:"labels-162",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"container_image_tag"}),": Container image tag."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_podman_get_soci_artifacts_outcome-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_podman_get_soci_artifacts_outcome"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The outcome (cached or reason why not) of SociArtifactStore.GetArtifacts RPCs."}),"\n",(0,n.jsx)(s.h4,{id:"labels-163",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"get_soci_artifacts_outcome_tag"}),": SociArtifactStore.GetArtifacts outcome tag."]}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_podman_image_pull_latency_msec-histogram",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_podman_image_pull_latency_msec"})})," (Histogram)"]}),"\n",(0,n.jsx)(s.p,{children:"The latency of 'cold' podman pull requests per image, in milliseconds."}),"\n",(0,n.jsx)(s.p,{children:"'Cold' means the image hasn't been pulled by this executor previously."}),"\n",(0,n.jsx)(s.h4,{id:"labels-164",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"container_image_tag"}),": Container image tag."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"cache-proxy-metrics",children:"Cache Proxy metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_proxy_byte_stream_reads-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_proxy_byte_stream_reads"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The result of serving a byte_stream_proxy.read request out of the byte_stream_server_proxy."}),"\n",(0,n.jsx)(s.h4,{id:"labels-165",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Cache lookup result - "hit," "miss," or "partial" (for batched, proxied RPCs where part of the response is served out of the local cache).']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_proxy_content_addressable_storage_reads-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_proxy_content_addressable_storage_reads"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The result of serving a content_addressable_storage read request out of the content_addressable_storage_server_proxy."}),"\n",(0,n.jsx)(s.h4,{id:"labels-166",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"op"}),': ContentAddressableStorage Server operation: "FindMissingBlobs", "BatchUpdateBlobs", "BatchReadBlobs", or "GetTree".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Cache lookup result - "hit," "miss," or "partial" (for batched, proxied RPCs where part of the response is served out of the local cache).']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_proxy_content_addressable_storage_digest_reads-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_proxy_content_addressable_storage_digest_reads"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The per-digest result of serving part of a content_addressable_storage read request out of the content_addressable_storage_server_proxy."}),"\n",(0,n.jsx)(s.p,{children:"This metric differs from buildbuddy_proxy_content_addressable_storage_reads in that it is recorded once per digest (there can be many digests per request), instead of once per request, thus 'partial' is never possible in this metric."}),"\n",(0,n.jsx)(s.h4,{id:"labels-167",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"op"}),': ContentAddressableStorage Server operation: "FindMissingBlobs", "BatchUpdateBlobs", "BatchReadBlobs", or "GetTree".']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Cache lookup result - "hit," "miss," or "partial" (for batched, proxied RPCs where part of the response is served out of the local cache).']}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"cache-proxy-remote-atime-update-metrics",children:"Cache Proxy Remote Atime Update Metrics"}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_proxy_remote_atime_updates-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_proxy_remote_atime_updates"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of remote atime updates enqueued, with the outcome of the enqueue operation."}),"\n",(0,n.jsx)(s.h4,{id:"labels-168",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),': Outcome of attempting to enqueue a remote atime update. One of "enqueued", "duplicate", "dropped_batch_too_large", or "dropped_too_many_batches"']}),"\n"]}),"\n",(0,n.jsxs)(s.h3,{id:"buildbuddy_proxy_remote_atime_update_requests-counter",children:[(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"buildbuddy_proxy_remote_atime_update_requests"})})," (Counter)"]}),"\n",(0,n.jsx)(s.p,{children:"The number of FindMissingBlobRequests sent to the remote cache to update remote blob atimes."}),"\n",(0,n.jsx)(s.h4,{id:"labels-169",children:"Labels"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"group_id"}),": Group (organization) ID associated with the request."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"status"}),": Status code as defined by ",(0,n.jsx)(s.a,{href:"https://godoc.org/google.golang.org/grpc/codes#Code",children:"grpc/codes"}),". This is a numeric value; any non-zero code indicates an error."]}),"\n"]})]})}function i(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(r,{...e})}):r(e)}const c={id:"prometheus-metrics-on-prem",title:"Prometheus Metrics for On-prem Users",sidebar_label:"Prometheus Metrics On-prem"},o=void 0,t={id:"prometheus-metrics-on-prem",title:"Prometheus Metrics for On-prem Users",description:"BuildBuddy exposes Prometheus metrics that allow monitoring the",source:"@site/../docs/prometheus-metrics-on-prem.mdx",sourceDirName:".",slug:"/prometheus-metrics-on-prem",permalink:"/docs/prometheus-metrics-on-prem",draft:!1,unlisted:!1,editUrl:"https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/prometheus-metrics-on-prem.mdx",tags:[],version:"current",lastUpdatedBy:"Tyler Williams",lastUpdatedAt:1730766346e3,frontMatter:{id:"prometheus-metrics-on-prem",title:"Prometheus Metrics for On-prem Users",sidebar_label:"Prometheus Metrics On-prem"},sidebar:"someSidebar",previous:{title:"Enterprise API",permalink:"/docs/enterprise-api"},next:{title:"Prometheus Metrics for Cloud",permalink:"/docs/prometheus-metrics-for-cloud"}},a={},u=[{value:"Invocation build event metrics",id:"invocation-build-event-metrics",level:2},{value:"<strong><code>buildbuddy_invocation_count</code></strong> (Counter)",id:"buildbuddy_invocation_count-counter",level:3},{value:"Labels",id:"labels",level:4},{value:"Examples",id:"examples",level:4},{value:"<strong><code>buildbuddy_invocation_duration_usec</code></strong> (Histogram)",id:"buildbuddy_invocation_duration_usec-histogram",level:3},{value:"Labels",id:"labels-1",level:4},{value:"Examples",id:"examples-1",level:4},{value:"<strong><code>buildbuddy_invocation_build_event_count</code></strong> (Counter)",id:"buildbuddy_invocation_build_event_count-counter",level:3},{value:"Labels",id:"labels-2",level:4},{value:"Examples",id:"examples-2",level:4},{value:"<strong><code>buildbuddy_invocation_stats_recorder_workers</code></strong> (Gauge)",id:"buildbuddy_invocation_stats_recorder_workers-gauge",level:3},{value:"<strong><code>buildbuddy_invocation_stats_recorder_duration_usec</code></strong> (Histogram)",id:"buildbuddy_invocation_stats_recorder_duration_usec-histogram",level:3},{value:"<strong><code>buildbuddy_invocation_webhook_invocation_lookup_workers</code></strong> (Gauge)",id:"buildbuddy_invocation_webhook_invocation_lookup_workers-gauge",level:3},{value:"<strong><code>buildbuddy_invocation_webhook_invocation_lookup_duration_usec</code></strong> (Histogram)",id:"buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram",level:3},{value:"<strong><code>buildbuddy_invocation_webhook_notify_workers</code></strong> (Gauge)",id:"buildbuddy_invocation_webhook_notify_workers-gauge",level:3},{value:"<strong><code>buildbuddy_invocation_webhook_notify_duration_usec</code></strong> (Histogram)",id:"buildbuddy_invocation_webhook_notify_duration_usec-histogram",level:3},{value:"Remote cache metrics",id:"remote-cache-metrics",level:2},{value:"<strong><code>buildbuddy_remote_cache_events</code></strong> (Counter)",id:"buildbuddy_remote_cache_events-counter",level:3},{value:"Labels",id:"labels-3",level:4},{value:"<strong><code>buildbuddy_remote_cache_download_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_cache_download_size_bytes-histogram",level:3},{value:"Labels",id:"labels-4",level:4},{value:"Examples",id:"examples-3",level:4},{value:"<strong><code>buildbuddy_remote_cache_download_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_download_duration_usec-histogram",level:3},{value:"Labels",id:"labels-5",level:4},{value:"Examples",id:"examples-4",level:4},{value:"<strong><code>buildbuddy_remote_cache_upload_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_cache_upload_size_bytes-histogram",level:3},{value:"Labels",id:"labels-6",level:4},{value:"Examples",id:"examples-5",level:4},{value:"<strong><code>buildbuddy_remote_cache_upload_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_upload_duration_usec-histogram",level:3},{value:"Labels",id:"labels-7",level:4},{value:"Examples",id:"examples-6",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_last_eviction_age_usec</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge",level:3},{value:"Labels",id:"labels-8",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_eviction_age_msec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram",level:3},{value:"Labels",id:"labels-9",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_num_evictions</code></strong> (Counter)",id:"buildbuddy_remote_cache_disk_cache_num_evictions-counter",level:3},{value:"Labels",id:"labels-10",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_partition_size_bytes_evicted</code></strong> (Counter)",id:"buildbuddy_remote_cache_disk_cache_partition_size_bytes_evicted-counter",level:3},{value:"Labels",id:"labels-11",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_partition_size_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge",level:3},{value:"Labels",id:"labels-12",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_partition_capacity_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge",level:3},{value:"Labels",id:"labels-13",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_partition_num_items</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_partition_num_items-gauge",level:3},{value:"Labels",id:"labels-14",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_duplicate_writes</code></strong> (Counter)",id:"buildbuddy_remote_cache_disk_cache_duplicate_writes-counter",level:3},{value:"Labels",id:"labels-15",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_added_file_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram",level:3},{value:"Labels",id:"labels-16",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_filesystem_total_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge",level:3},{value:"Labels",id:"labels-17",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge",level:3},{value:"Labels",id:"labels-18",level:4},{value:"Examples",id:"examples-7",level:4},{value:"<strong><code>buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes</code></strong> (Counter)",id:"buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter",level:3},{value:"Labels",id:"labels-19",level:4},{value:"<strong><code>buildbuddy_remote_cache_distributed_cache_peer_lookups</code></strong> (Histogram)",id:"buildbuddy_remote_cache_distributed_cache_peer_lookups-histogram",level:3},{value:"Labels",id:"labels-20",level:4},{value:"<strong><code>buildbuddy_remote_cache_migration_not_found_error_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_migration_not_found_error_count-counter",level:3},{value:"Labels",id:"labels-21",level:4},{value:"<strong><code>buildbuddy_remote_cache_migration_double_read_hit_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_migration_double_read_hit_count-counter",level:3},{value:"Labels",id:"labels-22",level:4},{value:"<strong><code>buildbuddy_remote_cache_migration_copy_chan_size</code></strong> (Gauge)",id:"buildbuddy_remote_cache_migration_copy_chan_size-gauge",level:3},{value:"<strong><code>buildbuddy_remote_cache_migration_bytes_copied</code></strong> (Counter)",id:"buildbuddy_remote_cache_migration_bytes_copied-counter",level:3},{value:"Labels",id:"labels-23",level:4},{value:"<strong><code>buildbuddy_remote_cache_migration_blobs_copied</code></strong> (Counter)",id:"buildbuddy_remote_cache_migration_blobs_copied-counter",level:3},{value:"Labels",id:"labels-24",level:4},{value:"<strong><code>buildbuddy_remote_cache_tree_cache_lookup_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_tree_cache_lookup_count-counter",level:3},{value:"Labels",id:"labels-25",level:4},{value:"<strong><code>buildbuddy_remote_cache_tree_cache_split_lookup_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_tree_cache_split_lookup_count-counter",level:3},{value:"Labels",id:"labels-26",level:4},{value:"<strong><code>buildbuddy_remote_cache_tree_cache_split_write_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_tree_cache_split_write_count-counter",level:3},{value:"<strong><code>buildbuddy_remote_cache_tree_cache_set_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_tree_cache_set_count-counter",level:3},{value:"Labels",id:"labels-27",level:4},{value:"<strong><code>buildbuddy_remote_cache_tree_cache_bytes_transferred</code></strong> (Counter)",id:"buildbuddy_remote_cache_tree_cache_bytes_transferred-counter",level:3},{value:"Labels",id:"labels-28",level:4},{value:"<strong><code>buildbuddy_remote_cache_lookaside_cache_lookup_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_lookaside_cache_lookup_count-counter",level:3},{value:"Labels",id:"labels-29",level:4},{value:"<strong><code>buildbuddy_remote_cache_lookaside_cache_eviction_age_msec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_lookaside_cache_eviction_age_msec-histogram",level:3},{value:"Labels",id:"labels-30",level:4},{value:"Remote execution metrics",id:"remote-execution-metrics",level:2},{value:"<strong><code>buildbuddy_remote_execution_count</code></strong> (Counter)",id:"buildbuddy_remote_execution_count-counter",level:3},{value:"Labels",id:"labels-31",level:4},{value:"Examples",id:"examples-8",level:4},{value:"<strong><code>buildbuddy_remote_execution_tasks_started_count</code></strong> (Counter)",id:"buildbuddy_remote_execution_tasks_started_count-counter",level:3},{value:"<strong><code>buildbuddy_remote_execution_executed_action_metadata_durations_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram",level:3},{value:"Labels",id:"labels-32",level:4},{value:"Examples",id:"examples-9",level:4},{value:"<strong><code>buildbuddy_remote_execution_task_pressure_stall_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_task_pressure_stall_duration_usec-histogram",level:3},{value:"Labels",id:"labels-33",level:4},{value:"<strong><code>buildbuddy_remote_execution_task_size_read_requests</code></strong> (Counter)",id:"buildbuddy_remote_execution_task_size_read_requests-counter",level:3},{value:"Labels",id:"labels-34",level:4},{value:"<strong><code>buildbuddy_remote_execution_task_size_write_requests</code></strong> (Counter)",id:"buildbuddy_remote_execution_task_size_write_requests-counter",level:3},{value:"Labels",id:"labels-35",level:4},{value:"<strong><code>buildbuddy_remote_execution_task_size_prediction_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram",level:3},{value:"Labels",id:"labels-36",level:4},{value:"<strong><code>buildbuddy_remote_execution_enqueued_task_milli_cpu</code></strong> (Histogram)",id:"buildbuddy_remote_execution_enqueued_task_milli_cpu-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_enqueued_task_memory_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_execution_enqueued_task_memory_bytes-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_waiting_execution_result</code></strong> (Gauge)",id:"buildbuddy_remote_execution_waiting_execution_result-gauge",level:3},{value:"Labels",id:"labels-37",level:4},{value:"Examples",id:"examples-10",level:4},{value:"<strong><code>buildbuddy_remote_execution_requests</code></strong> (Counter)",id:"buildbuddy_remote_execution_requests-counter",level:3},{value:"Labels",id:"labels-38",level:4},{value:"<strong><code>buildbuddy_remote_execution_executor_registration_count</code></strong> (Counter)",id:"buildbuddy_remote_execution_executor_registration_count-counter",level:3},{value:"Labels",id:"labels-39",level:4},{value:"Examples",id:"examples-11",level:4},{value:"<strong><code>buildbuddy_remote_execution_merged_actions</code></strong> (Counter)",id:"buildbuddy_remote_execution_merged_actions-counter",level:3},{value:"Labels",id:"labels-40",level:4},{value:"<strong><code>buildbuddy_remote_execution_hedged_actions</code></strong> (Counter)",id:"buildbuddy_remote_execution_hedged_actions-counter",level:3},{value:"Labels",id:"labels-41",level:4},{value:"<strong><code>buildbuddy_remote_execution_merged_actions_per_execution</code></strong> (Histogram)",id:"buildbuddy_remote_execution_merged_actions_per_execution-histogram",level:3},{value:"Labels",id:"labels-42",level:4},{value:"<strong><code>buildbuddy_remote_execution_merged_action_submit_time_offset_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_merged_action_submit_time_offset_usec-histogram",level:3},{value:"Labels",id:"labels-43",level:4},{value:"Examples",id:"examples-12",level:4},{value:"<strong><code>buildbuddy_remote_execution_queue_length</code></strong> (Gauge)",id:"buildbuddy_remote_execution_queue_length-gauge",level:3},{value:"Labels",id:"labels-44",level:4},{value:"Examples",id:"examples-13",level:4},{value:"<strong><code>buildbuddy_remote_execution_tasks_executing</code></strong> (Gauge)",id:"buildbuddy_remote_execution_tasks_executing-gauge",level:3},{value:"Labels",id:"labels-45",level:4},{value:"Examples",id:"examples-14",level:4},{value:"<strong><code>buildbuddy_remote_execution_assigned_ram_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assigned_ram_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_assigned_and_queued_estimated_ram_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assigned_and_queued_estimated_ram_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_assignable_ram_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assignable_ram_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_assigned_milli_cpu</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assigned_milli_cpu-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_assigned_and_queued_estimated_milli_cpu</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assigned_and_queued_estimated_milli_cpu-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_assignable_milli_cpu</code></strong> (Gauge)",id:"buildbuddy_remote_execution_assignable_milli_cpu-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_memory_usage_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_memory_usage_bytes-gauge",level:3},{value:"Examples",id:"examples-15",level:4},{value:"<strong><code>buildbuddy_remote_execution_peak_memory_usage_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_peak_memory_usage_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_used_milli_cpu</code></strong> (Counter)",id:"buildbuddy_remote_execution_used_milli_cpu-counter",level:3},{value:"<strong><code>buildbuddy_remote_execution_cpu_utilization_milli_cpu</code></strong> (Gauge)",id:"buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_download_count</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_download_count-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_download_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_download_size_bytes-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_download_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_download_duration_usec-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_upload_count</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_upload_count-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_upload_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_upload_size_bytes-histogram",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_upload_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_upload_duration_usec-histogram",level:3},{value:"<strong><code>buildbuddy_firecracker_stage_duration_usec</code></strong> (Histogram)",id:"buildbuddy_firecracker_stage_duration_usec-histogram",level:3},{value:"Labels",id:"labels-46",level:4},{value:"Stage label values",id:"stage-label-values",level:4},{value:"Examples",id:"examples-16",level:4},{value:"<strong><code>buildbuddy_firecracker_exec_dial_duration_usec</code></strong> (Histogram)",id:"buildbuddy_firecracker_exec_dial_duration_usec-histogram",level:3},{value:"<strong><code>buildbuddy_firecracker_snapshot_remote_cache_upload_size_bytes</code></strong> (Counter)",id:"buildbuddy_firecracker_snapshot_remote_cache_upload_size_bytes-counter",level:3},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_dirty_chunk_ratio</code></strong> (Histogram)",id:"buildbuddy_firecracker_cow_snapshot_dirty_chunk_ratio-histogram",level:3},{value:"Labels",id:"labels-47",level:4},{value:"Examples",id:"examples-17",level:4},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_dirty_bytes</code></strong> (Counter)",id:"buildbuddy_firecracker_cow_snapshot_dirty_bytes-counter",level:3},{value:"Labels",id:"labels-48",level:4},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_chunk_source_ratio</code></strong> (Histogram)",id:"buildbuddy_firecracker_cow_snapshot_chunk_source_ratio-histogram",level:3},{value:"Labels",id:"labels-49",level:4},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_memory_mapped_bytes</code></strong> (Gauge)",id:"buildbuddy_firecracker_cow_snapshot_memory_mapped_bytes-gauge",level:3},{value:"Labels",id:"labels-50",level:4},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_page_fault_total_duration_usec</code></strong> (Histogram)",id:"buildbuddy_firecracker_cow_snapshot_page_fault_total_duration_usec-histogram",level:3},{value:"Labels",id:"labels-51",level:4},{value:"<strong><code>buildbuddy_firecracker_cow_snapshot_chunk_operation_duration_usec</code></strong> (Histogram)",id:"buildbuddy_firecracker_cow_snapshot_chunk_operation_duration_usec-histogram",level:3},{value:"Labels",id:"labels-52",level:4},{value:"<strong><code>buildbuddy_remote_execution_max_recyclable_resource_usage_event</code></strong> (Counter)",id:"buildbuddy_remote_execution_max_recyclable_resource_usage_event-counter",level:3},{value:"Labels",id:"labels-53",level:4},{value:"<strong><code>buildbuddy_remote_execution_recycle_runner_requests</code></strong> (Counter)",id:"buildbuddy_remote_execution_recycle_runner_requests-counter",level:3},{value:"Labels",id:"labels-54",level:4},{value:"<strong><code>buildbuddy_remote_execution_runner_pool_count</code></strong> (Gauge)",id:"buildbuddy_remote_execution_runner_pool_count-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_runner_pool_evictions</code></strong> (Counter)",id:"buildbuddy_remote_execution_runner_pool_evictions-counter",level:3},{value:"<strong><code>buildbuddy_remote_execution_runner_pool_failed_recycle_attempts</code></strong> (Counter)",id:"buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter",level:3},{value:"Labels",id:"labels-55",level:4},{value:"<strong><code>buildbuddy_remote_execution_runner_pool_memory_usage_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_runner_pool_disk_usage_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_cache_requests</code></strong> (Counter)",id:"buildbuddy_remote_execution_file_cache_requests-counter",level:3},{value:"Labels",id:"labels-56",level:4},{value:"<strong><code>buildbuddy_remote_execution_file_cache_last_eviction_age_usec</code></strong> (Gauge)",id:"buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge",level:3},{value:"<strong><code>buildbuddy_remote_execution_file_cache_added_file_size_bytes</code></strong> (Histogram)",id:"buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram",level:3},{value:"Blobstore metrics",id:"blobstore-metrics",level:2},{value:"<strong><code>buildbuddy_blobstore_read_count</code></strong> (Counter)",id:"buildbuddy_blobstore_read_count-counter",level:3},{value:"Labels",id:"labels-57",level:4},{value:"<strong><code>buildbuddy_blobstore_read_size_bytes</code></strong> (Histogram)",id:"buildbuddy_blobstore_read_size_bytes-histogram",level:3},{value:"Labels",id:"labels-58",level:4},{value:"<strong><code>buildbuddy_blobstore_write_size_bytes</code></strong> (Histogram)",id:"buildbuddy_blobstore_write_size_bytes-histogram",level:3},{value:"Labels",id:"labels-59",level:4},{value:"<strong><code>buildbuddy_blobstore_write_duration_usec</code></strong> (Histogram)",id:"buildbuddy_blobstore_write_duration_usec-histogram",level:3},{value:"Labels",id:"labels-60",level:4},{value:"<strong><code>buildbuddy_blobstore_delete_count</code></strong> (Counter)",id:"buildbuddy_blobstore_delete_count-counter",level:3},{value:"Labels",id:"labels-61",level:4},{value:"<strong><code>buildbuddy_blobstore_delete_duration_usec</code></strong> (Histogram)",id:"buildbuddy_blobstore_delete_duration_usec-histogram",level:3},{value:"Labels",id:"labels-62",level:4},{value:"Query / error rate metrics",id:"query--error-rate-metrics",level:2},{value:"<strong><code>buildbuddy_sql_query_count</code></strong> (Counter)",id:"buildbuddy_sql_query_count-counter",level:3},{value:"Labels",id:"labels-63",level:4},{value:"Examples",id:"examples-18",level:4},{value:"<strong><code>buildbuddy_sql_query_duration_usec</code></strong> (Histogram)",id:"buildbuddy_sql_query_duration_usec-histogram",level:3},{value:"Labels",id:"labels-64",level:4},{value:"Examples",id:"examples-19",level:4},{value:"<strong><code>buildbuddy_sql_error_count</code></strong> (Counter)",id:"buildbuddy_sql_error_count-counter",level:3},{value:"Labels",id:"labels-65",level:4},{value:"Examples",id:"examples-20",level:4},{value:"<code>database/sql</code> metrics",id:"databasesql-metrics",level:2},{value:"<strong><code>buildbuddy_sql_max_open_connections</code></strong> (Gauge)",id:"buildbuddy_sql_max_open_connections-gauge",level:3},{value:"Labels",id:"labels-66",level:4},{value:"<strong><code>buildbuddy_sql_open_connections</code></strong> (Gauge)",id:"buildbuddy_sql_open_connections-gauge",level:3},{value:"Labels",id:"labels-67",level:4},{value:"<strong><code>buildbuddy_sql_wait_count</code></strong> (Counter)",id:"buildbuddy_sql_wait_count-counter",level:3},{value:"Labels",id:"labels-68",level:4},{value:"<strong><code>buildbuddy_sql_wait_duration_usec</code></strong> (Counter)",id:"buildbuddy_sql_wait_duration_usec-counter",level:3},{value:"Labels",id:"labels-69",level:4},{value:"<strong><code>buildbuddy_sql_max_idle_closed</code></strong> (Counter)",id:"buildbuddy_sql_max_idle_closed-counter",level:3},{value:"Labels",id:"labels-70",level:4},{value:"<strong><code>buildbuddy_sql_max_idle_time_closed</code></strong> (Counter)",id:"buildbuddy_sql_max_idle_time_closed-counter",level:3},{value:"Labels",id:"labels-71",level:4},{value:"<strong><code>buildbuddy_sql_max_lifetime_closed</code></strong> (Counter)",id:"buildbuddy_sql_max_lifetime_closed-counter",level:3},{value:"Labels",id:"labels-72",level:4},{value:"HTTP metrics",id:"http-metrics",level:2},{value:"<strong><code>buildbuddy_http_request_count</code></strong> (Counter)",id:"buildbuddy_http_request_count-counter",level:3},{value:"Labels",id:"labels-73",level:4},{value:"Examples",id:"examples-21",level:4},{value:"<strong><code>buildbuddy_http_request_handler_duration_usec</code></strong> (Histogram)",id:"buildbuddy_http_request_handler_duration_usec-histogram",level:3},{value:"Labels",id:"labels-74",level:4},{value:"Examples",id:"examples-22",level:4},{value:"<strong><code>buildbuddy_http_response_size_bytes</code></strong> (Histogram)",id:"buildbuddy_http_response_size_bytes-histogram",level:3},{value:"Labels",id:"labels-75",level:4},{value:"Examples",id:"examples-23",level:4},{value:"Internal metrics",id:"internal-metrics",level:2},{value:"Build event handler",id:"build-event-handler",level:3},{value:"<strong><code>buildbuddy_build_event_handler_duration_usec</code></strong> (Histogram)",id:"buildbuddy_build_event_handler_duration_usec-histogram",level:3},{value:"Labels",id:"labels-76",level:4},{value:"Webhooks",id:"webhooks",level:3},{value:"<strong><code>buildbuddy_webhook_handler_workflows_started</code></strong> (Counter)",id:"buildbuddy_webhook_handler_workflows_started-counter",level:3},{value:"Labels",id:"labels-77",level:4},{value:"Cache",id:"cache",level:3},{value:"<code>get</code> metrics",id:"get-metrics",level:4},{value:"<strong><code>buildbuddy_cache_get_count</code></strong> (Counter)",id:"buildbuddy_cache_get_count-counter",level:3},{value:"Labels",id:"labels-78",level:4},{value:"<strong><code>buildbuddy_cache_get_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_get_duration_usec-histogram",level:3},{value:"Labels",id:"labels-79",level:4},{value:"<strong><code>buildbuddy_cache_get_size_bytes</code></strong> (Histogram)",id:"buildbuddy_cache_get_size_bytes-histogram",level:3},{value:"Labels",id:"labels-80",level:4},{value:"<code>read</code> metrics",id:"read-metrics",level:4},{value:"<strong><code>buildbuddy_cache_read_count</code></strong> (Counter)",id:"buildbuddy_cache_read_count-counter",level:3},{value:"Labels",id:"labels-81",level:4},{value:"<strong><code>buildbuddy_cache_read_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_read_duration_usec-histogram",level:3},{value:"Labels",id:"labels-82",level:4},{value:"<strong><code>buildbuddy_cache_read_size_bytes</code></strong> (Histogram)",id:"buildbuddy_cache_read_size_bytes-histogram",level:3},{value:"Labels",id:"labels-83",level:4},{value:"<code>set</code> metrics",id:"set-metrics",level:4},{value:"<strong><code>buildbuddy_cache_set_count</code></strong> (Counter)",id:"buildbuddy_cache_set_count-counter",level:3},{value:"Labels",id:"labels-84",level:4},{value:"<strong><code>buildbuddy_cache_set_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_set_duration_usec-histogram",level:3},{value:"Labels",id:"labels-85",level:4},{value:"<strong><code>buildbuddy_cache_set_size_bytes</code></strong> (Histogram)",id:"buildbuddy_cache_set_size_bytes-histogram",level:3},{value:"Labels",id:"labels-86",level:4},{value:"<strong><code>buildbuddy_cache_set_retries</code></strong> (Histogram)",id:"buildbuddy_cache_set_retries-histogram",level:3},{value:"Labels",id:"labels-87",level:4},{value:"<code>write</code> metrics",id:"write-metrics",level:4},{value:"<strong><code>buildbuddy_cache_write_count</code></strong> (Counter)",id:"buildbuddy_cache_write_count-counter",level:3},{value:"Labels",id:"labels-88",level:4},{value:"<strong><code>buildbuddy_cache_write_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_write_duration_usec-histogram",level:3},{value:"Labels",id:"labels-89",level:4},{value:"<strong><code>buildbuddy_cache_write_size_bytes</code></strong> (Histogram)",id:"buildbuddy_cache_write_size_bytes-histogram",level:3},{value:"Labels",id:"labels-90",level:4},{value:"<strong><code>buildbuddy_cache_write_retries</code></strong> (Histogram)",id:"buildbuddy_cache_write_retries-histogram",level:3},{value:"Labels",id:"labels-91",level:4},{value:"Other cache metrics",id:"other-cache-metrics",level:3},{value:"<strong><code>buildbuddy_cache_delete_count</code></strong> (Counter)",id:"buildbuddy_cache_delete_count-counter",level:3},{value:"Labels",id:"labels-92",level:4},{value:"<strong><code>buildbuddy_cache_delete_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_delete_duration_usec-histogram",level:3},{value:"Labels",id:"labels-93",level:4},{value:"<strong><code>buildbuddy_cache_contains_count</code></strong> (Counter)",id:"buildbuddy_cache_contains_count-counter",level:3},{value:"Labels",id:"labels-94",level:4},{value:"<strong><code>buildbuddy_cache_contains_duration_usec</code></strong> (Histogram)",id:"buildbuddy_cache_contains_duration_usec-histogram",level:3},{value:"Labels",id:"labels-95",level:4},{value:"<strong><code>buildbuddy_cache_contains_retry_count</code></strong> (Histogram)",id:"buildbuddy_cache_contains_retry_count-histogram",level:3},{value:"Labels",id:"labels-96",level:4},{value:"Misc metrics",id:"misc-metrics",level:3},{value:"<strong><code>buildbuddy_version</code></strong> (Gauge)",id:"buildbuddy_version-gauge",level:3},{value:"Labels",id:"labels-97",level:4},{value:"<strong><code>buildbuddy_unexpected_event</code></strong> (Counter)",id:"buildbuddy_unexpected_event-counter",level:3},{value:"Labels",id:"labels-98",level:4},{value:"<strong><code>buildbuddy_health_check_status</code></strong> (Gauge)",id:"buildbuddy_health_check_status-gauge",level:3},{value:"Labels",id:"labels-99",level:4},{value:"<strong><code>buildbuddy_quota_rpcs_handled_total_by_quota_key</code></strong> (Counter)",id:"buildbuddy_quota_rpcs_handled_total_by_quota_key-counter",level:3},{value:"Labels",id:"labels-100",level:4},{value:"<strong><code>buildbuddy_registry_blob_range_latency_usec</code></strong> (Histogram)",id:"buildbuddy_registry_blob_range_latency_usec-histogram",level:3},{value:"<strong><code>buildbuddy_clickhouse_insert_count</code></strong> (Counter)",id:"buildbuddy_clickhouse_insert_count-counter",level:3},{value:"Labels",id:"labels-101",level:4},{value:"<strong><code>buildbuddy_clickhouse_query_duration_usec</code></strong> (Histogram)",id:"buildbuddy_clickhouse_query_duration_usec-histogram",level:3},{value:"Labels",id:"labels-102",level:4},{value:"<strong><code>buildbuddy_clickhouse_error_count</code></strong> (Counter)",id:"buildbuddy_clickhouse_error_count-counter",level:3},{value:"Labels",id:"labels-103",level:4},{value:"<strong><code>buildbuddy_clickhouse_query_count</code></strong> (Counter)",id:"buildbuddy_clickhouse_query_count-counter",level:3},{value:"Labels",id:"labels-104",level:4},{value:"<strong><code>buildbuddy_compressor_bytes_compressed</code></strong> (Counter)",id:"buildbuddy_compressor_bytes_compressed-counter",level:3},{value:"Labels",id:"labels-105",level:4},{value:"<strong><code>buildbuddy_compressor_bytes_decompressed</code></strong> (Counter)",id:"buildbuddy_compressor_bytes_decompressed-counter",level:3},{value:"Labels",id:"labels-106",level:4},{value:"<strong><code>buildbuddy_pebble_compression_ratio</code></strong> (Histogram)",id:"buildbuddy_pebble_compression_ratio-histogram",level:3},{value:"Labels",id:"labels-107",level:4},{value:"<strong><code>buildbuddy_compressor_compressed_blob_size_write</code></strong> (Counter)",id:"buildbuddy_compressor_compressed_blob_size_write-counter",level:3},{value:"Labels",id:"labels-108",level:4},{value:"<strong><code>buildbuddy_compressor_decompressed_blob_size_write</code></strong> (Counter)",id:"buildbuddy_compressor_decompressed_blob_size_write-counter",level:3},{value:"Labels",id:"labels-109",level:4},{value:"Examples",id:"examples-24",level:4},{value:"<strong><code>buildbuddy_server_upload_size_bytes</code></strong> (Histogram)",id:"buildbuddy_server_upload_size_bytes-histogram",level:3},{value:"Labels",id:"labels-110",level:4},{value:"<strong><code>buildbuddy_server_uncompressed_upload_bytes_count</code></strong> (Counter)",id:"buildbuddy_server_uncompressed_upload_bytes_count-counter",level:3},{value:"Labels",id:"labels-111",level:4},{value:"<strong><code>buildbuddy_server_download_size_bytes</code></strong> (Histogram)",id:"buildbuddy_server_download_size_bytes-histogram",level:3},{value:"Labels",id:"labels-112",level:4},{value:"<strong><code>buildbuddy_server_uncompressed_download_bytes_count</code></strong> (Counter)",id:"buildbuddy_server_uncompressed_download_bytes_count-counter",level:3},{value:"Labels",id:"labels-113",level:4},{value:"<strong><code>buildbuddy_server_digest_upload_size_bytes</code></strong> (Histogram)",id:"buildbuddy_server_digest_upload_size_bytes-histogram",level:3},{value:"Labels",id:"labels-114",level:4},{value:"<strong><code>buildbuddy_server_digest_download_size_bytes</code></strong> (Histogram)",id:"buildbuddy_server_digest_download_size_bytes-histogram",level:3},{value:"Labels",id:"labels-115",level:4},{value:"<strong><code>buildbuddy_logger_log_count</code></strong> (Counter)",id:"buildbuddy_logger_log_count-counter",level:3},{value:"Labels",id:"labels-116",level:4},{value:"Raft cache metrics",id:"raft-cache-metrics",level:3},{value:"<strong><code>buildbuddy_raft_ranges</code></strong> (Gauge)",id:"buildbuddy_raft_ranges-gauge",level:3},{value:"Labels",id:"labels-117",level:4},{value:"<strong><code>buildbuddy_raft_records</code></strong> (Gauge)",id:"buildbuddy_raft_records-gauge",level:3},{value:"Labels",id:"labels-118",level:4},{value:"<strong><code>buildbuddy_raft_bytes</code></strong> (Gauge)",id:"buildbuddy_raft_bytes-gauge",level:3},{value:"Labels",id:"labels-119",level:4},{value:"<strong><code>buildbuddy_raft_proposals</code></strong> (Counter)",id:"buildbuddy_raft_proposals-counter",level:3},{value:"Labels",id:"labels-120",level:4},{value:"<strong><code>buildbuddy_raft_splits</code></strong> (Counter)",id:"buildbuddy_raft_splits-counter",level:3},{value:"Labels",id:"labels-121",level:4},{value:"<strong><code>buildbuddy_raft_moves</code></strong> (Counter)",id:"buildbuddy_raft_moves-counter",level:3},{value:"Labels",id:"labels-122",level:4},{value:"<strong><code>buildbuddy_raft_rangecache_lookups</code></strong> (Counter)",id:"buildbuddy_raft_rangecache_lookups-counter",level:3},{value:"Labels",id:"labels-123",level:4},{value:"<strong><code>buildbuddy_raft_split_duration_usec</code></strong> (Histogram)",id:"buildbuddy_raft_split_duration_usec-histogram",level:3},{value:"Labels",id:"labels-124",level:4},{value:"<strong><code>buildbuddy_raft_replica_update_duration_usec</code></strong> (Histogram)",id:"buildbuddy_raft_replica_update_duration_usec-histogram",level:3},{value:"Labels",id:"labels-125",level:4},{value:"<strong><code>buildbuddy_raft_eviction_errors</code></strong> (Counter)",id:"buildbuddy_raft_eviction_errors-counter",level:3},{value:"<strong><code>buildbuddy_raft_listener_events_dropped</code></strong> (Counter)",id:"buildbuddy_raft_listener_events_dropped-counter",level:3},{value:"Labels",id:"labels-126",level:4},{value:"<strong><code>buildbuddy_auth_api_key_lookup_count</code></strong> (Counter)",id:"buildbuddy_auth_api_key_lookup_count-counter",level:3},{value:"Labels",id:"labels-127",level:4},{value:"<strong><code>buildbuddy_auth_ip_rules_check_latency_usec</code></strong> (Histogram)",id:"buildbuddy_auth_ip_rules_check_latency_usec-histogram",level:3},{value:"Labels",id:"labels-128",level:4},{value:"<strong><code>buildbuddy_encryption_key_refresh_count</code></strong> (Counter)",id:"buildbuddy_encryption_key_refresh_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_key_refresh_failure_count</code></strong> (Counter)",id:"buildbuddy_encryption_key_refresh_failure_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_encrypted_block_count</code></strong> (Counter)",id:"buildbuddy_encryption_encrypted_block_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_encrypted_blob_count</code></strong> (Counter)",id:"buildbuddy_encryption_encrypted_blob_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_decrypted_block_count</code></strong> (Counter)",id:"buildbuddy_encryption_decrypted_block_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_decrypted_blob_count</code></strong> (Counter)",id:"buildbuddy_encryption_decrypted_blob_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_decryption_error_count</code></strong> (Counter)",id:"buildbuddy_encryption_decryption_error_count-counter",level:3},{value:"<strong><code>buildbuddy_encryption_key_last_encryption_age_msec</code></strong> (Histogram)",id:"buildbuddy_encryption_key_last_encryption_age_msec-histogram",level:3},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_atime_update_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_atime_update_count-counter",level:3},{value:"Labels",id:"labels-129",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_atime_delta_when_read</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_atime_delta_when_read-histogram",level:3},{value:"Labels",id:"labels-130",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_eviction_samples_chan_size</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_eviction_samples_chan_size-gauge",level:3},{value:"Labels",id:"labels-131",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_eviction_resample_latency_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_eviction_resample_latency_usec-histogram",level:3},{value:"Labels",id:"labels-132",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_eviction_evict_latency_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_eviction_evict_latency_usec-histogram",level:3},{value:"Labels",id:"labels-133",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter",level:3},{value:"Labels",id:"labels-134",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge",level:3},{value:"Labels",id:"labels-135",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge",level:3},{value:"Labels",id:"labels-136",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge",level:3},{value:"Labels",id:"labels-137",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge",level:3},{value:"Labels",id:"labels-138",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge",level:3},{value:"Labels",id:"labels-139",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_num_files</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge",level:3},{value:"Labels",id:"labels-140",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge",level:3},{value:"Labels",id:"labels-141",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_score</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge",level:3},{value:"Labels",id:"labels-142",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter",level:3},{value:"Labels",id:"labels-143",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter",level:3},{value:"Labels",id:"labels-144",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter",level:3},{value:"Labels",id:"labels-145",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter",level:3},{value:"Labels",id:"labels-146",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter",level:3},{value:"Labels",id:"labels-147",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter",level:3},{value:"Labels",id:"labels-148",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter",level:3},{value:"Labels",id:"labels-149",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter",level:3},{value:"Labels",id:"labels-150",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter",level:3},{value:"Labels",id:"labels-151",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter",level:3},{value:"Labels",id:"labels-152",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_op_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter",level:3},{value:"Labels",id:"labels-153",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram",level:3},{value:"Labels",id:"labels-154",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_block_cache_size_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_block_cache_size_bytes-gauge",level:3},{value:"Labels",id:"labels-155",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_write_stall_count</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_count-gauge",level:3},{value:"Labels",id:"labels-156",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_pebble_write_stall_duration_usec</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_pebble_write_stall_duration_usec-histogram",level:3},{value:"Labels",id:"labels-157",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_zombie_table_count</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_zombie_table_count-gauge",level:3},{value:"Labels",id:"labels-158",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_zombie_table_size_bytes</code></strong> (Gauge)",id:"buildbuddy_remote_cache_pebble_cache_zombie_table_size_bytes-gauge",level:3},{value:"Labels",id:"labels-159",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_groupid_sample_count</code></strong> (Counter)",id:"buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter",level:3},{value:"Labels",id:"labels-160",level:4},{value:"<strong><code>buildbuddy_remote_cache_pebble_cache_num_chunks_per_file</code></strong> (Histogram)",id:"buildbuddy_remote_cache_pebble_cache_num_chunks_per_file-histogram",level:3},{value:"Labels",id:"labels-161",level:4},{value:"Podman metrics",id:"podman-metrics",level:2},{value:"<strong><code>buildbuddy_podman_soci_store_crash_count</code></strong> (Counter)",id:"buildbuddy_podman_soci_store_crash_count-counter",level:3},{value:"<strong><code>buildbuddy_podman_get_soci_artifacts_latency_usec</code></strong> (Histogram)",id:"buildbuddy_podman_get_soci_artifacts_latency_usec-histogram",level:3},{value:"Labels",id:"labels-162",level:4},{value:"<strong><code>buildbuddy_podman_get_soci_artifacts_outcome</code></strong> (Counter)",id:"buildbuddy_podman_get_soci_artifacts_outcome-counter",level:3},{value:"Labels",id:"labels-163",level:4},{value:"<strong><code>buildbuddy_podman_image_pull_latency_msec</code></strong> (Histogram)",id:"buildbuddy_podman_image_pull_latency_msec-histogram",level:3},{value:"Labels",id:"labels-164",level:4},{value:"Cache Proxy metrics",id:"cache-proxy-metrics",level:2},{value:"<strong><code>buildbuddy_proxy_byte_stream_reads</code></strong> (Counter)",id:"buildbuddy_proxy_byte_stream_reads-counter",level:3},{value:"Labels",id:"labels-165",level:4},{value:"<strong><code>buildbuddy_proxy_content_addressable_storage_reads</code></strong> (Counter)",id:"buildbuddy_proxy_content_addressable_storage_reads-counter",level:3},{value:"Labels",id:"labels-166",level:4},{value:"<strong><code>buildbuddy_proxy_content_addressable_storage_digest_reads</code></strong> (Counter)",id:"buildbuddy_proxy_content_addressable_storage_digest_reads-counter",level:3},{value:"Labels",id:"labels-167",level:4},{value:"Cache Proxy Remote Atime Update Metrics",id:"cache-proxy-remote-atime-update-metrics",level:2},{value:"<strong><code>buildbuddy_proxy_remote_atime_updates</code></strong> (Counter)",id:"buildbuddy_proxy_remote_atime_updates-counter",level:3},{value:"Labels",id:"labels-168",level:4},{value:"<strong><code>buildbuddy_proxy_remote_atime_update_requests</code></strong> (Counter)",id:"buildbuddy_proxy_remote_atime_update_requests-counter",level:3},{value:"Labels",id:"labels-169",level:4}];function _(e){const s={a:"a",code:"code",p:"p",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["BuildBuddy exposes ",(0,n.jsx)(s.a,{href:"https://prometheus.io",children:"Prometheus"})," metrics that allow monitoring the\n",(0,n.jsx)(s.a,{href:"https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/",children:"four golden signals"}),":\nlatency, traffic, errors, and saturation."]}),"\n",(0,n.jsxs)(s.p,{children:["Prometheus metrics are exposed under the path ",(0,n.jsx)(s.code,{children:"metrics/"})," on port ",(0,n.jsx)(s.code,{children:"9090"})," by default."]}),"\n",(0,n.jsxs)(s.p,{children:["To view these metrics in a live-updating dashboard, we recommend using a tool\nlike ",(0,n.jsx)(s.a,{href:"https://grafana.com",children:"Grafana"}),"."]}),"\n",(0,n.jsx)(i,{})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(_,{...e})}):_(e)}},28453:(e,s,d)=>{d.d(s,{R:()=>i,x:()=>c});var n=d(96540);const l={},r=n.createContext(l);function i(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);