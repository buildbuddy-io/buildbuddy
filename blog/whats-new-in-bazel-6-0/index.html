<!doctype html>
<html lang="en" dir="ltr" class="plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">What&#x27;s New in Bazel 6.0 | BuildBuddy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.buildbuddy.io/blog/whats-new-in-bazel-6-0"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="og:description" content="BuildBuddy provides enterprise features for Bazel â€” the open source build system that allows you to build and test software 10x faster."><meta data-rh="true" property="og:title" content="What&#x27;s New in Bazel 6.0 | BuildBuddy"><meta data-rh="true" name="description" content="We reviewed over 3,100 commits and summarized them, again ðŸ˜…, so you don&#x27;t have to!"><meta data-rh="true" property="og:description" content="We reviewed over 3,100 commits and summarized them, again ðŸ˜…, so you don&#x27;t have to!"><meta data-rh="true" property="og:image" content="https://www.buildbuddy.io/img/bazel_6_0.png"><meta data-rh="true" name="twitter:image" content="https://www.buildbuddy.io/img/bazel_6_0.png"><link data-rh="true" rel="icon" href="/img/favicon_black.svg"><link data-rh="true" rel="canonical" href="https://www.buildbuddy.io/blog/whats-new-in-bazel-6-0"><link data-rh="true" rel="alternate" href="https://www.buildbuddy.io/blog/whats-new-in-bazel-6-0" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.buildbuddy.io/blog/whats-new-in-bazel-6-0" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BuildBuddy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BuildBuddy Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-156160991-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.baaf98df.css">
<link rel="preload" href="/assets/js/runtime~main.a4b93f7b.js" as="script">
<link rel="preload" href="/assets/js/main.e4323cb3.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32px" width="191px"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32px" width="191px"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/features">Features</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ui">Build &amp; Test UI</a></li><li><a class="dropdown__link" href="/remote-execution">Remote Execution</a></li><li><a class="dropdown__link" href="/remote-cache">Remote Cache</a></li><li><a class="dropdown__link" href="/workflows">Workflows</a></li><li><a class="dropdown__link" href="/cli">BuildBuddy CLI</a></li><li><a class="dropdown__link" href="/plugins">Plugin Library</a></li></ul></div><a class="navbar__item navbar__link" target="_self" href="/pricing">Pricing</a><a href="https://github.com/buildbuddy-io/buildbuddy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/introduction/">Docs</a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link sign-up">Get Started<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--1"></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_TjLu">What&#x27;s New in Bazel 6.0</h1><div class="margin-vert--md"><div class="heading_cWLF"><div class="headingPhoto_YUAj"><a href="https://brentleyjones.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo undefined"><img src="https://avatars.githubusercontent.com/u/158658?v=4" alt="Brentley Jones"></a></div><div><span><a href="https://brentleyjones.com" target="_blank" rel="noopener noreferrer" class="authorName_Xags">Brentley Jones</a>, <span>Developer Evangelist @ BuildBuddy</span></span><time datetime="2022-12-19T09:00:00.000Z" class="blogPostDate_NeIP"><br>December 19, 2022<!-- --> <!-- --> Â· <!-- -->20 min read</time></div></div></div></header><div class="markdown"><p><a href="https://blog.bazel.build/2022/12/19/bazel-6.0.html" target="_blank" rel="noopener noreferrer">Bazel 6.0</a> includes <a href="https://github.com/bazelbuild/bazel/compare/5.4.0...6.0.0" target="_blank" rel="noopener noreferrer">over 3,100 changes</a> since 5.4.
It&#x27;s the latest major release,
following the release of 5.0 in January of this year,
and it&#x27;s Bazel&#x27;s <a href="https://bazel.build/versions/6.0.0/release/versioning#lts-releases" target="_blank" rel="noopener noreferrer">third LTS release</a>.
Since there were so many changes,
many of them quite impactful,
I felt I needed to review them all and provide a nice summary for y&#x27;all.</p><p>Similar to <a href="/blog/whats-new-in-bazel-5-0">Bazel 5.0&#x27;s changes</a>,
the end result was quite big,
so I&#x27;ve included a table of contents to allow easy navigation to the changes that interest you the most:</p><nav class="toc"><ul><li><a href="#command-line-flag-changes">Command-line flag changes</a><ul><li><a href="#renamed">Renamed</a></li><li><a href="#default-values-changed">Default values changed</a></li><li><a href="#deprecated">Deprecated</a></li><li><a href="#no-op">No-op</a></li><li><a href="#removed">Removed</a></li></ul></li><li><a href="#remote">Remote</a><ul><li><a href="#remote-caching-rbc">Remote caching (RBC)</a></li><li><a href="#remote-execution-rbe">Remote execution (RBE)</a></li><li><a href="#dynamic-execution">Dynamic execution</a></li><li><a href="#local-execution">Local execution</a></li><li><a href="#build-event-service-bes">Build Event Service (BES)</a></li></ul></li><li><a href="#logging">Logging</a><ul><li><a href="#build-event-protocol-bep">Build Event Protocol (BEP)</a></li><li><a href="#timing-profile">Timing profile</a></li><li><a href="#execution-log">Execution log</a></li></ul></li><li><a href="#query">Query</a><ul><li><a href="#cquery">cquery</a></li><li><a href="#aquery">aquery</a></li></ul></li><li><a href="#dependency-management">Dependency management</a></li><li><a href="#platforms-and-toolchains">Platforms and toolchains</a></li><li><a href="#execution-platforms">Execution platforms</a><ul><li><a href="#linux">Linux</a></li><li><a href="#macos">macOS</a></li></ul></li><li><a href="#target-platforms">Target platforms</a><ul><li><a href="#android">Android</a></li><li><a href="#apple">Apple</a></li></ul></li><li><a href="#languages">Languages</a><ul><li><a href="#c-and-c%2B%2B">C and C++</a></li><li><a href="#java">Java</a></li><li><a href="#objective-c">Objective-C</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#rules-authoring">Rules authoring</a><ul><li><a href="#aspects">Aspects</a></li><li><a href="#persistent-workers">Persistent workers</a></li><li><a href="#starlark">Starlark</a></li></ul></li><li><a href="#misc">Misc</a></li></ul></nav><h2 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-flag-changes">Command-Line Flag Changes<a href="#command-line-flag-changes" class="hash-link" aria-label="Direct link to Command-Line Flag Changes" title="Direct link to Command-Line Flag Changes">â€‹</a></h2><p>Bazel&#x27;s <a href="https://bazel.build/versions/6.0.0/release/versioning#lts-releases" target="_blank" rel="noopener noreferrer">LTS strategy</a> allows for breaking changes between major versions.
In particular,
it allows for command-line flags to be removed,
renamed,
made to do nothing,
or have their default values changed.
In the following sections I collected all such flag changes I could find.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="renamed">Renamed<a href="#renamed" class="hash-link" aria-label="Direct link to Renamed" title="Direct link to Renamed">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/36afffa04151d9243051f83897c88257ab4d1026" target="_blank" rel="noopener noreferrer"><code>--experimental_build_transitive_python_runfiles</code> is now <code>--incompatible_build_transitive_python_runfiles</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e38c73f8ecc327d54e0409892468ad1bec6e4a49" target="_blank" rel="noopener noreferrer"><code>--experimental_debug_spawn_scheduler</code> is now <code>--debug_spawn_scheduler</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e38c73f8ecc327d54e0409892468ad1bec6e4a49" target="_blank" rel="noopener noreferrer"><code>--experimental_desugar_java8_libs</code> is now <code>--desugar_java8_libs</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f106d5c1dc4d84e119537dda3d68bc2dd83e2077" target="_blank" rel="noopener noreferrer"><code>--experimental_enable_bzlmod</code> is now <code>--enable_bzlmod</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e38c73f8ecc327d54e0409892468ad1bec6e4a49" target="_blank" rel="noopener noreferrer"><code>--experimental_local_execution_delay</code> is now <code>--dynamic_local_execution_delay</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e38c73f8ecc327d54e0409892468ad1bec6e4a49" target="_blank" rel="noopener noreferrer"><code>--experimental_worker_max_multiplex_instances</code> is now <code>--worker_max_multiplex_instances</code>.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-values-changed">Default Values Changed<a href="#default-values-changed" class="hash-link" aria-label="Direct link to Default Values Changed" title="Direct link to Default Values Changed">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/21dfe4cdc35ed0b3536accdc91be042aa5c550aa" target="_blank" rel="noopener noreferrer"><code>--analysis_testing_deps_limit=1000</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3d5c5d746b286c840ba5cfd437d93d8d11995e02" target="_blank" rel="noopener noreferrer"><code>--experimental_allow_unresolved_symlinks=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/60523c7fecd4e72490c2dde547e1e36eab5a79ef" target="_blank" rel="noopener noreferrer"><code>--experimental_keep_config_nodes_on_analysis_discard=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/60523c7fecd4e72490c2dde547e1e36eab5a79ef" target="_blank" rel="noopener noreferrer"><code>--experimental_collect_local_sandbox_action_metrics=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ce55639c3ef2b9bd703d64026c40df0b7485b6a5" target="_blank" rel="noopener noreferrer"><code>--experimental_incremental_dexing_after_proguard=50</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ce55639c3ef2b9bd703d64026c40df0b7485b6a5" target="_blank" rel="noopener noreferrer"><code>--experimental_incremental_dexing_after_proguard_by_default=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d44f11be11f3ec12d644eb5f5245bf70c6a65bee" target="_blank" rel="noopener noreferrer"><code>--experimental_inmemory_dotd_files=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/822e049d2881a1c7bedc9182116f772a72e00227" target="_blank" rel="noopener noreferrer"><code>--experimental_inmemory_jdeps_files=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2f9f8429be9651d4bb94b425b6ae5f11e95bea16" target="_blank" rel="noopener noreferrer"><code>--experimental_keep_config_nodes_on_analysis_discard=false</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ce55639c3ef2b9bd703d64026c40df0b7485b6a5" target="_blank" rel="noopener noreferrer"><code>--experimental_use_dex_splitter_for_incremental_dexing=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0caf488a7492740425af88b32c622fdc33bc1593" target="_blank" rel="noopener noreferrer"><code>--incompatible_always_include_files_in_data=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/aad2db20b5" target="_blank" rel="noopener noreferrer"><code>--incompatible_enforce_config_setting_visibility=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/74b7dd55325d6588f1a8827dd3bdb30deea073a0" target="_blank" rel="noopener noreferrer"><code>--incompatible_existing_rules_immutable_view=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4c56431c271850f7536aae0a0719f811e3c35b5b" target="_blank" rel="noopener noreferrer"><code>--incompatible_remote_results_ignore_disk=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f137e640303486b52e39b4d4edee088f895b6b00" target="_blank" rel="noopener noreferrer"><code>--incompatible_use_platforms_repo_for_constraints=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/6452024a0106ab901f38027db65e8ab831201288" target="_blank" rel="noopener noreferrer"><code>--use_top_level_targets_for_symlinks=true</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0c3f5280e0746b9cbf222b426d3885658e525b0b" target="_blank" rel="noopener noreferrer"><code>--use_workers_with_dexbuilder=true</code></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated">Deprecated<a href="#deprecated" class="hash-link" aria-label="Direct link to Deprecated" title="Direct link to Deprecated">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/16f2eecc3c2406d9de0cfc11f8187cb68df12b51" target="_blank" rel="noopener noreferrer"><code>--allowed_local_actions_regex</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/da6f8026967e2338973306c9d85ae6cf23244ecb" target="_blank" rel="noopener noreferrer"><code>--experimental_spawn_scheduler</code></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-op">No-op<a href="#no-op" class="hash-link" aria-label="Direct link to No-op" title="Direct link to No-op">â€‹</a></h3><p>These flags now do nothing, but still exist to allow for migration off of them:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/78d0fc9ff1d2f22005ddfce43384e35fbac338cb" target="_blank" rel="noopener noreferrer"><code>--distinct_host_configuration</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/db64e7e54b7f17e86a3206b4834f0fd11c065155" target="_blank" rel="noopener noreferrer"><code>--dynamic_worker_strategy</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/bccbcbf9767ebd081df464db78c582d25173115b" target="_blank" rel="noopener noreferrer"><code>--experimental_allow_top_level_aspects_parameters</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/db64e7e54b7f17e86a3206b4834f0fd11c065155" target="_blank" rel="noopener noreferrer"><code>--experimental_dynamic_skip_first_build</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/75bb463ab73f5f7cc60e7cc445ba24b377f4963f" target="_blank" rel="noopener noreferrer"><code>--experimental_keep_config_nodes_on_analysis_discard</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/85bfefedeef20063fb6d17a73d9ee18a028414f7" target="_blank" rel="noopener noreferrer"><code>--experimental_multi_cpu</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f22e63deef43141f08b63cc0210fc9b9e2fded1d" target="_blank" rel="noopener noreferrer"><code>--experimental_skyframe_prepare_analysis</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cbf8159ba6190ab447ad54df63cb4db25763d755" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_managed_directories</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0aa750b7252ef8c71e11ae2f6cf6849b6ff0e715" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_third_party_license_checking</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f068b31c94eef1ea10477a755d9173b4fadf6485" target="_blank" rel="noopener noreferrer"><code>--incompatible_disallow_legacy_py_provider</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2d5375c27a4ca43635183bbe0d12849c64a6176e" target="_blank" rel="noopener noreferrer"><code>--incompatible_override_toolchain_transition</code></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed">Removed<a href="#removed" class="hash-link" aria-label="Direct link to Removed" title="Direct link to Removed">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--all_incompatible_changes</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--analysis_warnings_as_errors</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ed7a0565f02b496bc4fc613157111638e8dd997f" target="_blank" rel="noopener noreferrer"><code>--default_android_platform</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c887c2a4fe4395f9663ce2f1cde9b656d216415c" target="_blank" rel="noopener noreferrer"><code>--experimental_delay_virtual_input_materialization</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--experimental_enable_cc_toolchain_config_info</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/361ce673ad2b959b73e859a121ff2e996feb561b" target="_blank" rel="noopener noreferrer"><code>--experimental_local_memory_estimate</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1f33504af3ebe3a43aa91e607e94edc07b1807f8" target="_blank" rel="noopener noreferrer"><code>--experimental_persistent_test_runner</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--experimental_profile_cpu_usage</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--experimental_required_aspects</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--experimental_shadowed_action</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--experimental_skyframe_eval_with_ordered_list</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/09df7c0a14b9bf13d4aa18f5a02b4651e626d5f4" target="_blank" rel="noopener noreferrer"><code>--experimental_worker_allow_json_protocol</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ab51d2e45378d6ec23bce8b5b40d632364d77dbb" target="_blank" rel="noopener noreferrer"><code>--extra_proguard_specs</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9cb551c0e540090679448460ee19b04b0f281f1d" target="_blank" rel="noopener noreferrer"><code>--forceJumbo</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/29e4aee112e8649c93577ec225c7ed9fdedd76a2" target="_blank" rel="noopener noreferrer"><code>--incompatible_applicable_licenses</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/bf30d81caf907e0fa58e71b63924d81a1271c40a" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_depset_items</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_late_bound_option_defaults</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_legacy_proto_provider</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--incompatible_disable_proto_source_root</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--incompatible_do_not_emit_buggy_external_repo_import</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/01a46f05dc79db2313c6c8e174a5d6eab474aefc" target="_blank" rel="noopener noreferrer"><code>--incompatible_enable_exports_provider</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/34ce6a23f5a2be58bb59661dd5fc9ab586ea1703" target="_blank" rel="noopener noreferrer"><code>--incompatible_linkopts_to_linklibs</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/6b6c63ed9fb5d51a90b91dca4bed5a68955a6859" target="_blank" rel="noopener noreferrer"><code>--incompatible_proto_output_v2</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--incompatible_use_native_patch</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/684fb0a576827d4f5c7311f3ac13b59d0786ea04" target="_blank" rel="noopener noreferrer"><code>--ios_cpu</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--json_trace_compression</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/96c8a9073807c9e97635ddafe2ed0365a9318d6f" target="_blank" rel="noopener noreferrer"><code>--master_bazelrc</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e846207dc2495e39fd178218b29bab3b4a8cd1d1" target="_blank" rel="noopener noreferrer"><code>--max-bytes-wasted-per-file</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/63ddfc468d5b8a5c5f4ead28997dd4412fbfbb76" target="_blank" rel="noopener noreferrer"><code>--minimal-main-dex</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4f557e8af473d26a55265ada7c4c950b7bef9b35" target="_blank" rel="noopener noreferrer"><code>--remote_allow_symlink_upload</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e846207dc2495e39fd178218b29bab3b4a8cd1d1" target="_blank" rel="noopener noreferrer"><code>--set-max-idx-number</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2e48994ab8202796324df3c93ff9441a44b5ba4d" target="_blank" rel="noopener noreferrer"><code>--show_task_finish</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8e6c469106261c765e929532ee7d71fee71c7abc" target="_blank" rel="noopener noreferrer"><code>--ui</code></a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remote">Remote<a href="#remote" class="hash-link" aria-label="Direct link to Remote" title="Direct link to Remote">â€‹</a></h2><p>One of Bazel&#x27;s most powerful features is its ability to use <a href="/blog/bazels-remote-caching-and-remote-execution-explained">remote caching and remote execution</a>.
Numerous improvements and fixes to Bazel&#x27;s remote capabilities are included in Bazel 6.0.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-caching-rbc">Remote caching (RBC)<a href="#remote-caching-rbc" class="hash-link" aria-label="Direct link to Remote caching (RBC)" title="Direct link to Remote caching (RBC)">â€‹</a></h3><p>Using a remote cache is one of the most popular ways of speeding up a Bazel build.
Thankfully these changes make using a remote cache both more performant and more reliable:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/7b141c1edf243acae5859f56cd0afff2d3eaba32" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_remote_downloader_local_fallback</code> flag, which causes the remote downloader to fallback to normal fetching.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b750f8c0242d7fcb581d368d8b75e59c51c13a61" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_remote_downloader_send_all_headers</code> flag, which causes all values of a multi-value header to be sent with Remote Downloader.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e5f92a40338ffe0f50f817ee1b2b6e3557d380e2" target="_blank" rel="noopener noreferrer">The <code>--experimental_action_cache_store_output_metadata</code> flag is now enabled by default when using the <code>--remote_download_*</code> flags.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e01e7f51dd19f39ce3bc0718cec20ed6474de733" target="_blank" rel="noopener noreferrer">Outputs downloaded with <code>--experimental_remote_download_regex</code> no longer block spawn execution.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/bb8e6eca7a8698b2bb8216160038a36e55e69da7" target="_blank" rel="noopener noreferrer"><code>--experimental_remote_download_regex</code> now matches on execution root relative paths.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b6f3111d8e460de35a5e5570bd784919fc30c5f8" target="_blank" rel="noopener noreferrer">Top-level outputs are now always downloaded when using <code>--remote_download_toplevel</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/845077fff18432e6b2a1a089964e1afc9b9fec7f" target="_blank" rel="noopener noreferrer"><code>bazel run</code> now works with <code>--remote_download_minimal</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/21b0992eb26e91ad3e6d3046fa90f1f7ad8b9f08" target="_blank" rel="noopener noreferrer">When using Build without the Bytes, AC results in the disk cache are now validated to be complete.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b303cd128d9f1d913749927f4a1cd942b10b1ae2" target="_blank" rel="noopener noreferrer">Outputs and stdErr are now always downloaded.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/32b0f5a258ee83b040d6975a6bd0795670f5cd47" target="_blank" rel="noopener noreferrer">Symlinked targets are no longer unnecessarily downloaded.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/05b97393ff7604f237d9d31bd63714f27fbe83f2" target="_blank" rel="noopener noreferrer">Downloads now use a priority system to improve critical path performance.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/aaf65b97b7cd75160b4b4dcc9149fb9fc60e1759" target="_blank" rel="noopener noreferrer">HTTP remote caches now support client TLS authentication.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7aa69a968b9063cb080417426a11bb32954f7f6c" target="_blank" rel="noopener noreferrer">Headers are no longer included in <code>FetchBlobRequest</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f589512846c5762e89757b96835ee54da4bb2281" target="_blank" rel="noopener noreferrer">AC uploads will no longer error if <code>--remote_upload_local_results=true</code> and <code>GetCapabilities</code> returns <code>update_enabled=false</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8b61746cf18d3d8413b569e0b5fca639d28914ea" target="_blank" rel="noopener noreferrer">Fixed hanging when failing to upload action inputs.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-execution-rbe">Remote execution (RBE)<a href="#remote-execution-rbe" class="hash-link" aria-label="Direct link to Remote execution (RBE)" title="Direct link to Remote execution (RBE)">â€‹</a></h3><p>For some projects,
using remote execution is the ultimate performance unlock for their Bazel builds.
In addition to the remote caching changes covered above,
which also apply to remote execution,
the following changes improve the remote execution experience:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/72b481a8e9c19de1acf323c69d2d822c954a6dbb" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_remote_mark_tool_inputs</code> flag, which marks tool inputs for remote executors, which in turn allows them to implement remote persistent workers.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5b46a48db8b380ba9afe2df2cb7d564b0c927913" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_remote_dangling_symlinks</code> flag, which allows symlinks in action outputs to dangle.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8b57c5810f2cc58f71995be83604d47226cf9244" target="_blank" rel="noopener noreferrer">Added the <code>--remote_print_execution_messages</code> flag, which allows control over when to print remote execution messages.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8936828610db8106864e41860ad86c5c415fa0ed" target="_blank" rel="noopener noreferrer">Added the <code>exclusive-if-local</code> tag, for disabling parallel local test execution but allowing remote execution if requested.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ca95fecde07a28736ea815ec64bcd639a234d79c" target="_blank" rel="noopener noreferrer">Added support for remotely generating unresolved symlinks.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c55b01e3e4c535738f9aebbb4d1ba0623235aee0" target="_blank" rel="noopener noreferrer">Fixed formatting of non-ASCII text.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-execution">Dynamic execution<a href="#dynamic-execution" class="hash-link" aria-label="Direct link to Dynamic execution" title="Direct link to Dynamic execution">â€‹</a></h3><p><a href="https://bazel.build/versions/6.0.0/remote/dynamic" target="_blank" rel="noopener noreferrer">Dynamic execution</a> allows for Bazel to race remote and local execution of actions,
potentially allowing you to get the benefit of both modes,
without the drawbacks of either.
Bazel 6.0 included a number of changes to dynamic execution,
almost all of them behind new experimental flags:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/9a52a270132250b11523db055e13e69791aecba1" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_dynamic_exclude_tools</code> flag, which prevents dynamic execution for tools.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d5c4f551fa9f5981b36ab67c69386e3787d06f0c" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_dynamic_local_load_factor</code> flag, which controls how much load from dynamic execution to put on the local machine.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/88f605c689881f50e8ec310f43878e411936f23c" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_dynamic_slow_remote_time</code> flag, which starts locally scheduling actions above a certain age in dynamic scheduling.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8fa3ccbb072236a8d0a4937e9e4a0ced58268c25" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_prioritize_local_actions</code> flag, which prioritizes local-only actions over dynamically executed actions for local resources.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-execution">Local execution<a href="#local-execution" class="hash-link" aria-label="Direct link to Local execution" title="Direct link to Local execution">â€‹</a></h3><p>In <code>buck2</code>,
<a href="https://github.com/facebookincubator/buck2/blob/2116ae1d48d63109d72cb7100cb99ad8d20bc873/docs/why.md#why-might-it-be-interesting" target="_blank" rel="noopener noreferrer">local execution is a specialization of remote execution</a>.
So I&#x27;m going to use that as the reason that this section is listed under the &quot;Remote&quot; section,
and not because I don&#x27;t want to reorganize this post just to fit in a couple neat local execution changes ðŸ˜‰:</p><ul><li><a href="https://youtu.be/IEJLHNNRP9U" target="_blank" rel="noopener noreferrer">Announced at BazelCon</a>, SkyMeld allows merging the analysis and execution phases with the the <a href="https://github.com/bazelbuild/bazel/issues/14057" target="_blank" rel="noopener noreferrer"><code>--experimental_merged_skyframe_analysis_execution</code> and <code>--experimental_skymeld_ui</code> flags</a>.</li><li><a href="https://github.com/bazelbuild/bazel/commit/17276d4fade793955a6f2491e3527c2be184867a" target="_blank" rel="noopener noreferrer">Local actions now fetch inputs before acquiring the resource lock.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-event-service-bes">Build Event Service (BES)<a href="#build-event-service-bes" class="hash-link" aria-label="Direct link to Build Event Service (BES)" title="Direct link to Build Event Service (BES)">â€‹</a></h3><p>Using a build event service can give you unparalleled insight into your Bazel builds at scale.
There were some nice changes to BES support,
though I think the improvements to how it interacts with the remote cache are especially noteworthy.</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/46104c6948dc4ca66797e413c62b58bd21981c51" target="_blank" rel="noopener noreferrer">Added the <code>--bep_maximum_open_remote_upload_files</code> flag, which allows control over the maximum number of open files allowed during BEP artifact upload.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/14b5c41c29423866cd3f2ee3f7b69ff48241bd34" target="_blank" rel="noopener noreferrer">Added the <code>--bes_check_preceding_lifecycle_events</code> flag, which tells BES to check whether it previously received <code>InvocationAttemptStarted</code> and <code>BuildEnqueued</code> events matching the current tool event.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e7218d556a2a265183a10a19fcaa21c0277820ad" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_build_event_upload_max_retries</code> and <code>--experimental_build_event_upload_retry_minimum_delay</code> flags, which allow for configuring the behavior of BES uploader retires.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/6b5277294bfcf032d1d2d009c102147af12ec896" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_remote_build_event_upload</code> flag, which controls the way Bazel uploads files referenced in BEP to remote caches.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/dbcf260e0318ef553d606b0510832cfe8a5b14eb" target="_blank" rel="noopener noreferrer">BES RPC calls now include request metadata.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging">â€‹</a></h2><p>Bazel offers various methods to gain insight into your build.
I cover some of the notable changes to those methods below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-event-protocol-bep">Build Event Protocol (BEP)<a href="#build-event-protocol-bep" class="hash-link" aria-label="Direct link to Build Event Protocol (BEP)" title="Direct link to Build Event Protocol (BEP)">â€‹</a></h3><p>The build event protocol is used by <a href="#build-event-service-(bes)">build event services</a>,
so all of these changes could have also been listed in that section as well.
The BEP can also be collected locally with <a href="https://bazel.build/versions/6.0.0/reference/command-line-reference#flag--build_event_json_file" target="_blank" rel="noopener noreferrer"><code>--build_event_json_file</code></a> and <a href="https://bazel.build/versions/6.0.0/reference/command-line-reference#flag--build_event_binary_file" target="_blank" rel="noopener noreferrer"><code>--build_event_binary_file</code></a>.</p><p>The vast majority of changes added additional information to the BEP,
though some are fixes and improvements:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/da6d9499d61ed4fb14a0bbbf456d5e9381c328ee" target="_blank" rel="noopener noreferrer">Added the <code>digest</code> and <code>length</code> fields to <code>File</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9bc9096241fb414303cafecd36a993f45117f3e1" target="_blank" rel="noopener noreferrer">Added the <code>BuildMetrics.network_metrics</code> field.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/a9ac2b6162234c4c1d0db37a6d7b783763d0f79f" target="_blank" rel="noopener noreferrer">Added the <code>MemoryMetrics.peak_post_gc_tenured_space_heap_size</code> field.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d233c896fd6eff93901f7dd8641936a76b544ccb" target="_blank" rel="noopener noreferrer">Added the <code>WorkerMetrics.last_action_start_time_in_ms</code> field.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d8c25fcced761cb139e560076d24d9f179055548" target="_blank" rel="noopener noreferrer">Changed the semantics of <code>build_event_stream.BuildMetrics.PackageMetrics.packages_loaded</code> to be the number of packages successfully loaded.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/286fb80081db0af43b1f86292ce417c6541d4ad4" target="_blank" rel="noopener noreferrer">Deprecated <code>AnomalyReport</code>.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timing-profile">Timing profile<a href="#timing-profile" class="hash-link" aria-label="Direct link to Timing profile" title="Direct link to Timing profile">â€‹</a></h3><p>The action timing profile,
which is enabled by default with <a href="https://bazel.build/versions/6.0.0/reference/command-line-reference#flag--profile" target="_blank" rel="noopener noreferrer"><code>--profile</code></a>,
is viewable both <a href="https://bazel.build/versions/6.0.0/rules/performance#performance-profiling" target="_blank" rel="noopener noreferrer">locally in Chrome</a> and on <a href="#build-event-service-(bes)">build event services</a>.
These changes add more detail and clarity to the profile:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/e78fd2e5f4cfc4029d4725d764eca0b1abff164b" target="_blank" rel="noopener noreferrer">Added action mnemonics.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b4dbed0c599862cc3886fc644cda95d0a38b4f70" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_collect_load_average_in_profiler</code> flag, which adds the system&#x27;s overall load average.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e382cb2fd7b02e557a513f93a58eafd42ab234b0" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_collect_system_network_usage</code> flag, which adds system network usage.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/be5354b4b4a27d34badbce0c6540b879c84fd865" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_collect_worker_data_in_profiler</code> flag, which adds worker memory usage.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3d2bb2a400c48bc51e43db11ac154d999a97881b" target="_blank" rel="noopener noreferrer">Improved reporting of critical path components.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/081f831e3c86b4a4c6d6107b29c4883581b94aee" target="_blank" rel="noopener noreferrer">Made the <code>sort_index</code> value always a string.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execution-log">Execution log<a href="#execution-log" class="hash-link" aria-label="Direct link to Execution log" title="Direct link to Execution log">â€‹</a></h3><p>Bazel logs all of the <a href="/blog/bazels-remote-caching-and-remote-execution-explained#spawns">spawns</a> it executes in the execution log,
which is enabled with the <a href="https://bazel.build/versions/6.0.0/reference/command-line-reference#flag--execution_log_json_file" target="_blank" rel="noopener noreferrer"><code>--execution_log_json_file</code></a> or <a href="https://bazel.build/versions/6.0.0reference/command-line-reference#flag--execution_log_binary_file" target="_blank" rel="noopener noreferrer"><code>--execution_log_binary_file</code></a> flags.
This feature is relatively stable,
with just a few noticeable additions:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/b4b8b2614ae854651075506666f109d0fc508ad1" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_execution_log_spawn_metrics</code> flag, which causes spawn metrics in be included in the execution log.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b2cbc9a17c90f9ddeb88eca4756cb2fc764abebe" target="_blank" rel="noopener noreferrer">Added the <code>SpawnExec.digest</code> field.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9f908cada13c9015f267f368f263c361df812983" target="_blank" rel="noopener noreferrer">Added the <code>SpawnExec.target_label</code> field.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="query">Query<a href="#query" class="hash-link" aria-label="Direct link to Query" title="Direct link to Query">â€‹</a></h2><p><code>bazel build</code> wasn&#x27;t the only command to get improvements in this release.
Here are some changes that were made to the <code>query</code> family of commands:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/1473988aa1e9b92c42fcbad4e155f247f1983d13" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_package_group_includes_double_slash</code> flag, which removes the leading <code>//</code> from <code>package_group.package</code> output.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cc71db2a465716ba175d3defaa6032107bf1dd90" target="_blank" rel="noopener noreferrer">Added an optional second argument to the <code>some</code> operator, specifying number of nodes returned.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/47b1cad5a6026c220002d56ae3c25e5c20d0cef7" target="_blank" rel="noopener noreferrer">Labels are decanonicalized if possible.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cquery"><code>cquery</code><a href="#cquery" class="hash-link" aria-label="Direct link to cquery" title="Direct link to cquery">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/73b22b6485de339794bf623e592f2595692c10af" target="_blank" rel="noopener noreferrer">Added support for queries over incompatible targets.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d69346575a7a2f791e61d181ca59aae6354236f9" target="_blank" rel="noopener noreferrer">Added <code>struct</code>, <code>json</code>, <code>proto</code>, and <code>depset</code> to <code>--output=starlark</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9994c3277607a3b7bd452512e1ff6e5ba73bbc4a" target="_blank" rel="noopener noreferrer">Added <code>ConfiguredRuleInput</code> when using <code>--transitions</code>, which reports the configuration dependencies are configured in.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/29d46eb41a413430498ab033f84a8d960edfb6fb" target="_blank" rel="noopener noreferrer">Added more information about configurations to proto output.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fb92e2da3c75db0ac3c119d137119d38c4858009" target="_blank" rel="noopener noreferrer">Added the <code>Configuration.is_tool</code> attribute to proto output.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ac48e65f702d3e135bb0b6729392f9cb485da100" target="_blank" rel="noopener noreferrer">Complete configurations are now included in proto output.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ca8674cc4879ed1846bf015c33fe7d920a3f66ab" target="_blank" rel="noopener noreferrer"><code>--output=files</code> now also outputs source files.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5de9888f1f28837d0e801f7a4bbbf6f5d6481012" target="_blank" rel="noopener noreferrer">Starlark transitions now report source code location.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/46a36d683801604e92b8b38f74a1388a973fd543" target="_blank" rel="noopener noreferrer">Updated <code>AnalysisProtosV2</code>.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aquery"><code>aquery</code><a href="#aquery" class="hash-link" aria-label="Direct link to aquery" title="Direct link to aquery">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/6d73b9619026c536bb9e64f69b515d015b18bf67" target="_blank" rel="noopener noreferrer">Added the <code>--include_file_write_contents</code> flag, which includes file contents for the <code>FileWrite</code> action.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fb92e2da3c75db0ac3c119d137119d38c4858009" target="_blank" rel="noopener noreferrer">Added the <code>Configuration.is_tool</code> attribute to the proto output.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c55b01e3e4c535738f9aebbb4d1ba0623235aee0" target="_blank" rel="noopener noreferrer">Fixed formatting of non-ASCII text.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ec1ac2f272716a25f9909d61bddb5cfe82756a7b" target="_blank" rel="noopener noreferrer">Fixed non-deterministic sorting of execution requirements.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-management">Dependency management<a href="#dependency-management" class="hash-link" aria-label="Direct link to Dependency management" title="Direct link to Dependency management">â€‹</a></h2><p>A new dependency system named <a href="https://bazel.build/versions/6.0.0/build/bzlmod" target="_blank" rel="noopener noreferrer">Bzlmod</a> was added in Bazel 5.0,
and made non-experimental in Bazel 6.0.
Besides all of the changes needed to support Bzlmod,
these were some other notable dependency management related changes:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/123da96ef501457193f6ff52f42522249f5e3737" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_check_external_repository_files</code> flag, which allows disabling checking for modifications to files in external repositories.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f5a899fbbeb34cbd13ec6293ef722344f20d6714" target="_blank" rel="noopener noreferrer">Added the <code>build_file</code> and <code>build_file_content</code> attributes to <code>git_repository</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/87c8b09061eb4d51271630353b1718c39dfd1ebe" target="_blank" rel="noopener noreferrer">Added the <code>add_prefix</code> attribute to <code>http_*</code> rules.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e51a15f4395d4223c9665e5cc8ae2c8dd29e8f20" target="_blank" rel="noopener noreferrer">Added the <code>integrity</code> attribute to <code>http_file</code> and <code>http_jar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8edf6abec40c848a5df93647f948e31f32452ae6" target="_blank" rel="noopener noreferrer">Added the <code>workspace_root</code> attribute to <code>repository_ctx</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5af794bb9bb8f9a7f3667d53f31b132a3f51314e" target="_blank" rel="noopener noreferrer">Added the <code>success</code> parameter to <code>repository_ctx.download</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2b02416b6175bf0ac82cb5c8ecc9a80a2f397e88" target="_blank" rel="noopener noreferrer">Added the <code>rename_files</code> parameter to <code>repository_ctx.extract</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/16c89c12af1b703c605b35ec06ede881e77237de" target="_blank" rel="noopener noreferrer">Added host arch to repository rule markers.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cc55400e614e4e301244cc7c338ee3ea89424ce0" target="_blank" rel="noopener noreferrer"><code>--override_repository</code> now accepts tildes.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/a15f342931c0ef6529c8f53cd7a8b8823de8979e" target="_blank" rel="noopener noreferrer"><code>http_*</code> rules now honour the <code>NETRC</code> environment variable.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/801e01c30005a562e4d056f2640e6f56cc096413" target="_blank" rel="noopener noreferrer">Download progress now displays human readable bytes.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cbf8159ba6190ab447ad54df63cb4db25763d755" target="_blank" rel="noopener noreferrer">Removed support for managed directories.</a></li><li><a href="https://docs.google.com/document/d/1N81qfCa8oskCk5LqTW-LNthy6EBrDot7bdUsjz6JFC4" target="_blank" rel="noopener noreferrer">When Bzlmod is enabled, canonical label literals are used.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="platforms-and-toolchains">Platforms and toolchains<a href="#platforms-and-toolchains" class="hash-link" aria-label="Direct link to Platforms and toolchains" title="Direct link to Platforms and toolchains">â€‹</a></h2><p>The C++, Android, and Apple rules are being migrated to support <a href="https://bazel.build/versions/6.0.0/concepts/platforms" target="_blank" rel="noopener noreferrer">building with Platforms</a>.
While progress has been made,
they don&#x27;t fully support it yet in Bazel 6.0.
For C++ projects,
it&#x27;s recommended that the <code>--incompatible_enable_cc_toolchain_resolution</code> flag is used,
to help the Bazel team discover any issues in the wide variety of projects that exist.</p><p>Here are some of the platforms and toolchains related changes which weren&#x27;t tied to any of those migrations:</p><ul><li>The <code>host</code> configuration is deprecated, and <a href="https://github.com/bazelbuild/bazel/commit/6e6c4cf1bd6edaa15ecc4417cd0be70581181def" target="_blank" rel="noopener noreferrer">a</a> <a href="https://github.com/bazelbuild/bazel/commit/32fc7cac3c62dcf1721e9093a449561eb854f241" target="_blank" rel="noopener noreferrer">lot</a> <a href="https://github.com/bazelbuild/bazel/commit/790d7a75b34eb963c18f9165bd9608d7a8eb4f3d" target="_blank" rel="noopener noreferrer">of</a> <a href="https://github.com/bazelbuild/bazel/commit/48e88685105c906ae52865422da01c39c580bf21" target="_blank" rel="noopener noreferrer">changes</a> <a href="https://github.com/bazelbuild/bazel/commit/715c9faabba573501c9cb7604192759950633205" target="_blank" rel="noopener noreferrer">were</a> <a href="https://github.com/bazelbuild/bazel/commit/d988e8b3bace4b2bb2ec4adc17d9bf7b4f49a907" target="_blank" rel="noopener noreferrer">made</a> to migrate away from it and to the <code>exec</code> configuration.</li><li><a href="https://github.com/bazelbuild/bazel/commit/6464f1cbdf14f0b8e8f29f7b57990a40ea584062" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_disable_starlark_host_transitions</code> flag, which prevents rules from using the <code>host</code> configuration.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/51c90c7d7f749af99d66cbd21bbdda09b68f79ac" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_exec_configuration_distinguisher</code> flag, which changes how the <code>platform_suffix</code> is calculated.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/423fb20c2bc7773f8c9567be8056566ce4633e5f" target="_blank" rel="noopener noreferrer">Added the <code>exec_group</code> argument to <code>testing.ExecutionInfo()</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/issues/14726" target="_blank" rel="noopener noreferrer">Toolchain dependencies can now be optional.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/eeb2e04e52cfad165a1bde33ce2d83a392f53d00" target="_blank" rel="noopener noreferrer"><code>sh</code> path is now selected based on execution platform instead of host platform, making it possible to execute <code>sh</code> actions in multi-platform builds.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2adf0033bb4e71171e96f95bbd54ab783c6bb6d1" target="_blank" rel="noopener noreferrer">The <code>exec</code> transition no longer resets any <code>TestConfiguration.TestOptions</code> options.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e4c1c434d49062449c7a83dd753fe01923766b1d" target="_blank" rel="noopener noreferrer"><code>platform.exec_properties</code> now become execution requirements.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-platforms">Execution platforms<a href="#execution-platforms" class="hash-link" aria-label="Direct link to Execution platforms" title="Direct link to Execution platforms">â€‹</a></h2><p>Execution platforms are <a href="https://bazel.build/versions/6.0.0/extending/platforms" target="_blank" rel="noopener noreferrer">platforms</a> which build tools execute on.
These include the host platform on which Bazel runs.</p><p>In the following sections I collected notable changes for Linux and macOS.
I&#x27;m sure there were some for Windows as well,
but since I don&#x27;t use Bazel on Windows,
none of the changes stood out to me as pertaining only to it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux">Linux<a href="#linux" class="hash-link" aria-label="Direct link to Linux" title="Direct link to Linux">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/ae6a90a143b1ef25ff5fd620c662ab5f81d0043d" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_sandbox_hermetic_tmp</code> flag, which causes the sandbox to have its own dedicated empty directory mounted as <code>/tmp</code> rather than sharing <code>/tmp</code> with the host filesystem.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9a13051fb73d68221dfd9849b52e0f3cd046c524" target="_blank" rel="noopener noreferrer">Added the <code>--sandbox-explicit-pseudoterminal</code> flag, which allow processes in the sandbox to open pseudoterminals.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/467f32d8087fed11bd480ec5112bf1228b63053d" target="_blank" rel="noopener noreferrer">Fixed handling of large UIDs.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="macos">macOS<a href="#macos" class="hash-link" aria-label="Direct link to macOS" title="Direct link to macOS">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/2ff4124004355b0bf86e1228b4bb1d19bd55ec3d" target="_blank" rel="noopener noreferrer">Remote Xcode version is now matched more granuarly.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b8d0e26357065740d4007223cf20f488a120290e" target="_blank" rel="noopener noreferrer"><code>clean --async</code> is now available on macOS.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f99319f14fb1c92c98217bb9b2a85c75bd963368" target="_blank" rel="noopener noreferrer">The <code>@bazel_tools//tools/cpp:compiler</code> flag now has the value <code>clang</code> for the auto-configured Xcode toolchain rather than the generic value <code>compiler</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3451774a8a76b8ef9211e852ec3173498bbac1a7" target="_blank" rel="noopener noreferrer">Removed some aborts from <code>wrapped_clang</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d9f20dcf099d245a90c2d2965706076126ea574b" target="_blank" rel="noopener noreferrer">Fixed <code>lld</code> detection on macOS.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="target-platforms">Target platforms<a href="#target-platforms" class="hash-link" aria-label="Direct link to Target platforms" title="Direct link to Target platforms">â€‹</a></h2><p>Target platforms are <a href="https://bazel.build/versions/6.0.0/extending/platforms" target="_blank" rel="noopener noreferrer">platforms</a> which you are ultimately building for.
I cover the Android and Apple platforms in the following sections,
as they still have some functionality provided by Bazel core,
instead of being fully supported by standalone Starlark rules.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="android">Android<a href="#android" class="hash-link" aria-label="Direct link to Android" title="Direct link to Android">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/ff311f618a602c15f5848a317561934b0154132b" target="_blank" rel="noopener noreferrer">D8 is now the default desugarer.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/66d07f096cb697bdadb6f9d9fbc1c4fe33be6d59" target="_blank" rel="noopener noreferrer">D8 is now the default dexer.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ae247145b897d0f41cdf2b317f5c7b856845e303" target="_blank" rel="noopener noreferrer">The D8 jar from Maven is used instead of Android Studio&#x27;s.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4c3219ec5fc2f74b45f7b29b029caf56ed8a1b4d" target="_blank" rel="noopener noreferrer">Added the <code>android_binary.min_sdk_version</code> attribute.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f6dbd1e4a127b95276127afe64a095345678019b" target="_blank" rel="noopener noreferrer">Added the <code>ApkInfo.signing_min_v3_rotation_api_version</code> attribute.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/021665748680b415704d70698d13b4efb9e0e9dc" target="_blank" rel="noopener noreferrer">Added the <code>--mobile_install_run_deployer</code> flag to the <code>mobile-install</code> command, which allows skipping the deployer after building.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2b44482eb7645f738fddf48622ccc1cf05a179d7" target="_blank" rel="noopener noreferrer">Added the <code>--bytecode_optimization_pass_actions</code> flag, which allows splitting the optimization pass into N parts.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/63aace26c0e624c146840625e69051bace300ff2" target="_blank" rel="noopener noreferrer">Added the <code>--persistent_multiplex_android_tools</code>, <code>--persistent_multiplex_android_resource_processor</code>, <code>--persistent_android_dex_desugar</code>, and <code>--persistent_multiplex_android_dex_desugar</code> expansion flags, which allow for easy enabling of persistent and multiplexed Android tools (dexing, desugaring, resource, and processing)</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/563664e0e0a9083be554b4931654743d84b9cba4" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_android_platforms_transition_updates_affected</code> flag, which causes <code>AndroidPlatformsTransition</code> to also update <code>affected by Starlark transition</code> with the changed options.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4cfd32d419ca322894dea5cbd6e8ce61676ec476" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_persistent_multiplex_busybox_tools</code> flag, which enables multiplex worker support in <code>ResourceProcessorBusyBox</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3df19e8e900c0f435923754fee36ca5d6eb8724d" target="_blank" rel="noopener noreferrer">Added worker support to <code>AndroidCompiledResourceMergingAction</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7ce1c578b1d9a28709b3949ddfaaebe5e32c989f" target="_blank" rel="noopener noreferrer">Added worker support to <code>CompatDexBuilder</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f32b99f452c08e4276c9c5efd564a246383f50bb" target="_blank" rel="noopener noreferrer">Added worker support to the D8 desugarer.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c60eb5d324da4d81f6be93f442ac6d7576741e8e" target="_blank" rel="noopener noreferrer">Added the merged manifest to the <code>android_deploy_info</code> output group.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/bb97b02fb8fd7c4a60d0e85f86acec12bd1af58c" target="_blank" rel="noopener noreferrer">Added <code>application_resources</code>&#x27;s output groups to <code>android_binary</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7de4fab0d8b507f3790533e1ae18e94dca916d04" target="_blank" rel="noopener noreferrer">Removed support for <code>android_binary.multidex=off</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b76cc3a2ec4991bb5772ce309fae288e147bcebe" target="_blank" rel="noopener noreferrer">Reduced <code>AndroidAssetMerger</code> intermediate outputs.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2c25f73880ed72dddb4bfa843388b15f02011158" target="_blank" rel="noopener noreferrer">Resources are now sorted to produce a consistent zip (which helps cache hit rates).</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1b2cf8d596a98abe3f02f711903435e060f76720" target="_blank" rel="noopener noreferrer">Incremental APKs are now zipaligned before they are installed.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/6613f6fbbcf85aac0ee5865d7d5273aad2a5813a" target="_blank" rel="noopener noreferrer">Split APKs are now zipaligned before they are installed.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4829960c1626357f514ac16eb1a4005a360ee96d" target="_blank" rel="noopener noreferrer"><code>minsdk</code> is now added to dexing and desugaring artifacts paths.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2907d15985907f17fe53aa8c4e7953b5fa69977c" target="_blank" rel="noopener noreferrer">Certain Android actions now have their output paths stripped of config information.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/46e0be4ef67901cab7896348c89de06396f737b4" target="_blank" rel="noopener noreferrer">Fixed Android&#x27;s <code>armeabi-v7a</code> constraint.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apple">Apple<a href="#apple" class="hash-link" aria-label="Direct link to Apple" title="Direct link to Apple">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/ce611646969cfe72ae5e22083708684eae11e478" target="_blank" rel="noopener noreferrer">Added the <code>watchos_device_arm64</code> <code>cpu</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/531df65129f632a19ce0fd27422d55696af42511" target="_blank" rel="noopener noreferrer">Added the <code>watchos_device_arm64e</code> <code>cpu</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/877845584186301e53ed01eaecf3166db4ddcec7" target="_blank" rel="noopener noreferrer">Added the <code>apple_common.link_multi_arch_static_library</code> function.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/96084140804f552c0402de6223776757a66d0e5a" target="_blank" rel="noopener noreferrer">Added <code>-no_deduplicate</code> when linking with Darwin <code>dbg</code>/<code>fastbuild</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2cc3dc4130e3a2b11fbfb980609ca3f2532489b7" target="_blank" rel="noopener noreferrer">Added support for the <code>static_link_cpp_runtimes</code> feature in Apple linking.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/da8a327802187363636908f6c3bc16d9f5a18604" target="_blank" rel="noopener noreferrer"><code>cpu</code>s for tvOS and watchOS are now correctly inferred when running on an Apple Silicon host.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/01d46bbd54b1f3e75eda5876da4467b5bda33d01" target="_blank" rel="noopener noreferrer">32-bit watchOS architectures are no longer included in mulit-arch builds when targeting watchOS 9.0 or greater.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7866fd90d216d6bec7af3631ded5b2db56c5cde2" target="_blank" rel="noopener noreferrer">Moved <code>-framework</code> flags to be after the <code>-filelist</code> flag.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ccb2cc05ff72f9f10c741b0e1d44f9a1b1265ddb" target="_blank" rel="noopener noreferrer">Static frameworks are now linked into fully linked static libraries.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/6e1b440a94214fdef0f6dd489c0aa3c4fdc6ef87" target="_blank" rel="noopener noreferrer">macOS dynamic libraries now have <code>.dylib</code> extensions instead of <code>.so</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9feeb1d928899e3b390241da6d6cfbc8dca1e4a6" target="_blank" rel="noopener noreferrer">Linking <code>cc_info</code> is now exposed from <code>AppleExecutableBinary</code> and <code>AppleDynamicFramework</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/092884b0118f1b8b14ba2277851baa6dcce5cac2" target="_blank" rel="noopener noreferrer">Removed the <code>AppleDylibBinary</code> and <code>AppleLoadableBundleBinary</code> providers.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3073f1b72fd6a9df758d059391b1f6791ea5eb1b" target="_blank" rel="noopener noreferrer">Removed the <code>should_lipo</code> argument from <code>apple_common.link_multi_arch_binary</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0535477eabfbafb9665cc5a191b677077496751c" target="_blank" rel="noopener noreferrer">Removed the native <code>apple_binary</code> rule.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/589354cdcc274edc01e5634c081739737c593f5e" target="_blank" rel="noopener noreferrer">Removed the native <code>apple_static_library</code> rule.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="languages">Languages<a href="#languages" class="hash-link" aria-label="Direct link to Languages" title="Direct link to Languages">â€‹</a></h2><p>While there are lots of programming languages that are supported through standalone Starlark rules,
some are still written as &quot;native&quot; rules in Bazel core,
or are bundled Starlark rules while <a href="#starlark">Starlarkification</a> is in progress.
In the following sections I summarize the notable changes in support of these languages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-and-c">C and C++<a href="#c-and-c" class="hash-link" aria-label="Direct link to C and C++" title="Direct link to C and C++">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/6522472dc8a7efaa278b04fd27b3ebb3d467d4d3" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_unsupported_and_brittle_include_scanning</code> flag, which enables C/C++ include scanning.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4919d4a61d8506d175b25a035500842b8bfe3d0d" target="_blank" rel="noopener noreferrer">Added the <code>--host_per_file_copt</code> flag.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/bff973031a65c139a4878c87e5f335a895964ab9" target="_blank" rel="noopener noreferrer">Added the <code>archive_param_file</code> feature, which allows turning off param file for archives.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5ebb0d6884c62150afaa8e1a402881fd5c4f6a37" target="_blank" rel="noopener noreferrer">Added the <code>default_link_libs</code> feature, which can be disabled to support pure C.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/a9e5a32b9c0de2ade15be67bd1b80c3ec8e6b472" target="_blank" rel="noopener noreferrer">Added the <code>gcc_quoting_for_param_files</code> feature, which enables gcc quoting for linker param files.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f802525ad37e4f4567103682244d65f6cc55ff57" target="_blank" rel="noopener noreferrer">Added the <code>treat_warnings_as_errors</code> feature, which treats warnings as errors.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/94f83f4c8c5feb0f879eb83d122808fa328837c6" target="_blank" rel="noopener noreferrer">Added the <code>separate_module_headers</code> parameter to <code>cc_common.compile</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d308c175aa53757746c65ab65c17f9dbd6267755" target="_blank" rel="noopener noreferrer">Added the <code>language</code> parameter to <code>cc_common.configure_features</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8ac29d796722cc7f8ad951e64fa18b4b4cd467a4" target="_blank" rel="noopener noreferrer">Added the <code>main_output</code> parameter to <code>cc_common.link</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/eb181661ff7e72781f46b7994a5e5c9bab45d5dd" target="_blank" rel="noopener noreferrer">Added the <code>BAZEL_CURRENT_REPOSITORY</code> local define to <code>cc_*</code> rules.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/aaba5be3d50b642ad3d9bccada8971a06c68c123" target="_blank" rel="noopener noreferrer">Added <code>Action.argv</code> support to <code>CppCompileAction</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/17ed57ac5ad9b52bfc43e52ca40512f7114c58aa" target="_blank" rel="noopener noreferrer">Added support for vendor&#x27;ed <code>clang</code></a></li><li><a href="https://github.com/bazelbuild/bazel/commit/abe6667469363d543d8d0fe9108eacb9f96028ed" target="_blank" rel="noopener noreferrer">Reverted <code>cc_library.interface_deps</code> back to <code>implementation_deps</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/25d17f53bed60464ce74d1c1a1769787ab259cf2" target="_blank" rel="noopener noreferrer">Default flags features can now be disabled.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5f51d21e918a4c7286c5024c3c50f2d931662af9" target="_blank" rel="noopener noreferrer">The <code>per_object_debug_info</code> feature is now enabled by default.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ef3f05852b3bf542903f091184da96b96354a13d" target="_blank" rel="noopener noreferrer">The <code>@bazel_tools//tools/cpp:compiler</code> flag now has the value <code>gcc</code> if the configured compiler is detected to be <code>gcc</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1746a7958d8c332cae563333d9028b066373e547" target="_blank" rel="noopener noreferrer">The <code>malloc</code> attribute of <code>cc_*</code> rules now accepts any <code>CcInfo</code> providing target.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d519fec25245fcc5806360c671b2d242469515f6" target="_blank" rel="noopener noreferrer">The C++ archive action now has the <code>CppArchive</code> mnemonic.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/32e61b3235cf49b8764dd6b10622197fec6056ce" target="_blank" rel="noopener noreferrer">Coverage can now be collected for external targets.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/46a8e09334a03eeb8518a4913dcd98f19ddc9c62" target="_blank" rel="noopener noreferrer">Make variable substitution now accepts <code>data</code> dependencies.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/17998427da1438174fb41708d3afcaff7eedc4f4" target="_blank" rel="noopener noreferrer"><code>cc_common.link</code> no longer stamps actions for tool dependencies.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/af4a1506d8b5f68a3208e401ee5a9a7c1e0a10ad" target="_blank" rel="noopener noreferrer">Windows interface libraries can now use the <code>.lib</code> extension.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/06f9202e813d649b4ea48aa48cb0668fecb9cefa" target="_blank" rel="noopener noreferrer">Fixed <code>cc_test</code> to apply all compilation flags.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e3dcfa54baec45a6b247143106f7ab689df424cd" target="_blank" rel="noopener noreferrer">Fixed dynamic library lookup with remotely executed tools.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="java">Java<a href="#java" class="hash-link" aria-label="Direct link to Java" title="Direct link to Java">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/8f3d99aa2e7c0742f7f89ddc3921350537feef77" target="_blank" rel="noopener noreferrer">Upgraded JDK11.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fbb0958f281e523db085849e87f56bd70f038b34" target="_blank" rel="noopener noreferrer">Upgraded JDK17.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/a7f1c7133a58ac721d176487ff8e82bccc55699b" target="_blank" rel="noopener noreferrer">Added JDK18.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1acda6be4ffc197f0a19a54556a4a3f8eb4b4906" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_disallow_java_import_empty_jars</code> flag, which disallows empty <code>java_import.jars</code> attributes.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7f75df2d299e383f58e7a0f82fd0822c88776b5e" target="_blank" rel="noopener noreferrer">Added the <code>--multi_release_deploy_jars</code> flag, which causes <code>_deploy.jar</code> outputs of <code>java_binary</code> to be Multi-Release jar files.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fbb68e9bcbe8401690a513f086afeadc57adfdd6" target="_blank" rel="noopener noreferrer">Added the <code>com.google.devtools.build.buildjar.javac.enable_boot_classpath_cache</code> property, which disables the bootstrap classpath cache.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0f95c8a8a74d18823c3117d8f3370bc7301081b4" target="_blank" rel="noopener noreferrer">Added the <code>@AutoBazelRepository</code> annotation processor.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2217b13cae4110b0e2b8fe6a283a9b6dfbf150e8" target="_blank" rel="noopener noreferrer">Added the <code>add_exports</code> and <code>add_opens</code> attributes to <code>java_*</code> rules.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/79badc0bf7937e8443bbe9171d92aefcf1e90e6f" target="_blank" rel="noopener noreferrer">Added the <code>hermetic_srcs</code> and <code>lib_modules</code> attributes to <code>java_runtime</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/37d08ed18b6830e0eea81d7cdb7866c3535f9e47" target="_blank" rel="noopener noreferrer">Added the <code>classpath_resources</code> argument to <code>java_common.compile</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/80ca10bddc68af318efeef37975de0bfec204a68" target="_blank" rel="noopener noreferrer">Added the <code>resource_jars</code> argument to <code>java_common.compile</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/4ff441b13db6b6f5d5d317881c6383f510709b19" target="_blank" rel="noopener noreferrer">Added the <code>--add_exports</code> and <code>--add_opens</code> options to <code>singlejar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/341d7f3366ac15b375eb3f9a750382e2a034c9e1" target="_blank" rel="noopener noreferrer">Added the <code>--hermetic_java_home</code> option to <code>singlejar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/276fb093b83c37d9c4d2b6df01c04700e7aa3346" target="_blank" rel="noopener noreferrer">Added the <code>--jdk_lib_modules</code> option to <code>singlejar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f33ce3d8192953e425f613024ec04541ceb80f1b" target="_blank" rel="noopener noreferrer">Added the <code>--multi_release</code> option to <code>singlejar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8b5ed8aac2b25180fbfac0ff27ebe3998a61209a" target="_blank" rel="noopener noreferrer">Added the <code>--output_jar_creator</code> option to <code>singlejar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2930dd3ac20810730f2263fa9e319379f5d22720" target="_blank" rel="noopener noreferrer">Added a tag-based suppression mechanism for <code>java_import.deps</code> checking.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/acbb9e1de6c9f2cc99be4ff849e456d316da9db1" target="_blank" rel="noopener noreferrer">Coverage can now be collected for external targets.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d5559c16ac008b86345fbbade5d600181a2fce6f" target="_blank" rel="noopener noreferrer">The Java runtimes now have <code>target_compatible_with</code> set instead of <code>exec_compatible_with</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/a32a0fd0d6bf75c2c8c6af6281875e90908b82f6" target="_blank" rel="noopener noreferrer"><code>ijar</code>/<code>java_import</code> now preserve classes with <code>@kotlin.Metadata</code> annotations.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/756be22f6445d6052a0a9cce66fdb7f7b3a8f300" target="_blank" rel="noopener noreferrer">Hermetic packaged JDK modules now record file size in deploy JAR manifest <code>JDK-Lib-Modules-Size</code> attribute.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b64f734ffea7fa5d53cb1f0e62247a3ff0b74e0d" target="_blank" rel="noopener noreferrer"><code>TurbineTransitiveJar</code> attributes are now recognized in <code>ijar</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/17cfa015d73195f6fda7705a57702e36609b3175" target="_blank" rel="noopener noreferrer">The stub template now defaults to a UTF-8 locale.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="objective-c">Objective-C<a href="#objective-c" class="hash-link" aria-label="Direct link to Objective-C" title="Direct link to Objective-C">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/68f29c67098cedbfaa3ef011eef4df661860ac36" target="_blank" rel="noopener noreferrer">Added support for Objective-C specific features to <code>cc_common.configure_features</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/540892d788727f414cc0cd3ea2ae4d4445914366" target="_blank" rel="noopener noreferrer"><code>objc_library</code> now requires <code>CcInfo</code> in its deps.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/8a2b711a2700740575904682066dbe1e5c9f6d02" target="_blank" rel="noopener noreferrer">Removed the <code>ObjcProvider.direct_headers</code> attribute.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="python">Python<a href="#python" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">â€‹</a></h3><ul><li><a href="https://github.com/bazelbuild/bazel/commit/9d0163002ca63f4cdbaff9420380d72e2a6e38b3" target="_blank" rel="noopener noreferrer">Added the <code>coverage_tool</code> attribute to <code>py_runtime</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/32364dc9194b71e5759546a0fd0013c44bf7109e" target="_blank" rel="noopener noreferrer">Added the <code>requires-darwin</code> execution requirement to macOS <code>py_test</code> targets.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d60ce2c7c86393638c77698c00c2168a7a936a53" target="_blank" rel="noopener noreferrer">Added <code>CurrentRepository()</code> to Python runfiles library.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c3425feeb3bc204923979773ae985dd2f3e24b9f" target="_blank" rel="noopener noreferrer">The stub now also considers <code>RUNFILES_DIR</code> when no runfiles directory can be found.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/c33e44c29e6c4fe35331d0c3f7aad1e76d6318da" target="_blank" rel="noopener noreferrer">Reduced the number of imports used in the stub.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/ecd4c900b61416609d99c76a4e2190a4d6d7b97f" target="_blank" rel="noopener noreferrer"><code>py_*.srcs_version=&quot;PY2&quot;</code> is now the the same as <code>&quot;PY2ONLY&quot;</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/40b95c32317f1739f14899ee5e4605c58e4836b2" target="_blank" rel="noopener noreferrer">Removed UNC path prefix on Windows-10.1607 or later.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rules-authoring">Rules authoring<a href="#rules-authoring" class="hash-link" aria-label="Direct link to Rules authoring" title="Direct link to Rules authoring">â€‹</a></h2><p>Bazel&#x27;s extensibility is powered by the ability to write custom <a href="https://bazel.build/versions/6.0.0/extending/rules" target="_blank" rel="noopener noreferrer">rules</a>.
Most rules used in a project will be provided by open source rule sets,
but projects may also define rules themselves.
Bazel 6.0 includes numerous changes that make custom rules more performant,
easier to write,
or even expand what is possible to do with them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aspects">Aspects<a href="#aspects" class="hash-link" aria-label="Direct link to Aspects" title="Direct link to Aspects">â€‹</a></h3><p><a href="https://bazel.build/versions/6.0.0/extending/aspects" target="_blank" rel="noopener noreferrer">Aspects</a> allow augmenting build dependency graphs with additional information and actions.
These changes expanded their capabilities:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/37710728712e00e8bd7145662668d72591204146" target="_blank" rel="noopener noreferrer">Added the <code>--aspects_parameters</code> flag, which allows passing parameters to command-line aspects.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/30fd508bf68c8bb9cf32839b71f79a9aa4bd069a" target="_blank" rel="noopener noreferrer">Added support for using <code>attr.bool()</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/14292d176cb85d1cf6e20f79fde0249b0fe6ba24" target="_blank" rel="noopener noreferrer">Added support for using <code>attr.int()</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7e3755d3bf1443a0f2a780bc8efff658c464c3a5" target="_blank" rel="noopener noreferrer">Added support for setting exec_compatible_with and exec_group on aspects.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b3e12bad9852a068ed8687d39e278441b52c910d" target="_blank" rel="noopener noreferrer">Aspects now inherit fragments from required aspects and from targets they are attached to.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistent-workers">Persistent workers<a href="#persistent-workers" class="hash-link" aria-label="Direct link to Persistent workers" title="Direct link to Persistent workers">â€‹</a></h3><p><a href="https://bazel.build/versions/6.0.0/remote/persistent" target="_blank" rel="noopener noreferrer">Persistent workers</a> improve build performance by sending multiple requests to long-running processes.
Here are some notable changes to persistent worker support:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/8e674324d18b715fd09c7fcfedd97be28caa525c" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_total_worker_memory_limit_mb</code> flag, which sets a limit on total worker memory usage.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fb19a28db30c6937f0df4e143b2256e7e4743bd4" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_worker_multiplex_sandboxing</code> flag, which controls whether to sandbox multiplex workers that support it.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cb2cd9fd2b65311da927777c35939701add5b879" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_worker_strict_flagfiles</code> flag, which checks if the worker argument list conforms to the spec.</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="starlark">Starlark<a href="#starlark" class="hash-link" aria-label="Direct link to Starlark" title="Direct link to Starlark">â€‹</a></h3><p><a href="https://youtu.be/6_RrNxuny6Y?t=232" target="_blank" rel="noopener noreferrer">As mentioned at Bazelcon</a>,
progress is being made on migrating natives rules out of Bazel and into standalone Starlark rules.
In the Bazel 6.0 release progress was made on the Android, C++, Java, Objective-C, Protobuf, and Python rules.</p><p>In addition to changes directly needed for Starlarkification,
for which there were many and I&#x27;m not going to list them here,
the Starlark language itself received performance and feature improvements:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/54f11fe4189edfed92c820b8feaeb8c046d23a2a" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_disallow_symlink_file_to_dir</code> flag, which disallows <code>ctx.actions.symlink</code> from symlinking a file into a directory.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/64491051223cdf28e7bf015baa131c7d30b2e2d8" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_remove_rule_name_parameter</code> flag, which disables the <code>rule.name</code> parameter.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b615d0df882d1564dc1d62d40cf50490a9bc3738" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_debug_selects_always_succeed</code> flag, which causes <code>select</code> functions with no matching clause to return an empty value, instead of failing.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/e82beda0257958892ff8a15f3eae5c8f2f509118" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_get_fixed_configured_action_env</code> flag, which causes <code>action.env</code> to return fixed environment variables specified through features configuration.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cc74b11bc1a0a0150abd37e82f913c4b95eb16bb" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_lazy_template_expansion</code> flag, which adds support for lazily computed substitutions to <code>ctx.actions.expand_template()</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b1deea40aeb81f4c7e23594e0166a6a653a75b65" target="_blank" rel="noopener noreferrer">Added <code>dict</code> union operators (<code>|</code> and <code>|=</code>).</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/0a13dd69aa27ec643dd44637712b70c24b924c49" target="_blank" rel="noopener noreferrer">Added the <code>coverage_support_files</code> and <code>coverage_environment</code> parameters to <code>coverage_common.instrumented_files_info</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/fc13ba271f138c804869d0f99d751e25518b5326" target="_blank" rel="noopener noreferrer">Added the <code>init</code> parameter to <code>provider()</code>, which allows for performing pre-processing and validation of field values.</a></li><li><a href="https://bazel.build/versions/6.0.0/concepts/visibility#load-visibility" target="_blank" rel="noopener noreferrer">Added <code>load</code> visibility.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/dfa9c62abda21dcf187df9d2a2c00ecefda223e0" target="_blank" rel="noopener noreferrer"><code>dict()</code> and <code>dict.update()</code> now accept arbitrary maps, not just <code>dict</code>s.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/40a6cb093e9a9902a35943b97e2ae6b362a5f005" target="_blank" rel="noopener noreferrer"><code>testing.ExecutionInfo</code> can now be used as a provider key.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/aaf87f4ef3e19cbf1e5ab28f50cd8fb90dfd115e" target="_blank" rel="noopener noreferrer">The <code>symlinks</code> and <code>root_symlinks</code> parameters of the <code>ctx.runfiles</code> function now accept <code>depset</code>s.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/f717d6a7484d1c7d624b0f39822e6fd61cfe7ce6" target="_blank" rel="noopener noreferrer">Starlark flags no longer warn for incompatible commands.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/5e80514244fd855b986790f2d981c2ed614e6940" target="_blank" rel="noopener noreferrer">Moved <code>analysis_test</code> to <code>testing.analysis_test</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d0fde13454a71355b7695922c2179d8756b4632f" target="_blank" rel="noopener noreferrer">The <code>\a</code>, <code>\b</code>, <code>\f</code>, and <code>\v</code> escape sequences are now supported.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3bda5c945caff86475a3da9bd5875e8ff94eab71" target="_blank" rel="noopener noreferrer"><code>print()</code> statements are now emitted only if the line of code is executed.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/cf99f8476df4110ac749deda15340ebde74a2116" target="_blank" rel="noopener noreferrer"><code>native.existing_rule/s()</code> with <code>--incompatible_existing_rules_immutable_view</code> can now be encoded as json and passed as <code>**kwargs</code>.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/2f7d965287ddfa056b169cf16144d05f78d03c7d" target="_blank" rel="noopener noreferrer">Fixed incremental builds that transition on flags when the default value of those flags changed.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/9f2542f91e99b40de65506c8f4768ec0003a4e5d" target="_blank" rel="noopener noreferrer">Fixed preserving the relative order of explicit and expanded Starlark flags.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/d834905a158d253e837597175f4905e23266d0c7" target="_blank" rel="noopener noreferrer">Fixed <code>ctx.actions.symlink(target_path = ...)</code> incorrectly making paths absolute.</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">â€‹</a></h2><p>There were a handful of changes that I couldn&#x27;t find a nice home for in the sections above,
but I still felt were important or interesting enough to call attention to:</p><ul><li><a href="https://github.com/bazelbuild/bazel/commit/52d1d4ae9bfee7379093d46258fa3a56e4d69e61" target="_blank" rel="noopener noreferrer">Added the <code>--experimental_output_directory_naming_scheme</code> flag, which modifies the way the output directory is calculated.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/65388c330141736d505cec50b4cc02a5d65ed5de" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_check_testonly_for_output_files</code> flag, which checks <code>testonly</code> for prerequisite targets that are output files by looking up <code>testonly</code> of the generating rule.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1473988aa1e9b92c42fcbad4e155f247f1983d13" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_fix_package_group_reporoot_syntax</code> flag, which changes the meaning of <code>&quot;//...&quot;</code> to refer to all packages in the current repository instead of all packages in any repository.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/1473988aa1e9b92c42fcbad4e155f247f1983d13" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_package_group_has_public_syntax</code> flag, which allows writing <code>&quot;public&quot;</code> or <code>&quot;private&quot;</code> in the <code>package_group.packages</code> attribute to refer to all packages or no packages respectively.</a></li><li><a href="https://github.com/bazelbuild/bazel/issues/16196" target="_blank" rel="noopener noreferrer">Added the <code>--incompatible_unambiguous_label_stringification</code> flag, which enables unambiguous stringification of <code>Label</code>s.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/b82a8e9124a046f1a530ec4ba54e9c90383f82e9" target="_blank" rel="noopener noreferrer">Added the <code>bazel leaf</code> command.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/507d85fd6dcf276add3b46158eb5bf36a4179db5" target="_blank" rel="noopener noreferrer"><code>bazel config</code> now shows output path prefixes.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/830d4649b42451161adbdf907d9935e648f17d8c" target="_blank" rel="noopener noreferrer"><code>BAZEL_TEST=1</code> is now set as a test environment variable.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/60e9bf339f319d16b738619a05b1dd5d122ef852" target="_blank" rel="noopener noreferrer">Progress updates no longer have their delay increased when there is no cursor control.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/7cc786ab51dacc7e2eade2ab9c2b440bf9d29972" target="_blank" rel="noopener noreferrer">Fixed native rules not merging default outputs into the transitive runfiles.</a></li><li><a href="https://github.com/bazelbuild/bazel/commit/3badca3f7e539e4b56fd5c502233c03b9934b813" target="_blank" rel="noopener noreferrer">Fixed <code>--nobuild_runfiles_links</code> when used with <code>--run_under</code></a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">â€‹</a></h2><p>As you can see,
Bazel 6.0 was another <em>massive</em> release.
Thankfully,
through the <a href="https://bazel.build/versions/6.0.0/release/versioning#rolling-releases" target="_blank" rel="noopener noreferrer">rolling releases</a> process,
people were able to test,
or even actively depend on,
these changes well before the first 6.0 release candidate was cut.</p><p>I expect <a href="https://github.com/bazelbuild/bazel/milestone/46" target="_blank" rel="noopener noreferrer">Bazel 6.1</a> to be a fast follow with some changes that missed the final release candidate.
Work on Bazel 7.0 is well underway as well,
and I look forward to summarizing its changes next year.</p></div><footer class="row margin-vert--lg"><div class="tags_OHNp"><strong>Tags:</strong><a class="tag_p3At" href="/blog/tags/bazel">bazel</a></div></footer></article><div><a href="https://github.com/buildbuddy-io/buildbuddy/edit/master/website/blog/whats-new-in-bazel-6-0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/welcoming-son-luong-ngoc"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Welcoming Son Luong Ngoc</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/welcoming-jim-hollenbach"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Welcoming Jim Hollenbach</div></a></nav></div></main><div class="col col--3"><div class="blog-sidebar"><div class="sidebar_ycyQ thin-scrollbar"><h3 class="sidebarItemTitle_uR5j">Recent posts</h3><ul class="sidebarItemList_TpH3"><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/welcoming-grace-chuang">Welcoming Grace Chuang</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/donating-rules_xcodeproj-to-the-mobile-native-foundation">Donating rules_xcodeproj to the Mobile Native Foundation</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/multiple-xcode-configurations-with-rules_xcodeproj-1-3">Multiple Xcode Configurations with rules_xcodeproj 1.3</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/introducing-rules_xcodeproj-1-0">Introducing rules_xcodeproj 1.0</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/welcoming-son-luong-ngoc">Welcoming Son Luong Ngoc</a></li><li class="sidebarItem_WWBq"><a aria-current="page" class="sidebarItemLink_Hhz8 sidebarItemLinkActive_OkT7" href="/blog/whats-new-in-bazel-6-0">What&#x27;s New in Bazel 6.0</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/welcoming-jim-hollenbach">Welcoming Jim Hollenbach</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/bazelcon">Bazelcon 2022 Recap</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/clickhouse-build-trends">How We Use ClickHouse to Analyze Trends Across Millions of Builds</a></li><li class="sidebarItem_WWBq"><a class="sidebarItemLink_Hhz8" href="/blog/welcoming-iain-macdonald">Welcoming Iain Macdonald</a></li></ul></div></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="/"><img alt="BuildBuddy Logo" src="/img/logo_white.svg" width="281px" height="32px" class="footer-logo"></a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/ui">Build &amp; Test UI</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/remote-execution">Remote Execution</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/remote-cache">Remote Cache</a></li><li class="footer__item"><a href="https://app.buildbuddy.io" target="_self" rel="noopener noreferrer" class="footer__link-item">Get Started<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/introduction/">Documentation</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/pricing">Pricing</a></li><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/privacy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/terms">Terms of Service</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io/buildbuddy/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an Issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/contact">Contact Us</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/team">Team</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/careers">Careers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Security</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/security">Security Overview</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/security-updates">Security Updates</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/security-vulnerability-report">Report a Vulnerability</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://slack.buildbuddy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/buildbuddy_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://linkedin.com/company/buildbuddy" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2023 Iteration, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a4b93f7b.js"></script>
<script src="/assets/js/main.e4323cb3.js"></script>
</body>
</html>