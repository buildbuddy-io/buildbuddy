#!/usr/bin/env bash
# go-to-definition can take us to files outside the bazel workspace where bazel
# cannot be run, so cd back to the workspace root.
SCRIPT_DIR=$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")
cd $SCRIPT_DIR/..

# Use a separate output base for the Go packages driver to allow parallel execution
# with command-line bazel. The repo cache and disk cache are shared via user.bazelrc.
OUTPUT_BASE="${HOME}/.bazel/output_base_gopackagesdriver"
exec -a bazel-gopackagesdriver bazel --output_base="${OUTPUT_BASE}" run -- @io_bazel_rules_go//go/tools/gopackagesdriver "${@}"
