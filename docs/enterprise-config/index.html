<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BuildBuddy Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BuildBuddy Blog Atom Feed"><title data-react-helmet="true">Configuring BuildBuddy Enterprise | BuildBuddy</title><meta data-react-helmet="true" property="og:url" content="https://docs.buildbuddy.io/docs/enterprise-config"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configuring BuildBuddy Enterprise | BuildBuddy"><meta data-react-helmet="true" name="description" content="BuildBuddy Enterprise allows configuration of many features that are not available in the open-core version. Below you’ll find examples for configuring some of these features. If you don’t see what you’re looking for below, please don’t hesitate to ask us! For a full overview of what can be configured, see our Configuration docs."><meta data-react-helmet="true" property="og:description" content="BuildBuddy Enterprise allows configuration of many features that are not available in the open-core version. Below you’ll find examples for configuring some of these features. If you don’t see what you’re looking for below, please don’t hesitate to ask us! For a full overview of what can be configured, see our Configuration docs."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_black.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.buildbuddy.io/docs/enterprise-config"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/enterprise-config" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.buildbuddy.io/docs/enterprise-config" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1837bf19.css">
<link rel="preload" href="/assets/js/runtime~main.89fe95bd.js" as="script">
<link rel="preload" href="/assets/js/main.2a9fcea6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs</a><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">FAQs</a><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Login</a></div><div class="navbar__items navbar__items--right"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link" class="sign-up">Sign Up</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT"> </span></div><div class="react-toggle-track-x"><span class="toggle_71bT"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.buildbuddy.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_blank" rel="noopener noreferrer" class="menu__link">Docs</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/faq" target="_self" rel="noopener noreferrer" class="menu__link">FAQs</a></li><li class="menu__list-item"><a href="https://github.com/buildbuddy-io/buildbuddy" target="_self" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="menu__link">Pricing</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link">Login</a></li><li class="menu__list-item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="menu__link" class="sign-up">Sign Up</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cloud">Cloud Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/on-prem">On-prem Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides">Guides</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-auth">Authentication Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guide-metadata">Build Metadata Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Remote Build Execution</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/remote-build-execution">Remote Build Execution</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-setup">Remote Build Execution Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-platforms">RBE Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-github-actions">RBE with GitHub Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rbe-pools">RBE Executor Pools</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Workflows (CI)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/workflows-setup">Workflows setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/workflows-config">Workflows configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-rbe">RBE Failures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/troubleshooting-slow-upload">Slow Uploads</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise">BuildBuddy Enterprise</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-setup">Enterprise On-prem Setup</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/enterprise-config">Enterprise Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-helm">Enterprise Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-rbe">Enterprise RBE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-mac-rbe">Enterprise Mac RBE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-api">Enterprise API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/prometheus-metrics">Prometheus Metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-samples">Samples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-app">App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-database">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-ssl">SSL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-auth">Auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-integrations">Integrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-org">Org</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-rbe">RBE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-misc">Misc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-telemetry">Telemetry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config-flags">Flags</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Configuring BuildBuddy Enterprise</h1></header><div class="markdown"><p>BuildBuddy Enterprise allows configuration of many features that are not available in the open-core version. Below you’ll find examples for configuring some of these features. If you don’t see what you’re looking for below, please don’t hesitate to ask us! For a full overview of what can be configured, see our <a href="/docs/config">Configuration docs</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mysql-data-storage"></a>MySQL Data Storage<a class="hash-link" href="#mysql-data-storage" title="Direct link to heading">#</a></h3><p>BuildBuddy uses a SQL connection string to specify the database it will connect to. An example string is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;mysql://user:pass@tcp(12.34.56.78)/database_name&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To connect BuildBuddy to your own MySQL server:</p><ol><li>Create a new database on your MySQL server</li><li>Create a new user with full access to that database</li><li>Put the username, password, IP address of your MySQL server, and database name into the BuildBuddy data_source connection string:</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">app:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  build_buddy_url: &quot;https://app.buildbuddy.mydomain.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  events_api_url: &quot;grpcs://events.buildbuddy.mydomain.com:1986&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cache_api_url: &quot;grpcs://cache.buildbuddy.mydomain.com:1986&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">database:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_source: &quot;mysql://user:pass@tcp(12.34.56.78)/database_name&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If using the <a href="https://github.com/buildbuddy-io/buildbuddy-helm/tree/master/charts/buildbuddy-enterprise" target="_blank" rel="noopener noreferrer">BuildBuddy Enterprise Helm charts</a>, MySQL can be configured for you using the <code>mysql.enabled</code>, <code>mysql.username</code>, and <code>mysql.password</code> values.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gcs-based-cache--object-storage--redis"></a>GCS Based Cache / Object Storage / Redis<a class="hash-link" href="#gcs-based-cache--object-storage--redis" title="Direct link to heading">#</a></h3><p>By default, BuildBuddy will cache objects and store uploaded build events on the local disk. If you want to store them in a shared durable location, like a Google Cloud Storage bucket, you can do that by configuring a GCS cache or storage backend.</p><p>If your BuildBuddy instance is running on a machine with Google Default Credentials, no credentials file will be necessary. If not, you should <a href="https://cloud.google.com/docs/authentication/getting-started" target="_blank" rel="noopener noreferrer">create a service account</a> with permissions to write to cloud storage, and download the credentials .json file.</p><p>We also recommend providing a Redis instance for improved remote build execution &amp; small file performance. This can be configured automatically using the <a href="https://github.com/buildbuddy-io/buildbuddy-helm/tree/master/charts/buildbuddy-enterprise" target="_blank" rel="noopener noreferrer">BuildBuddy Enterprise Helm charts</a> with the <code>redis.enabled</code> value.</p><p>The configuration below configures Redis &amp; GCS storage bucket to act as a storage backend and cache:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">storage:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ttl_seconds: 2592000  # 30 days</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  chunk_file_size_bytes: 3000000  # 3 MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  gcs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bucket: &quot;buildbuddy_prod_blobs&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project_id: &quot;flame-build&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    credentials_file: &quot;your_service-acct.json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cache:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  redis_target: &quot;my-redis.local:6379&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  gcs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bucket: &quot;buildbuddy_cache&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project_id: &quot;your_gcs_project_id&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    credentials_file: &quot;/path/to/your/credential/file.json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ttl_days: 30</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If using Amazon S3, you can configure your storage and cache similarly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">storage:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ttl_seconds: 2592000  # 30 days</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  chunk_file_size_bytes: 3000000  # 3 MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  aws_s3:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    region: &quot;us-west-2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bucket: &quot;buddybuild-bucket&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    credentials_profile: &quot;other-profile&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cache:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  redis_target: &quot;my-redis.local:6379&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  s3:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    region: &quot;us-west-2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bucket: &quot;buddybuild-bucket&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    credentials_profile: &quot;other-profile&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ttl_days: 30</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authentication-provider-integration"></a>Authentication Provider Integration<a class="hash-link" href="#authentication-provider-integration" title="Direct link to heading">#</a></h3><p>BuildBuddy supports OpenID Connect (OIDC) as a way of interacting with an Auth Provider like Google, Okta, or similar to authenticate your users when they log in. Configuring this is easy, below is an example of using BuildBuddy with Okta. Configuring your Auth Provider to support OIDC is outside the scope of this doc, but we’ve done it for Google, Okta, and others, and are happy to lend a helping hand if you’re stuck.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  oauth_providers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - issuer_url: &quot;https://your-custom-domain.okta.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      client_id: &quot;0aaa5twc0asdkUW123x6&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      client_secret: &quot;P8fRAYxWMmG9asd040GV2_q9MZ6esTJif1n4BubxU&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here’s another example of Google login using credentials obtained from: <a href="https://console.developers.google.com/apis/credentials" target="_blank" rel="noopener noreferrer">https://console.developers.google.com/apis/credentials</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  oauth_providers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - issuer_url: &quot;https://accounts.google.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      client_id: &quot;YOUR_CLIENT_ID.apps.googleusercontent.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      Client_secret: &quot;YOUR_CLIENT_SECRET&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="certificate-based-authentication"></a>Certificate Based Authentication<a class="hash-link" href="#certificate-based-authentication" title="Direct link to heading">#</a></h3><p>Your users can authenticate to BuildBuddy using an API key or they can use Certificate based authentication over mTLS. To configure mTLS, you must generate a new server certificate authority and key. You can do this using the <code>openssl</code> command, for example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Change these CN&#x27;s to match your BuildBuddy host name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SERVER_SUBJECT=buildbuddy.io</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PASS=$(openssl rand -base64 32) # &lt;- Save this :)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Generates ca.key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa -passout pass:${PASS} -des3 -out ca.key 4096</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Generates ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req -passin pass:${PASS} -new -x509 -days 365000 -key ca.key -out ca.crt -subj &quot;/CN=${SERVER_SUBJECT}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Generates ca.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">openssl pkcs8 -passin pass:${PASS} -topk8 -nocrypt -in ca.key -out ca.pem</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then, you can use the generated ca.csr and ca.pem files in your BuildBuddy configuration like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ssl:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_ssl: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  client_ca_cert_file: your_ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  client_ca_key_file: your_ca.pem</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="remote-build-execution"></a>Remote Build Execution<a class="hash-link" href="#remote-build-execution" title="Direct link to heading">#</a></h3><p>To enable Remote Build Execution, you&#x27;ll need to add the following to your config.yaml:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote_execution:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_remote_exec: true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You&#x27;ll also need to deploy executors to handle remote builds. The recommended way of deploying these is using our <a href="/docs/enterprise-helm">Enterprise Helm Chart</a>.</p><p>For more information on configuring on-prem RBE, see our <a href="/docs/enterprise-rbe">enterprise on-prem RBE setup docs</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="putting-it-all-together"></a>Putting It All Together<a class="hash-link" href="#putting-it-all-together" title="Direct link to heading">#</a></h3><p>Here’s what a fully-featured config.yaml looks like which includes all of the features listed above.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">app:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  build_buddy_url: &quot;https://app.buildbuddy.mydomain&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  events_api_url: &quot;grpcs://events.buildbuddy.mydomain:1986&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cache_api_url: &quot;grpcs://cache.buildbuddy.mydomain:1986&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">database:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_source: &quot;mysql://user:pass@tcp(12.34.56.78)/database_name&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">storage:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ttl_seconds: 2592000  # 30 days</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  chunk_file_size_bytes: 3000000  # 3 MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  gcs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bucket: &quot;buildbuddy_prod_blobs&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project_id: &quot;flame-build&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    credentials_file: &quot;your_service-acct.json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cache:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    gcs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      bucket: &quot;buildbuddy_cache&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      project_id: &quot;your_gcs_project_id&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      credentials_file: &quot;/path/to/your/credential/file.json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ttl_days: 30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  oauth_providers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - issuer_url: &quot;https://your-custom-domain.okta.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      client_id: &quot;0aaa5twc0asdkUW123x6&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      client_secret: &quot;P8fRAYxWMmG9asd040GV2_q9MZ6esTJif1n4BubxU&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ssl:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_ssl: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  client_ca_cert_file: your_ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  client_ca_key_file: your_ca.pem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote_execution:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_remote_exec: true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="learn-more"></a>Learn more<a class="hash-link" href="#learn-more" title="Direct link to heading">#</a></h2><p>For more information on configuring BuildBuddy, see our <a href="/docs/config">Configuration docs</a>. If you have questions please don’t hesitate to email us at <a href="mailto:setup@buildbuddy.io" target="_blank" rel="noopener noreferrer">setup@buildbuddy.io</a> or ping us on our <a href="https://slack.buildbuddy.io" target="_blank" rel="noopener noreferrer">Slack channel</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/enterprise-config.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/enterprise-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Enterprise Setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/enterprise-helm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enterprise Helm Charts »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mysql-data-storage" class="table-of-contents__link">MySQL Data Storage</a></li><li><a href="#gcs-based-cache--object-storage--redis" class="table-of-contents__link">GCS Based Cache / Object Storage / Redis</a></li><li><a href="#authentication-provider-integration" class="table-of-contents__link">Authentication Provider Integration</a></li><li><a href="#certificate-based-authentication" class="table-of-contents__link">Certificate Based Authentication</a></li><li><a href="#remote-build-execution" class="table-of-contents__link">Remote Build Execution</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link">Putting It All Together</a></li><li><a href="#learn-more" class="table-of-contents__link">Learn more</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/"><img src="/img/logo_white.svg" class="footer-logo"></a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Get Started</a></li><li class="footer__item"><a href="https://docs.buildbuddy.io/docs/introduction/" target="_self" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/pricing" target="_self" rel="noopener noreferrer" class="footer__link-item">Pricing</a></li><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Login</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/privacy" target="_self" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/terms" target="_self" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.buildbuddy.io/blog/" target="_self" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io/buildbuddy/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an Issue</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/contact" target="_self" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/team" target="_self" rel="noopener noreferrer" class="footer__link-item">Our Team</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/careers" target="_self" rel="noopener noreferrer" class="footer__link-item">Careers</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Security</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.buildbuddy.io/security" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Overview</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-updates" target="_self" rel="noopener noreferrer" class="footer__link-item">Security Updates</a></li><li class="footer__item"><a href="https://www.buildbuddy.io/security-vulnerability-report" target="_self" rel="noopener noreferrer" class="footer__link-item">Report a Vulnerability</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Connect</h4><ul class="footer__items"><li class="footer__item"><a href="http://slack.buildbuddy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/buildbuddy_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="http://linkedin.com/company/buildbuddy" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2021 Iteration, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.89fe95bd.js"></script>
<script src="/assets/js/main.2a9fcea6.js"></script>
</body>
</html>