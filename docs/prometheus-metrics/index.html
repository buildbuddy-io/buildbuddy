<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-prometheus-metrics">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Prometheus Metrics | BuildBuddy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.buildbuddy.io/img/preview.png"><meta data-rh="true" name="twitter:image" content="https://www.buildbuddy.io/img/preview.png"><meta data-rh="true" property="og:url" content="https://www.buildbuddy.io/docs/prometheus-metrics"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:description" content="BuildBuddy provides enterprise features for Bazel — the open source build system that allows you to build and test software 10x faster."><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Prometheus Metrics | BuildBuddy"><meta data-rh="true" name="description" content="BuildBuddy exposes Prometheus metrics that allow monitoring the"><meta data-rh="true" property="og:description" content="BuildBuddy exposes Prometheus metrics that allow monitoring the"><link data-rh="true" rel="icon" href="/img/favicon_black.svg"><link data-rh="true" rel="canonical" href="https://www.buildbuddy.io/docs/prometheus-metrics"><link data-rh="true" rel="alternate" href="https://www.buildbuddy.io/docs/prometheus-metrics" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.buildbuddy.io/docs/prometheus-metrics" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BuildBuddy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BuildBuddy Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-156160991-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.fb5a46cf.css">
<link rel="preload" href="/assets/js/runtime~main.a9cd77ce.js" as="script">
<link rel="preload" href="/assets/js/main.72c2c97b.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="BuildBuddy Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32px" width="191px"><img src="/img/logo_white.svg" alt="BuildBuddy Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32px" width="191px"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/features">Features</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ui">Build &amp; Test UI</a></li><li><a class="dropdown__link" href="/remote-execution">Remote Execution</a></li><li><a class="dropdown__link" href="/remote-cache">Remote Cache</a></li><li><a class="dropdown__link" href="/workflows">Workflows</a></li><li><a class="dropdown__link" href="/cli">BuildBuddy CLI</a></li><li><a class="dropdown__link" href="/plugins">Plugin Library</a></li></ul></div><a class="navbar__item navbar__link" target="_self" href="/pricing">Pricing</a><a href="https://github.com/buildbuddy-io/buildbuddy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/introduction/">Docs</a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link sign-up">Get Started<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/introduction">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cloud">Cloud Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/on-prem">On-prem Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/contributing">Contributing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/guides">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides">Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide-auth">Authentication Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide-metadata">Build Metadata Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/cache-encryption-keys">Cache</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache-encryption-keys">Customer-managed Encryption Keys</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/remote-build-execution">Remote Build Execution</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/remote-build-execution">Remote Build Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rbe-setup">Remote Build Execution Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rbe-platforms">RBE Platforms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/secrets">RBE Secrets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rbe-microvms">RBE with MicroVMs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rbe-github-actions">RBE with GitHub Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rbe-pools">RBE Executor Pools</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/workflows-introduction">Workflows (CI)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workflows-introduction">Workflows introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workflows-setup">Workflows setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workflows-config">Workflows configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/cli">CLI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli">CLI Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli-plugins">CLI Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/troubleshooting">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting-rbe">RBE Failures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/troubleshooting-slow-upload">Slow Uploads</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/enterprise">Enterprise</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise">BuildBuddy Enterprise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-setup">Enterprise On-prem Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-config">Enterprise Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-helm">Enterprise Helm Charts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-rbe">Enterprise RBE Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-mac-rbe">Enterprise Mac RBE Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enterprise-api">Enterprise API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/prometheus-metrics">Monitoring</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/prometheus-metrics">Prometheus Metrics</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/architecture-overview">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-overview">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-data-storage">Data Storage Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-build-event-write">Life of a Build Event Write</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-build-event-read">Life of a Build Event Read</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-cache-write">Life of a Cache Write</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-cache-read">Life of a Cache Read</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-remote-execution">Life of a Remote Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture-self-hosted-executor">Life of a Self Hosted Executor</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/config">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-samples">Samples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-app">App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-storage">Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-cache">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-github">GitHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-ssl">SSL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-auth">Auth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-integrations">Integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-org">Org</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-rbe">RBE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-misc">Misc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-api">API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-flags">Flags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config-all-options">All Options</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Monitoring</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Prometheus Metrics</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Prometheus Metrics</h1></header><p>BuildBuddy exposes <a href="https://prometheus.io" target="_blank" rel="noopener noreferrer">Prometheus</a> metrics that allow monitoring the
<a href="https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/" target="_blank" rel="noopener noreferrer">four golden signals</a>:
latency, traffic, errors, and saturation.</p><p>Prometheus metrics are exposed under the path <code>metrics/</code> on port <code>9090</code> by default.</p><p>To view these metrics in a live-updating dashboard, we recommend using a tool
like <a href="https://grafana.com" target="_blank" rel="noopener noreferrer">Grafana</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="invocation-build-event-metrics">Invocation build event metrics<a href="#invocation-build-event-metrics" class="hash-link" aria-label="Direct link to Invocation build event metrics" title="Direct link to Invocation build event metrics">​</a></h2><p>All invocation metrics are recorded at the <em>end</em> of each invocation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_count-counter"><strong><code>buildbuddy_invocation_count</code></strong> (Counter)<a href="#buildbuddy_invocation_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_invocation_count-counter" title="Direct link to buildbuddy_invocation_count-counter">​</a></h3><p>The total number of invocations whose logs were uploaded to BuildBuddy.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels">Labels<a href="#labels" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>invocation_status</strong>: Invocation status: <code>success</code>, <code>failure</code>, <code>disconnected</code>, or <code>unknown</code>.</li><li><strong>bazel_exit_code</strong>: Exit code of a completed bazel command</li><li><strong>bazel_command</strong>: Command provided to the Bazel daemon: <code>run</code>, <code>test</code>, <code>build</code>, <code>coverage</code>, <code>mobile-install</code>, ...</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Number of invocations per second by invocation status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">invocation_status</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Invocation success rate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_count</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">invocation_status</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;success&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_duration_usec-histogram"><strong><code>buildbuddy_invocation_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_invocation_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_invocation_duration_usec-histogram" title="Direct link to buildbuddy_invocation_duration_usec-histogram">​</a></h3><p>The total duration of each invocation, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-1">Labels<a href="#labels-1" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>invocation_status</strong>: Invocation status: <code>success</code>, <code>failure</code>, <code>disconnected</code>, or <code>unknown</code>.</li><li><strong>bazel_command</strong>: Command provided to the Bazel daemon: <code>run</code>, <code>test</code>, <code>build</code>, <code>coverage</code>, <code>mobile-install</code>, ...</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_duration_usec_exported-histogram"><strong><code>buildbuddy_invocation_duration_usec_exported</code></strong> (Histogram)<a href="#buildbuddy_invocation_duration_usec_exported-histogram" class="hash-link" aria-label="Direct link to buildbuddy_invocation_duration_usec_exported-histogram" title="Direct link to buildbuddy_invocation_duration_usec_exported-histogram">​</a></h3><p>The total duration of each invocation, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-2">Labels<a href="#labels-2" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>invocation_status</strong>: Invocation status: <code>success</code>, <code>failure</code>, <code>disconnected</code>, or <code>unknown</code>.</li><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median invocation duration in the past 5 minutes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_duration_usec_bucket</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_build_event_count-counter"><strong><code>buildbuddy_invocation_build_event_count</code></strong> (Counter)<a href="#buildbuddy_invocation_build_event_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_invocation_build_event_count-counter" title="Direct link to buildbuddy_invocation_build_event_count-counter">​</a></h3><p>Number of <a href="https://docs.bazel.build/versions/master/build-event-protocol.html" target="_blank" rel="noopener noreferrer">build events</a> uploaded to BuildBuddy.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-3">Labels<a href="#labels-3" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-2">Examples<a href="#examples-2" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Build events uploaded per second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_build_event_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Approximate error rate of build event upload handler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_build_event_count</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">status</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;0&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_invocation_build_event_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_stats_recorder_workers-gauge"><strong><code>buildbuddy_invocation_stats_recorder_workers</code></strong> (Gauge)<a href="#buildbuddy_invocation_stats_recorder_workers-gauge" class="hash-link" aria-label="Direct link to buildbuddy_invocation_stats_recorder_workers-gauge" title="Direct link to buildbuddy_invocation_stats_recorder_workers-gauge">​</a></h3><p>Number of invocation stats recorder workers currently running.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_stats_recorder_duration_usec-histogram"><strong><code>buildbuddy_invocation_stats_recorder_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_invocation_stats_recorder_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_invocation_stats_recorder_duration_usec-histogram" title="Direct link to buildbuddy_invocation_stats_recorder_duration_usec-histogram">​</a></h3><p>How long it took to finalize an invocation&#x27;s stats, in <strong>microseconds</strong>.</p><p>This includes the time required to wait for all BuildBuddy apps to flush their local metrics to Redis (if applicable) and then record the metrics to the DB.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_webhook_invocation_lookup_workers-gauge"><strong><code>buildbuddy_invocation_webhook_invocation_lookup_workers</code></strong> (Gauge)<a href="#buildbuddy_invocation_webhook_invocation_lookup_workers-gauge" class="hash-link" aria-label="Direct link to buildbuddy_invocation_webhook_invocation_lookup_workers-gauge" title="Direct link to buildbuddy_invocation_webhook_invocation_lookup_workers-gauge">​</a></h3><p>Number of webhook invocation lookup workers currently running.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram"><strong><code>buildbuddy_invocation_webhook_invocation_lookup_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram" title="Direct link to buildbuddy_invocation_webhook_invocation_lookup_duration_usec-histogram">​</a></h3><p>How long it took to lookup an invocation before posting to the webhook, in <strong>microseconds</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_webhook_notify_workers-gauge"><strong><code>buildbuddy_invocation_webhook_notify_workers</code></strong> (Gauge)<a href="#buildbuddy_invocation_webhook_notify_workers-gauge" class="hash-link" aria-label="Direct link to buildbuddy_invocation_webhook_notify_workers-gauge" title="Direct link to buildbuddy_invocation_webhook_notify_workers-gauge">​</a></h3><p>Number of webhook notify workers currently running.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_invocation_webhook_notify_duration_usec-histogram"><strong><code>buildbuddy_invocation_webhook_notify_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_invocation_webhook_notify_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_invocation_webhook_notify_duration_usec-histogram" title="Direct link to buildbuddy_invocation_webhook_notify_duration_usec-histogram">​</a></h3><p>How long it took to post an invocation proto to the webhook, in <strong>microseconds</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remote-cache-metrics">Remote cache metrics<a href="#remote-cache-metrics" class="hash-link" aria-label="Direct link to Remote cache metrics" title="Direct link to Remote cache metrics">​</a></h2><p>NOTE: Cache metrics are recorded at the end of each invocation,
which means that these metrics provide <em>approximate</em> real-time signals.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_events-counter"><strong><code>buildbuddy_remote_cache_events</code></strong> (Counter)<a href="#buildbuddy_remote_cache_events-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_events-counter" title="Direct link to buildbuddy_remote_cache_events-counter">​</a></h3><p>Number of cache events handled.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-4">Labels<a href="#labels-4" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>cache_event_type</strong>: Cache event type: <code>hit</code>, <code>miss</code>, or <code>upload</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_download_size_bytes-histogram"><strong><code>buildbuddy_remote_cache_download_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_download_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_download_size_bytes-histogram" title="Direct link to buildbuddy_remote_cache_download_size_bytes-histogram">​</a></h3><p>Number of bytes downloaded from the remote cache in each download.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total downloaded bytes and the <strong><code>_count</code></strong> suffix to get the number of downloaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-5">Labels<a href="#labels-5" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-3">Examples<a href="#examples-3" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Cache download rate (bytes per second)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_cache_download_size_bytes_sum</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_download_duration_usec-histogram"><strong><code>buildbuddy_remote_cache_download_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_download_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_download_duration_usec-histogram" title="Direct link to buildbuddy_remote_cache_download_duration_usec-histogram">​</a></h3><p>Download duration for each file downloaded from the remote cache, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-6">Labels<a href="#labels-6" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-4">Examples<a href="#examples-4" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median download duration for content-addressable store (CAS)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_cache_download_duration_usec</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">cache_type</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;cas&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_upload_size_bytes-histogram"><strong><code>buildbuddy_remote_cache_upload_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_upload_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_upload_size_bytes-histogram" title="Direct link to buildbuddy_remote_cache_upload_size_bytes-histogram">​</a></h3><p>Number of bytes uploaded to the remote cache in each upload.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total uploaded bytes and the <strong><code>_count</code></strong> suffix to get the number of uploaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-7">Labels<a href="#labels-7" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-5">Examples<a href="#examples-5" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Cache upload rate (bytes per second)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_cache_upload_size_bytes_sum</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_upload_duration_usec-histogram"><strong><code>buildbuddy_remote_cache_upload_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_upload_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_upload_duration_usec-histogram" title="Direct link to buildbuddy_remote_cache_upload_duration_usec-histogram">​</a></h3><p>Upload duration for each file uploaded to the remote cache, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-8">Labels<a href="#labels-8" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-6">Examples<a href="#examples-6" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median upload duration for content-addressable store (CAS)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_cache_upload_duration_usec</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">cache_type</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;cas&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_last_eviction_age_usec</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_last_eviction_age_usec-gauge">​</a></h3><p>The age of the item most recently evicted from the cache, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-9">Labels<a href="#labels-9" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram"><strong><code>buildbuddy_remote_cache_disk_cache_eviction_age_msec</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram" title="Direct link to buildbuddy_remote_cache_disk_cache_eviction_age_msec-histogram">​</a></h3><p>Age of items evicted from the cache, in <strong>milliseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-10">Labels<a href="#labels-10" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_num_evictions-counter"><strong><code>buildbuddy_remote_cache_disk_cache_num_evictions</code></strong> (Counter)<a href="#buildbuddy_remote_cache_disk_cache_num_evictions-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_num_evictions-counter" title="Direct link to buildbuddy_remote_cache_disk_cache_num_evictions-counter">​</a></h3><p>Number of items evicted.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-11">Labels<a href="#labels-11" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_partition_size_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_partition_size_bytes-gauge">​</a></h3><p>Number of bytes in the partition.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-12">Labels<a href="#labels-12" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_partition_capacity_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_partition_capacity_bytes-gauge">​</a></h3><p>Number of bytes in the partition.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-13">Labels<a href="#labels-13" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_partition_num_items-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_partition_num_items</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_partition_num_items-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_partition_num_items-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_partition_num_items-gauge">​</a></h3><p>Number of items in the partition.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-14">Labels<a href="#labels-14" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_duplicate_writes-counter"><strong><code>buildbuddy_remote_cache_disk_cache_duplicate_writes</code></strong> (Counter)<a href="#buildbuddy_remote_cache_disk_cache_duplicate_writes-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_duplicate_writes-counter" title="Direct link to buildbuddy_remote_cache_disk_cache_duplicate_writes-counter">​</a></h3><p>Number of writes for digests that already exist.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-15">Labels<a href="#labels-15" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram"><strong><code>buildbuddy_remote_cache_disk_cache_added_file_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram" title="Direct link to buildbuddy_remote_cache_disk_cache_added_file_size_bytes-histogram">​</a></h3><p>Size of artifacts added to the file cache, in <strong>bytes</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-16">Labels<a href="#labels-16" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_filesystem_total_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_filesystem_total_bytes-gauge">​</a></h3><p>Total size of the underlying filesystem.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-17">Labels<a href="#labels-17" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge"><strong><code>buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge" title="Direct link to buildbuddy_remote_cache_disk_cache_filesystem_avail_bytes-gauge">​</a></h3><p>Available bytes in the underlying filesystem.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-18">Labels<a href="#labels-18" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-7">Examples<a href="#examples-7" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Total number of duplicate writes.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_cache_duplicate_writes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter"><strong><code>buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes</code></strong> (Counter)<a href="#buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter" title="Direct link to buildbuddy_remote_cache_disk_cache_duplicate_writes_bytes-counter">​</a></h3><p>Number of bytes written that already existed in the cache.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-19">Labels<a href="#labels-19" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_migration_not_found_error_count-counter"><strong><code>buildbuddy_remote_cache_migration_not_found_error_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_migration_not_found_error_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_migration_not_found_error_count-counter" title="Direct link to buildbuddy_remote_cache_migration_not_found_error_count-counter">​</a></h3><p>Number of not found errors from the destination cache during a cache migration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-20">Labels<a href="#labels-20" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>type</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_migration_double_read_hit_count-counter"><strong><code>buildbuddy_remote_cache_migration_double_read_hit_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_migration_double_read_hit_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_migration_double_read_hit_count-counter" title="Direct link to buildbuddy_remote_cache_migration_double_read_hit_count-counter">​</a></h3><p>Number of double reads where the source and destination caches hold the same digests during a cache migration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-21">Labels<a href="#labels-21" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>type</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_migration_copy_chan_size-gauge"><strong><code>buildbuddy_remote_cache_migration_copy_chan_size</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_migration_copy_chan_size-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_migration_copy_chan_size-gauge" title="Direct link to buildbuddy_remote_cache_migration_copy_chan_size-gauge">​</a></h3><p>Number of digests queued to be copied during a cache migration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_migration_bytes_copied-counter"><strong><code>buildbuddy_remote_cache_migration_bytes_copied</code></strong> (Counter)<a href="#buildbuddy_remote_cache_migration_bytes_copied-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_migration_bytes_copied-counter" title="Direct link to buildbuddy_remote_cache_migration_bytes_copied-counter">​</a></h3><p>Number of bytes copied from the source to destination cache during a cache migration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-22">Labels<a href="#labels-22" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_migration_blobs_copied-counter"><strong><code>buildbuddy_remote_cache_migration_blobs_copied</code></strong> (Counter)<a href="#buildbuddy_remote_cache_migration_blobs_copied-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_migration_blobs_copied-counter" title="Direct link to buildbuddy_remote_cache_migration_blobs_copied-counter">​</a></h3><p>Number of blobs copied from the source to destination cache during a cache migration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-23">Labels<a href="#labels-23" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remote-execution-metrics">Remote execution metrics<a href="#remote-execution-metrics" class="hash-link" aria-label="Direct link to Remote execution metrics" title="Direct link to Remote execution metrics">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_count-counter"><strong><code>buildbuddy_remote_execution_count</code></strong> (Counter)<a href="#buildbuddy_remote_execution_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_count-counter" title="Direct link to buildbuddy_remote_execution_count-counter">​</a></h3><p>Number of actions executed remotely.</p><p>This only includes actions which reached the execution phase. If an action fails before execution (for example, if it fails authentication) then this metric is not incremented.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-24">Labels<a href="#labels-24" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>exit_code</strong>: Process exit code of an executed action.</li><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a> in human-readable format, such as &quot;OK&quot; or &quot;NotFound&quot;.</li><li><strong>isolation</strong>: Effective workload isolation type used for an executed task, such as &quot;docker&quot;, &quot;podman&quot;, &quot;firecracker&quot;, or &quot;none&quot;.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-8">Examples<a href="#examples-8" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Total number of actions executed per second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_tasks_started_count-counter"><strong><code>buildbuddy_remote_execution_tasks_started_count</code></strong> (Counter)<a href="#buildbuddy_remote_execution_tasks_started_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_tasks_started_count-counter" title="Direct link to buildbuddy_remote_execution_tasks_started_count-counter">​</a></h3><p>Number of tasks started remotely, but not necessarily completed.</p><p>Includes retry attempts of the same task.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram"><strong><code>buildbuddy_remote_execution_executed_action_metadata_durations_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram" title="Direct link to buildbuddy_remote_execution_executed_action_metadata_durations_usec-histogram">​</a></h3><p>Time spent in each stage of action execution, in <strong>microseconds</strong>.</p><p>Queries should filter or group by the <code>stage</code> label, taking care not to aggregate different stages.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-25">Labels<a href="#labels-25" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>stage</strong>: Executed action stage. Action execution is split into stages corresponding to the timestamps defined in <a href="https://github.com/buildbuddy-io/buildbuddy/blob/fb2e3a74083d82797926654409dc3858089d260b/proto/remote_execution.proto#L797" target="_blank" rel="noopener noreferrer"><code>ExecutedActionMetadata</code></a>: <code>queued</code>, <code>input_fetch</code>, <code>execution</code>, and <code>output_upload</code>. An additional stage, <code>worker</code>, includes all stages during which a worker is handling the action, which is all stages except the <code>queued</code> stage.</li><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-9">Examples<a href="#examples-9" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median duration of all command stages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token vector-match"> </span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">stage</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># p90 duration of just the command execution stage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_executed_action_metadata_durations_usec_bucket</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">stage</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;execution&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_task_size_read_requests-counter"><strong><code>buildbuddy_remote_execution_task_size_read_requests</code></strong> (Counter)<a href="#buildbuddy_remote_execution_task_size_read_requests-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_task_size_read_requests-counter" title="Direct link to buildbuddy_remote_execution_task_size_read_requests-counter">​</a></h3><p>Number of read requests to the task sizer, which estimates action resource usage based on historical execution stats.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-26">Labels<a href="#labels-26" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status of the task size read request: <code>hit</code>, <code>miss</code>, or <code>error</code>.</li><li><strong>isolation</strong>: Effective workload isolation type used for an executed task, such as &quot;docker&quot;, &quot;podman&quot;, &quot;firecracker&quot;, or &quot;none&quot;.</li><li><strong>os</strong>: OS associated with the request.</li><li><strong>arch</strong>: CPU architecture associated with the request.</li><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_task_size_write_requests-counter"><strong><code>buildbuddy_remote_execution_task_size_write_requests</code></strong> (Counter)<a href="#buildbuddy_remote_execution_task_size_write_requests-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_task_size_write_requests-counter" title="Direct link to buildbuddy_remote_execution_task_size_write_requests-counter">​</a></h3><p>Number of write requests to the task sizer, which estimates action resource usage based on historical execution stats.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-27">Labels<a href="#labels-27" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status of the task size write request: <code>ok</code>, <code>missing_stats</code> or <code>error</code>.</li><li><strong>isolation</strong>: Effective workload isolation type used for an executed task, such as &quot;docker&quot;, &quot;podman&quot;, &quot;firecracker&quot;, or &quot;none&quot;.</li><li><strong>os</strong>: OS associated with the request.</li><li><strong>arch</strong>: CPU architecture associated with the request.</li><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram"><strong><code>buildbuddy_remote_execution_task_size_prediction_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram" title="Direct link to buildbuddy_remote_execution_task_size_prediction_duration_usec-histogram">​</a></h3><p>Task size prediction model request duration in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-28">Labels<a href="#labels-28" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a> in human-readable format, such as &quot;OK&quot; or &quot;NotFound&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_waiting_execution_result-gauge"><strong><code>buildbuddy_remote_execution_waiting_execution_result</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_waiting_execution_result-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_waiting_execution_result-gauge" title="Direct link to buildbuddy_remote_execution_waiting_execution_result-gauge">​</a></h3><p>Number of execution requests for which the client is actively waiting for results.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-29">Labels<a href="#labels-29" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-10">Examples<a href="#examples-10" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Total number of execution requests with client waiting for result.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_waiting_execution_result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_requests-counter"><strong><code>buildbuddy_remote_execution_requests</code></strong> (Counter)<a href="#buildbuddy_remote_execution_requests-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_requests-counter" title="Direct link to buildbuddy_remote_execution_requests-counter">​</a></h3><p>Number of execution requests received.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-30">Labels<a href="#labels-30" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li><li><strong>os</strong>: OS associated with the request.</li><li><strong>arch</strong>: CPU architecture associated with the request.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_executor_registration_count-counter"><strong><code>buildbuddy_remote_execution_executor_registration_count</code></strong> (Counter)<a href="#buildbuddy_remote_execution_executor_registration_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_executor_registration_count-counter" title="Direct link to buildbuddy_remote_execution_executor_registration_count-counter">​</a></h3><p>Number of executor registrations on the scheduler.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-31">Labels<a href="#labels-31" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>version</strong>: Binary version. Example: <code>v2.0.0</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-11">Examples<a href="#examples-11" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Rate of new execution requests by OS/Arch.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_requests</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">1m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">os</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token vector-match"> </span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">arch</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_merged_actions-counter"><strong><code>buildbuddy_remote_execution_merged_actions</code></strong> (Counter)<a href="#buildbuddy_remote_execution_merged_actions-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_merged_actions-counter" title="Direct link to buildbuddy_remote_execution_merged_actions-counter">​</a></h3><p>Number of identical execution requests that have been merged.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-32">Labels<a href="#labels-32" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-12">Examples<a href="#examples-12" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Rate of merged actions by group.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_merged_actions</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">1m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">group_id</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_queue_length-gauge"><strong><code>buildbuddy_remote_execution_queue_length</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_queue_length-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_queue_length-gauge" title="Direct link to buildbuddy_remote_execution_queue_length-gauge">​</a></h3><p>Number of actions currently waiting in the executor queue.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-33">Labels<a href="#labels-33" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-13">Examples<a href="#examples-13" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median queue length across all executors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildbuddy_remote_execution_queue_length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_tasks_executing-gauge"><strong><code>buildbuddy_remote_execution_tasks_executing</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_tasks_executing-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_tasks_executing-gauge" title="Direct link to buildbuddy_remote_execution_tasks_executing-gauge">​</a></h3><p>Number of tasks currently being executed by the executor.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-34">Labels<a href="#labels-34" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>stage</strong>: Executed action stage. Action execution is split into stages corresponding to the timestamps defined in <a href="https://github.com/buildbuddy-io/buildbuddy/blob/fb2e3a74083d82797926654409dc3858089d260b/proto/remote_execution.proto#L797" target="_blank" rel="noopener noreferrer"><code>ExecutedActionMetadata</code></a>: <code>queued</code>, <code>input_fetch</code>, <code>execution</code>, and <code>output_upload</code>. An additional stage, <code>worker</code>, includes all stages during which a worker is handling the action, which is all stages except the <code>queued</code> stage.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-14">Examples<a href="#examples-14" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Fraction of idle executors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">count_values</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buildbuddy_remote_execution_tasks_executing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_remote_execution_tasks_executing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_assigned_ram_bytes-gauge"><strong><code>buildbuddy_remote_execution_assigned_ram_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_assigned_ram_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_assigned_ram_bytes-gauge" title="Direct link to buildbuddy_remote_execution_assigned_ram_bytes-gauge">​</a></h3><p>Estimated RAM on the executor that is currently allocated for task execution, in <strong>bytes</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_assignable_ram_bytes-gauge"><strong><code>buildbuddy_remote_execution_assignable_ram_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_assignable_ram_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_assignable_ram_bytes-gauge" title="Direct link to buildbuddy_remote_execution_assignable_ram_bytes-gauge">​</a></h3><p>Maximum total RAM that can be allocated for task execution, in <strong>bytes</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_assigned_milli_cpu-gauge"><strong><code>buildbuddy_remote_execution_assigned_milli_cpu</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_assigned_milli_cpu-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_assigned_milli_cpu-gauge" title="Direct link to buildbuddy_remote_execution_assigned_milli_cpu-gauge">​</a></h3><p>Estimated CPU time on the executor that is currently allocated for task execution, in <strong>milliCPU</strong> (CPU-milliseconds per second).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_assignable_milli_cpu-gauge"><strong><code>buildbuddy_remote_execution_assignable_milli_cpu</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_assignable_milli_cpu-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_assignable_milli_cpu-gauge" title="Direct link to buildbuddy_remote_execution_assignable_milli_cpu-gauge">​</a></h3><p>Maximum total CPU time on the executor that can be allocated for task execution, in <strong>milliCPU</strong> (CPU-milliseconds per second).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_memory_usage_bytes-gauge"><strong><code>buildbuddy_remote_execution_memory_usage_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_memory_usage_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_memory_usage_bytes-gauge" title="Direct link to buildbuddy_remote_execution_memory_usage_bytes-gauge">​</a></h3><p>Current total task memory usage in <strong>bytes</strong>.</p><p>This only accounts for tasks which are actively executing. To see memory usage of pooled runners, sum with runner pool memory usage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-15">Examples<a href="#examples-15" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Total approximate memory usage of active and pooled runners,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># grouped by executor pod.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">pod_name</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  buildbuddy_remote_execution_memory_usage_bytes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> buildbuddy_remote_execution_runner_pool_memory_usage_bytes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_peak_memory_usage_bytes-gauge"><strong><code>buildbuddy_remote_execution_peak_memory_usage_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_peak_memory_usage_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_peak_memory_usage_bytes-gauge" title="Direct link to buildbuddy_remote_execution_peak_memory_usage_bytes-gauge">​</a></h3><p>Current total peak memory usage in <strong>bytes</strong>.</p><p>This is the sum of the peak memory usage for all tasks currently executing. It is not a very useful metric on its own, and is mainly intended for comparison with <code>assigned_ram_bytes</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_used_milli_cpu-counter"><strong><code>buildbuddy_remote_execution_used_milli_cpu</code></strong> (Counter)<a href="#buildbuddy_remote_execution_used_milli_cpu-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_used_milli_cpu-counter" title="Direct link to buildbuddy_remote_execution_used_milli_cpu-counter">​</a></h3><p>Approximate cumulative CPU usage of executed tasks, in <strong>CPU-milliseconds</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge"><strong><code>buildbuddy_remote_execution_cpu_utilization_milli_cpu</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge" title="Direct link to buildbuddy_remote_execution_cpu_utilization_milli_cpu-gauge">​</a></h3><p>Approximate current CPU utilization of tasks executing, in <strong>milli-CPU</strong> (CPU-milliseconds per second).</p><p>This allows for much higher granularity than using a <code>rate()</code> on <code>used_milli_cpu</code> metric.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_download_count-histogram"><strong><code>buildbuddy_remote_execution_file_download_count</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_download_count-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_download_count-histogram" title="Direct link to buildbuddy_remote_execution_file_download_count-histogram">​</a></h3><p>Number of files downloaded during remote execution.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_download_size_bytes-histogram"><strong><code>buildbuddy_remote_execution_file_download_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_download_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_download_size_bytes-histogram" title="Direct link to buildbuddy_remote_execution_file_download_size_bytes-histogram">​</a></h3><p>Total number of bytes downloaded during remote execution.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_download_duration_usec-histogram"><strong><code>buildbuddy_remote_execution_file_download_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_download_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_download_duration_usec-histogram" title="Direct link to buildbuddy_remote_execution_file_download_duration_usec-histogram">​</a></h3><p>Per-file download duration during remote execution, in <strong>microseconds</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_upload_count-histogram"><strong><code>buildbuddy_remote_execution_file_upload_count</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_upload_count-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_upload_count-histogram" title="Direct link to buildbuddy_remote_execution_file_upload_count-histogram">​</a></h3><p>Number of files uploaded during remote execution.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_upload_size_bytes-histogram"><strong><code>buildbuddy_remote_execution_file_upload_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_upload_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_upload_size_bytes-histogram" title="Direct link to buildbuddy_remote_execution_file_upload_size_bytes-histogram">​</a></h3><p>Total number of bytes uploaded during remote execution.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_upload_duration_usec-histogram"><strong><code>buildbuddy_remote_execution_file_upload_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_upload_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_upload_duration_usec-histogram" title="Direct link to buildbuddy_remote_execution_file_upload_duration_usec-histogram">​</a></h3><p>Per-file upload duration during remote execution, in <strong>microseconds</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_recycle_runner_requests-counter"><strong><code>buildbuddy_remote_execution_recycle_runner_requests</code></strong> (Counter)<a href="#buildbuddy_remote_execution_recycle_runner_requests-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_recycle_runner_requests-counter" title="Direct link to buildbuddy_remote_execution_recycle_runner_requests-counter">​</a></h3><p>Number of execution requests with runner recycling enabled (via the platform property <code>recycle-runner=true</code>).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-35">Labels<a href="#labels-35" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status of the recycle runner request: <code>hit</code> if the executor assigned a recycled runner to the action; <code>miss</code> otherwise.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_runner_pool_count-gauge"><strong><code>buildbuddy_remote_execution_runner_pool_count</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_runner_pool_count-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_runner_pool_count-gauge" title="Direct link to buildbuddy_remote_execution_runner_pool_count-gauge">​</a></h3><p>Number of command runners that are currently pooled (and available for recycling).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_runner_pool_evictions-counter"><strong><code>buildbuddy_remote_execution_runner_pool_evictions</code></strong> (Counter)<a href="#buildbuddy_remote_execution_runner_pool_evictions-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_runner_pool_evictions-counter" title="Direct link to buildbuddy_remote_execution_runner_pool_evictions-counter">​</a></h3><p>Number of command runners removed from the pool to make room for other runners.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter"><strong><code>buildbuddy_remote_execution_runner_pool_failed_recycle_attempts</code></strong> (Counter)<a href="#buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter" title="Direct link to buildbuddy_remote_execution_runner_pool_failed_recycle_attempts-counter">​</a></h3><p>Number of failed attempts to add runners to the pool.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-36">Labels<a href="#labels-36" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>reason</strong>: Reason for a runner not being added to the runner pool.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge"><strong><code>buildbuddy_remote_execution_runner_pool_memory_usage_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge" title="Direct link to buildbuddy_remote_execution_runner_pool_memory_usage_bytes-gauge">​</a></h3><p>Total memory usage of pooled command runners, in <strong>bytes</strong>.</p><p>Currently only supported for Docker-based executors.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge"><strong><code>buildbuddy_remote_execution_runner_pool_disk_usage_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge" title="Direct link to buildbuddy_remote_execution_runner_pool_disk_usage_bytes-gauge">​</a></h3><p>Total disk usage of pooled command runners, in <strong>bytes</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_cache_requests-counter"><strong><code>buildbuddy_remote_execution_file_cache_requests</code></strong> (Counter)<a href="#buildbuddy_remote_execution_file_cache_requests-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_cache_requests-counter" title="Direct link to buildbuddy_remote_execution_file_cache_requests-counter">​</a></h3><p>Number of local executor file cache requests.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-37">Labels<a href="#labels-37" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status of the file cache request: <code>hit</code> if found in cache, <code>miss</code> otherwise.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge"><strong><code>buildbuddy_remote_execution_file_cache_last_eviction_age_usec</code></strong> (Gauge)<a href="#buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge" title="Direct link to buildbuddy_remote_execution_file_cache_last_eviction_age_usec-gauge">​</a></h3><p>Age of the last entry evicted from the executor&#x27;s local file cache (relative to when it was added to the cache), in <strong>microseconds</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram"><strong><code>buildbuddy_remote_execution_file_cache_added_file_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram" title="Direct link to buildbuddy_remote_execution_file_cache_added_file_size_bytes-histogram">​</a></h3><p>Size of artifacts added to the file cache, in <strong>bytes</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blobstore-metrics">Blobstore metrics<a href="#blobstore-metrics" class="hash-link" aria-label="Direct link to Blobstore metrics" title="Direct link to Blobstore metrics">​</a></h2><p>&quot;Blobstore&quot; refers to the backing storage that BuildBuddy uses to
store objects in the cache, as well as certain pieces of temporary
data (such as invocation events while an invocation is in progress).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_read_count-counter"><strong><code>buildbuddy_blobstore_read_count</code></strong> (Counter)<a href="#buildbuddy_blobstore_read_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_read_count-counter" title="Direct link to buildbuddy_blobstore_read_count-counter">​</a></h3><p>Number of files read from the blobstore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-38">Labels<a href="#labels-38" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_read_size_bytes-histogram"><strong><code>buildbuddy_blobstore_read_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_blobstore_read_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_read_size_bytes-histogram" title="Direct link to buildbuddy_blobstore_read_size_bytes-histogram">​</a></h3><p>Number of bytes read from the blobstore per file.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-39">Labels<a href="#labels-39" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Bytes downloaded per second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_blobstore_read_size_bytes</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_read_duration_usec-histogram"><strong><code>buildbuddy_blobstore_read_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_blobstore_read_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_read_duration_usec-histogram" title="Direct link to buildbuddy_blobstore_read_duration_usec-histogram">​</a></h3><p>Duration per blobstore file read, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-40">Labels<a href="#labels-40" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_write_count-counter"><strong><code>buildbuddy_blobstore_write_count</code></strong> (Counter)<a href="#buildbuddy_blobstore_write_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_write_count-counter" title="Direct link to buildbuddy_blobstore_write_count-counter">​</a></h3><p>Number of files written to the blobstore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-41">Labels<a href="#labels-41" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Bytes uploaded per second</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_blobstore_write_size_bytes</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_write_size_bytes-histogram"><strong><code>buildbuddy_blobstore_write_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_blobstore_write_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_write_size_bytes-histogram" title="Direct link to buildbuddy_blobstore_write_size_bytes-histogram">​</a></h3><p>Number of bytes written to the blobstore per file.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-42">Labels<a href="#labels-42" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_write_duration_usec-histogram"><strong><code>buildbuddy_blobstore_write_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_blobstore_write_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_write_duration_usec-histogram" title="Direct link to buildbuddy_blobstore_write_duration_usec-histogram">​</a></h3><p>Duration per blobstore file write, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-43">Labels<a href="#labels-43" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_delete_count-counter"><strong><code>buildbuddy_blobstore_delete_count</code></strong> (Counter)<a href="#buildbuddy_blobstore_delete_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_delete_count-counter" title="Direct link to buildbuddy_blobstore_delete_count-counter">​</a></h3><p>Number of files deleted from the blobstore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-44">Labels<a href="#labels-44" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_blobstore_delete_duration_usec-histogram"><strong><code>buildbuddy_blobstore_delete_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_blobstore_delete_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_blobstore_delete_duration_usec-histogram" title="Direct link to buildbuddy_blobstore_delete_duration_usec-histogram">​</a></h3><p>Delete duration per blobstore file deletion, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-45">Labels<a href="#labels-45" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>blobstore_type</strong>: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>disk</code>.</li></ul><h1>SQL metrics</h1><p>The following metrics are for monitoring the SQL database configured
for BuildBuddy.</p><p>If you&#x27;d like to see an up-to-date catalog of what BuildBuddy stores in
its SQL database, see the table definitions <a href="https://github.com/buildbuddy-io/buildbuddy/blob/master/server/tables/tables.go" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="query--error-rate-metrics">Query / error rate metrics<a href="#query--error-rate-metrics" class="hash-link" aria-label="Direct link to Query / error rate metrics" title="Direct link to Query / error rate metrics">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_query_count-counter"><strong><code>buildbuddy_sql_query_count</code></strong> (Counter)<a href="#buildbuddy_sql_query_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_query_count-counter" title="Direct link to buildbuddy_sql_query_count-counter">​</a></h3><p>Number of SQL queries executed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-46">Labels<a href="#labels-46" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-16">Examples<a href="#examples-16" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># SQL queries per second (by query template).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">sql_query_template</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_sql_query_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_query_duration_usec-histogram"><strong><code>buildbuddy_sql_query_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_sql_query_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_sql_query_duration_usec-histogram" title="Direct link to buildbuddy_sql_query_duration_usec-histogram">​</a></h3><p>SQL query duration, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-47">Labels<a href="#labels-47" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-17">Examples<a href="#examples-17" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median SQL query duration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_sql_query_duration_usec_bucket</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_error_count-counter"><strong><code>buildbuddy_sql_error_count</code></strong> (Counter)<a href="#buildbuddy_sql_error_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_error_count-counter" title="Direct link to buildbuddy_sql_error_count-counter">​</a></h3><p>Number of SQL queries that resulted in an error.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-48">Labels<a href="#labels-48" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-18">Examples<a href="#examples-18" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># SQL error rate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_sql_error_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_sql_query_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="databasesql-metrics"><code>database/sql</code> metrics<a href="#databasesql-metrics" class="hash-link" aria-label="Direct link to databasesql-metrics" title="Direct link to databasesql-metrics">​</a></h2><p>The following metrics directly expose
<a href="https://golang.org/pkg/database/sql/#DBStats" target="_blank" rel="noopener noreferrer">DBStats</a> from the
<code>database/sql</code> Go package.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_max_open_connections-gauge"><strong><code>buildbuddy_sql_max_open_connections</code></strong> (Gauge)<a href="#buildbuddy_sql_max_open_connections-gauge" class="hash-link" aria-label="Direct link to buildbuddy_sql_max_open_connections-gauge" title="Direct link to buildbuddy_sql_max_open_connections-gauge">​</a></h3><p>Maximum number of open connections to the database.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-49">Labels<a href="#labels-49" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_open_connections-gauge"><strong><code>buildbuddy_sql_open_connections</code></strong> (Gauge)<a href="#buildbuddy_sql_open_connections-gauge" class="hash-link" aria-label="Direct link to buildbuddy_sql_open_connections-gauge" title="Direct link to buildbuddy_sql_open_connections-gauge">​</a></h3><p>The number of established connections to the database.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-50">Labels<a href="#labels-50" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>connection_status</strong>: Status of the database connection: <code>in_use</code> or <code>idle</code></li><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_wait_count-counter"><strong><code>buildbuddy_sql_wait_count</code></strong> (Counter)<a href="#buildbuddy_sql_wait_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_wait_count-counter" title="Direct link to buildbuddy_sql_wait_count-counter">​</a></h3><p>The total number of connections waited for.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-51">Labels<a href="#labels-51" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_wait_duration_usec-counter"><strong><code>buildbuddy_sql_wait_duration_usec</code></strong> (Counter)<a href="#buildbuddy_sql_wait_duration_usec-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_wait_duration_usec-counter" title="Direct link to buildbuddy_sql_wait_duration_usec-counter">​</a></h3><p>The total time blocked waiting for a new connection, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-52">Labels<a href="#labels-52" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_max_idle_closed-counter"><strong><code>buildbuddy_sql_max_idle_closed</code></strong> (Counter)<a href="#buildbuddy_sql_max_idle_closed-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_max_idle_closed-counter" title="Direct link to buildbuddy_sql_max_idle_closed-counter">​</a></h3><p>The total number of connections closed due to SetMaxIdleConns.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-53">Labels<a href="#labels-53" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_max_idle_time_closed-counter"><strong><code>buildbuddy_sql_max_idle_time_closed</code></strong> (Counter)<a href="#buildbuddy_sql_max_idle_time_closed-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_max_idle_time_closed-counter" title="Direct link to buildbuddy_sql_max_idle_time_closed-counter">​</a></h3><p>The total number of connections closed due to SetConnMaxIdleTime.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-54">Labels<a href="#labels-54" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_sql_max_lifetime_closed-counter"><strong><code>buildbuddy_sql_max_lifetime_closed</code></strong> (Counter)<a href="#buildbuddy_sql_max_lifetime_closed-counter" class="hash-link" aria-label="Direct link to buildbuddy_sql_max_lifetime_closed-counter" title="Direct link to buildbuddy_sql_max_lifetime_closed-counter">​</a></h3><p>The total number of connections closed due to SetConnMaxLifetime.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-55">Labels<a href="#labels-55" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_db_role</strong>: SQL DB replica role: <code>primary</code> for read+write replicas, or <code>read_replica</code> for read-only DB replicas.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-metrics">HTTP metrics<a href="#http-metrics" class="hash-link" aria-label="Direct link to HTTP metrics" title="Direct link to HTTP metrics">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_http_request_count-counter"><strong><code>buildbuddy_http_request_count</code></strong> (Counter)<a href="#buildbuddy_http_request_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_http_request_count-counter" title="Direct link to buildbuddy_http_request_count-counter">​</a></h3><p>HTTP request count.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-56">Labels<a href="#labels-56" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-19">Examples<a href="#examples-19" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Requests per second, by status code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">code</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_http_request_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 5xx error ratio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_http_request_count</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">code</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=~</span><span class="token context-labels label-value attr-value">&quot;5..&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_http_request_count</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_http_request_handler_duration_usec-histogram"><strong><code>buildbuddy_http_request_handler_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_http_request_handler_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_http_request_handler_duration_usec-histogram" title="Direct link to buildbuddy_http_request_handler_duration_usec-histogram">​</a></h3><p>Time taken to handle each HTTP request in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-57">Labels<a href="#labels-57" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li><li><strong>code</strong>: HTTP response code: <code>200</code>, <code>302</code>, <code>401</code>, <code>404</code>, <code>500</code>, ...</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-20">Examples<a href="#examples-20" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median request duration for successfuly processed (2xx) requests.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Other status codes may be associated with early-exits and are</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># likely to add too much noise.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_http_request_handler_duration_usec</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">code</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=~</span><span class="token context-labels label-value attr-value">&quot;2..&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_http_response_size_bytes-histogram"><strong><code>buildbuddy_http_response_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_http_response_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_http_response_size_bytes-histogram" title="Direct link to buildbuddy_http_response_size_bytes-histogram">​</a></h3><p>Response size of each HTTP response in <strong>bytes</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-58">Labels<a href="#labels-58" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>route</strong>: HTTP route before substituting path parameters (<code>/invocation/:id</code>, <code>/settings</code>, ...)</li><li><strong>method</strong>: HTTP method: <code>GET</code>, <code>POST</code>, ...</li><li><strong>code</strong>: HTTP response code: <code>200</code>, <code>302</code>, <code>401</code>, <code>404</code>, <code>500</code>, ...</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-21">Examples<a href="#examples-21" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Median HTTP response size</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">histogram_quantile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">sum</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> </span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">rate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_http_response_size_bytes</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token context-range range-duration number" style="color:rgb(247, 140, 108)">5m</span><span class="token context-range punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="internal-metrics">Internal metrics<a href="#internal-metrics" class="hash-link" aria-label="Direct link to Internal metrics" title="Direct link to Internal metrics">​</a></h2><p>These metrics are for monitoring lower-level subsystems of BuildBuddy.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-event-handler">Build event handler<a href="#build-event-handler" class="hash-link" aria-label="Direct link to Build event handler" title="Direct link to Build event handler">​</a></h3><p>The build event handler logs all build events uploaded to BuildBuddy
as part of the Build Event Protocol.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_build_event_handler_duration_usec-histogram"><strong><code>buildbuddy_build_event_handler_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_build_event_handler_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_build_event_handler_duration_usec-histogram" title="Direct link to buildbuddy_build_event_handler_duration_usec-histogram">​</a></h3><p>The time spent handling each build event in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-59">Labels<a href="#labels-59" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="webhooks">Webhooks<a href="#webhooks" class="hash-link" aria-label="Direct link to Webhooks" title="Direct link to Webhooks">​</a></h3><p>Webhooks are HTTP endpoints exposed by BuildBuddy server which allow it to
respond to repository events. These URLs are created as part of BuildBuddy
workflows.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_webhook_handler_workflows_started-counter"><strong><code>buildbuddy_webhook_handler_workflows_started</code></strong> (Counter)<a href="#buildbuddy_webhook_handler_workflows_started-counter" class="hash-link" aria-label="Direct link to buildbuddy_webhook_handler_workflows_started-counter" title="Direct link to buildbuddy_webhook_handler_workflows_started-counter">​</a></h3><p>The number of workflows triggered by the webhook handler.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-60">Labels<a href="#labels-60" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>event</strong>: Type of event sent to BuildBuddy&#x27;s webhook handler: <code>push</code> or <code>pull_request</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache">Cache<a href="#cache" class="hash-link" aria-label="Direct link to Cache" title="Direct link to Cache">​</a></h3><p>&quot;Cache&quot; refers to the cache backend(s) that BuildBuddy uses to
accelerate file IO operations, which are common in different
subsystems such as the remote cache and the fetch server (for
downloading invocation artifacts).</p><p>BuildBuddy can be configured to use multiple layers of caching
(an in-memory layer, coupled with a cloud storage layer).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="get-metrics"><code>get</code> metrics<a href="#get-metrics" class="hash-link" aria-label="Direct link to get-metrics" title="Direct link to get-metrics">​</a></h4><p><code>get</code> metrics track non-streamed cache reads (all data is fetched
from the cache in a single request).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_get_count-counter"><strong><code>buildbuddy_cache_get_count</code></strong> (Counter)<a href="#buildbuddy_cache_get_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_get_count-counter" title="Direct link to buildbuddy_cache_get_count-counter">​</a></h3><p>Number of cache get requests.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-61">Labels<a href="#labels-61" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_get_duration_usec-histogram"><strong><code>buildbuddy_cache_get_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_get_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_get_duration_usec-histogram" title="Direct link to buildbuddy_cache_get_duration_usec-histogram">​</a></h3><p>The time spent retrieving each entry from the cache, in <strong>microseconds</strong>.</p><p>This is recorded only for successful gets.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-62">Labels<a href="#labels-62" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_get_size_bytes-histogram"><strong><code>buildbuddy_cache_get_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_cache_get_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_get_size_bytes-histogram" title="Direct link to buildbuddy_cache_get_size_bytes-histogram">​</a></h3><p>Size of each entry retrieved from the cache, in <strong>bytes</strong>.</p><p>This is recorded only for successful gets.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-63">Labels<a href="#labels-63" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="read-metrics"><code>read</code> metrics<a href="#read-metrics" class="hash-link" aria-label="Direct link to read-metrics" title="Direct link to read-metrics">​</a></h4><p><code>read</code> metrics track streamed cache reads.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_read_count-counter"><strong><code>buildbuddy_cache_read_count</code></strong> (Counter)<a href="#buildbuddy_cache_read_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_read_count-counter" title="Direct link to buildbuddy_cache_read_count-counter">​</a></h3><p>Number of streamed cache reads started.</p><p>This is incremented once for each started stream, <strong>not</strong> for each chunk in the stream.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-64">Labels<a href="#labels-64" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_read_duration_usec-histogram"><strong><code>buildbuddy_cache_read_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_read_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_read_duration_usec-histogram" title="Direct link to buildbuddy_cache_read_duration_usec-histogram">​</a></h3><p>The total time spent for each read stream, in <strong>microseconds</strong>.</p><p>This is recorded only for successful reads, and measures the entire read stream (not just individual chunks).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-65">Labels<a href="#labels-65" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_read_size_bytes-histogram"><strong><code>buildbuddy_cache_read_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_cache_read_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_read_size_bytes-histogram" title="Direct link to buildbuddy_cache_read_size_bytes-histogram">​</a></h3><p>Total size of each entry retrieved from the cache via streaming, in <strong>bytes</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-66">Labels<a href="#labels-66" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-metrics"><code>set</code> metrics<a href="#set-metrics" class="hash-link" aria-label="Direct link to set-metrics" title="Direct link to set-metrics">​</a></h4><p><code>set</code> metrics track non-streamed cache writes (all data is wrtiten
in a single request).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_set_count-counter"><strong><code>buildbuddy_cache_set_count</code></strong> (Counter)<a href="#buildbuddy_cache_set_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_set_count-counter" title="Direct link to buildbuddy_cache_set_count-counter">​</a></h3><p>Number of cache set requests.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-67">Labels<a href="#labels-67" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_set_duration_usec-histogram"><strong><code>buildbuddy_cache_set_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_set_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_set_duration_usec-histogram" title="Direct link to buildbuddy_cache_set_duration_usec-histogram">​</a></h3><p>The time spent writing each entry to the cache, in <strong>microseconds</strong>.</p><p>This is recorded only for successful sets.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-68">Labels<a href="#labels-68" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_set_size_bytes-histogram"><strong><code>buildbuddy_cache_set_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_cache_set_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_set_size_bytes-histogram" title="Direct link to buildbuddy_cache_set_size_bytes-histogram">​</a></h3><p>Size of the value stored in each set operation, in <strong>bytes</strong>.</p><p>This is recorded only for successful sets.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-69">Labels<a href="#labels-69" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_set_retries-histogram"><strong><code>buildbuddy_cache_set_retries</code></strong> (Histogram)<a href="#buildbuddy_cache_set_retries-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_set_retries-histogram" title="Direct link to buildbuddy_cache_set_retries-histogram">​</a></h3><p>Number of retries required to fulfill the set request (an observed value of 0 means the transfer succeeded on the first try).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-70">Labels<a href="#labels-70" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-metrics"><code>write</code> metrics<a href="#write-metrics" class="hash-link" aria-label="Direct link to write-metrics" title="Direct link to write-metrics">​</a></h4><p><code>write</code> metrics track streamed cache writes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_write_count-counter"><strong><code>buildbuddy_cache_write_count</code></strong> (Counter)<a href="#buildbuddy_cache_write_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_write_count-counter" title="Direct link to buildbuddy_cache_write_count-counter">​</a></h3><p>Number of streamed cache writes started.</p><p>This is incremented once for each started stream, <strong>not</strong> for each chunk in the stream.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-71">Labels<a href="#labels-71" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_write_duration_usec-histogram"><strong><code>buildbuddy_cache_write_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_write_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_write_duration_usec-histogram" title="Direct link to buildbuddy_cache_write_duration_usec-histogram">​</a></h3><p>The time spent for each streamed write to the cache, in <strong>microseconds</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-72">Labels<a href="#labels-72" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_write_size_bytes-histogram"><strong><code>buildbuddy_cache_write_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_cache_write_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_write_size_bytes-histogram" title="Direct link to buildbuddy_cache_write_size_bytes-histogram">​</a></h3><p>Size of each entry written to the cache via streaming, in <strong>bytes</strong>.</p><p>This is recorded only on success, and measures the entire stream (not just individual chunks).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-73">Labels<a href="#labels-73" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_write_retries-histogram"><strong><code>buildbuddy_cache_write_retries</code></strong> (Histogram)<a href="#buildbuddy_cache_write_retries-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_write_retries-histogram" title="Direct link to buildbuddy_cache_write_retries-histogram">​</a></h3><p>Number of retries required to write each chunk in the stream (an observed value of 0 means the transfer succeeded on the first try).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-74">Labels<a href="#labels-74" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-cache-metrics">Other cache metrics<a href="#other-cache-metrics" class="hash-link" aria-label="Direct link to Other cache metrics" title="Direct link to Other cache metrics">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_delete_count-counter"><strong><code>buildbuddy_cache_delete_count</code></strong> (Counter)<a href="#buildbuddy_cache_delete_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_delete_count-counter" title="Direct link to buildbuddy_cache_delete_count-counter">​</a></h3><p>Number of deletes from the cache.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-75">Labels<a href="#labels-75" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_delete_duration_usec-histogram"><strong><code>buildbuddy_cache_delete_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_delete_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_delete_duration_usec-histogram" title="Direct link to buildbuddy_cache_delete_duration_usec-histogram">​</a></h3><p>Duration of each cache deletion, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-76">Labels<a href="#labels-76" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_contains_count-counter"><strong><code>buildbuddy_cache_contains_count</code></strong> (Counter)<a href="#buildbuddy_cache_contains_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_cache_contains_count-counter" title="Direct link to buildbuddy_cache_contains_count-counter">​</a></h3><p>Number of <code>contains(key)</code> requests made to the cache.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-77">Labels<a href="#labels-77" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a>. This is a numeric value; any non-zero code indicates an error.</li><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_contains_duration_usec-histogram"><strong><code>buildbuddy_cache_contains_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_cache_contains_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_contains_duration_usec-histogram" title="Direct link to buildbuddy_cache_contains_duration_usec-histogram">​</a></h3><p>Duration of each each <code>contains(key)</code> request, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-78">Labels<a href="#labels-78" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_cache_contains_retry_count-histogram"><strong><code>buildbuddy_cache_contains_retry_count</code></strong> (Histogram)<a href="#buildbuddy_cache_contains_retry_count-histogram" class="hash-link" aria-label="Direct link to buildbuddy_cache_contains_retry_count-histogram" title="Direct link to buildbuddy_cache_contains_retry_count-histogram">​</a></h3><p>Number of retries required to fulfill each <code>contains(key)</code> request to the cache (an observed value of 0 means the request succeeded on the first try).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-79">Labels<a href="#labels-79" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>tier</strong>: Cache tier: <code>memory</code> or <code>cloud</code>. This label can be used to write Prometheus queries that don&#x27;t break if the cache backend is swapped out for a different backend.</li><li><strong>backend</strong>: Cache backend: <code>gcs</code> (Google Cloud Storage), <code>aws_s3</code>, or <code>redis</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="misc-metrics">Misc metrics<a href="#misc-metrics" class="hash-link" aria-label="Direct link to Misc metrics" title="Direct link to Misc metrics">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_version-gauge"><strong><code>buildbuddy_version</code></strong> (Gauge)<a href="#buildbuddy_version-gauge" class="hash-link" aria-label="Direct link to buildbuddy_version-gauge" title="Direct link to buildbuddy_version-gauge">​</a></h3><p>Binary version of the running instance.</p><p>Always reports a value of 1 similar to the <code>up</code> metric, but has a label containing the version.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-80">Labels<a href="#labels-80" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>version</strong>: Binary version. Example: <code>v2.0.0</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_unexpected_event-counter"><strong><code>buildbuddy_unexpected_event</code></strong> (Counter)<a href="#buildbuddy_unexpected_event-counter" class="hash-link" aria-label="Direct link to buildbuddy_unexpected_event-counter" title="Direct link to buildbuddy_unexpected_event-counter">​</a></h3><p>Counter for unexpected events.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-81">Labels<a href="#labels-81" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>name</strong>: The name used to identify the type of an unexpected event.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_health_check_status-gauge"><strong><code>buildbuddy_health_check_status</code></strong> (Gauge)<a href="#buildbuddy_health_check_status-gauge" class="hash-link" aria-label="Direct link to buildbuddy_health_check_status-gauge" title="Direct link to buildbuddy_health_check_status-gauge">​</a></h3><p>Health check status.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-82">Labels<a href="#labels-82" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>health_check_name</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_quota_rpcs_handled_total_by_quota_key-counter"><strong><code>buildbuddy_quota_rpcs_handled_total_by_quota_key</code></strong> (Counter)<a href="#buildbuddy_quota_rpcs_handled_total_by_quota_key-counter" class="hash-link" aria-label="Direct link to buildbuddy_quota_rpcs_handled_total_by_quota_key-counter" title="Direct link to buildbuddy_quota_rpcs_handled_total_by_quota_key-counter">​</a></h3><p>Total number of RPCs completed on the server by quota_key, regardless of success or failure.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-83">Labels<a href="#labels-83" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>grpc_full_method</strong>: The full name of the grpc method: <code>/&lt;service&gt;/&lt;method&gt;</code></li><li><strong>quota_key</strong>: The key used for quota accounting, either a group ID or an IP address.</li><li><strong>quota_allowed</strong>: Whether the request was allowed by quota manager.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_registry_blob_range_latency_usec-histogram"><strong><code>buildbuddy_registry_blob_range_latency_usec</code></strong> (Histogram)<a href="#buildbuddy_registry_blob_range_latency_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_registry_blob_range_latency_usec-histogram" title="Direct link to buildbuddy_registry_blob_range_latency_usec-histogram">​</a></h3><p>Latency of serving layer blob ranges.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_clickhouse_insert_count-counter"><strong><code>buildbuddy_clickhouse_insert_count</code></strong> (Counter)<a href="#buildbuddy_clickhouse_insert_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_clickhouse_insert_count-counter" title="Direct link to buildbuddy_clickhouse_insert_count-counter">​</a></h3><p>Num of rows inserted into ClickHouse</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-84">Labels<a href="#labels-84" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>clickhouse_table_name</strong>: The name of the table in Clickhouse</li><li><strong>status</strong>: Status of the Clickhouse operation: <code>ok</code>, <code>error</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_clickhouse_query_duration_usec-histogram"><strong><code>buildbuddy_clickhouse_query_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_clickhouse_query_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_clickhouse_query_duration_usec-histogram" title="Direct link to buildbuddy_clickhouse_query_duration_usec-histogram">​</a></h3><p>ClickHouse query duration, in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-85">Labels<a href="#labels-85" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_clickhouse_error_count-counter"><strong><code>buildbuddy_clickhouse_error_count</code></strong> (Counter)<a href="#buildbuddy_clickhouse_error_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_clickhouse_error_count-counter" title="Direct link to buildbuddy_clickhouse_error_count-counter">​</a></h3><p>Number of ClickHouse SQL queries that resulted in an error.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-86">Labels<a href="#labels-86" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_clickhouse_query_count-counter"><strong><code>buildbuddy_clickhouse_query_count</code></strong> (Counter)<a href="#buildbuddy_clickhouse_query_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_clickhouse_query_count-counter" title="Direct link to buildbuddy_clickhouse_query_count-counter">​</a></h3><p>Number of ClickHouse SQL queries executed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-87">Labels<a href="#labels-87" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>sql_query_template</strong>: SQL query before substituting template parameters.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_compressor_bytes_compressed-counter"><strong><code>buildbuddy_compressor_bytes_compressed</code></strong> (Counter)<a href="#buildbuddy_compressor_bytes_compressed-counter" class="hash-link" aria-label="Direct link to buildbuddy_compressor_bytes_compressed-counter" title="Direct link to buildbuddy_compressor_bytes_compressed-counter">​</a></h3><p>The number of decompressed bytes passed into compressors</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-88">Labels<a href="#labels-88" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>compression</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_compressor_bytes_decompressed-counter"><strong><code>buildbuddy_compressor_bytes_decompressed</code></strong> (Counter)<a href="#buildbuddy_compressor_bytes_decompressed-counter" class="hash-link" aria-label="Direct link to buildbuddy_compressor_bytes_decompressed-counter" title="Direct link to buildbuddy_compressor_bytes_decompressed-counter">​</a></h3><p>The number of decompressed bytes passed out of decompressors</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-89">Labels<a href="#labels-89" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>compression</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_pebble_compression_ratio-histogram"><strong><code>buildbuddy_pebble_compression_ratio</code></strong> (Histogram)<a href="#buildbuddy_pebble_compression_ratio-histogram" class="hash-link" aria-label="Direct link to buildbuddy_pebble_compression_ratio-histogram" title="Direct link to buildbuddy_pebble_compression_ratio-histogram">​</a></h3><p>The aggregate compression ratio (compressed / decompressed bytes) for a stream of data </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-90">Labels<a href="#labels-90" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_name</strong>: Cache name: Custom name to describe the cache, like &quot;pebble-cache&quot;.</li><li><strong>compression</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_server_upload_size_bytes-histogram"><strong><code>buildbuddy_server_upload_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_server_upload_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_server_upload_size_bytes-histogram" title="Direct link to buildbuddy_server_upload_size_bytes-histogram">​</a></h3><p>Number of bytes uploaded to the server in each upload.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total uploaded bytes and the <strong><code>_count</code></strong> suffix to get the number of uploaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-91">Labels<a href="#labels-91" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_server_download_size_bytes-histogram"><strong><code>buildbuddy_server_download_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_server_download_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_server_download_size_bytes-histogram" title="Direct link to buildbuddy_server_download_size_bytes-histogram">​</a></h3><p>Number of bytes downloaded from the server in each download.</p><p>Use the <strong><code>_sum</code></strong> suffix to get the total downloaded bytes and the <strong><code>_count</code></strong> suffix to get the number of downloaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-92">Labels<a href="#labels-92" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_server_digest_upload_size_bytes-histogram"><strong><code>buildbuddy_server_digest_upload_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_server_digest_upload_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_server_digest_upload_size_bytes-histogram" title="Direct link to buildbuddy_server_digest_upload_size_bytes-histogram">​</a></h3><p>Digest size uploaded to the server in each upload.</p><p>This does not always match the actual size uploaded to the server, if the client sends compressed bytes. Use the <strong><code>_sum</code></strong> suffix to get the total uploaded bytes and the <strong><code>_count</code></strong> suffix to get the number of uploaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-93">Labels<a href="#labels-93" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_server_digest_download_size_bytes-histogram"><strong><code>buildbuddy_server_digest_download_size_bytes</code></strong> (Histogram)<a href="#buildbuddy_server_digest_download_size_bytes-histogram" class="hash-link" aria-label="Direct link to buildbuddy_server_digest_download_size_bytes-histogram" title="Direct link to buildbuddy_server_digest_download_size_bytes-histogram">​</a></h3><p>Digest size downloaded from the server in each download.</p><p>This does not always match the actual size downloaded to the server, if the client requests compressed bytes. Use the <strong><code>_sum</code></strong> suffix to get the total downloaded bytes and the <strong><code>_count</code></strong> suffix to get the number of downloaded files.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-94">Labels<a href="#labels-94" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>cache_type</strong>: Cache type: <code>action</code> for action cache, <code>cas</code> for content-addressable storage.</li><li><strong>server_name</strong>: </li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-22">Examples<a href="#examples-22" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><div class="language-promql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-promql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Histogram buckets with the count of elements in each compression ratio bucket</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Visualize with the Bar Gauge type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Legend: {{le}}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Format: Heatmap</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_pebble_compression_ratio_bucket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token vector-match label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token vector-match punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Percentage of elements that increased in size when compressed (compression ratio &gt; 1)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Visualize with the Stat type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_pebble_compression_ratio_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_pebble_compression_ratio_bucket</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token context-labels label-key attr-name" style="color:rgb(255, 203, 107)">le</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token context-labels label-value attr-value">&quot;1.0&quot;</span><span class="token context-labels punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buildbuddy_pebble_compression_ratio_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_logger_log_count-counter"><strong><code>buildbuddy_logger_log_count</code></strong> (Counter)<a href="#buildbuddy_logger_log_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_logger_log_count-counter" title="Direct link to buildbuddy_logger_log_count-counter">​</a></h3><p>The number of logs</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-95">Labels<a href="#labels-95" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: Status code as defined by <a href="https://godoc.org/google.golang.org/grpc/codes#Code" target="_blank" rel="noopener noreferrer">grpc/codes</a> in human-readable format, such as &quot;OK&quot; or &quot;NotFound&quot;.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="raft-cache-metrics">Raft cache metrics<a href="#raft-cache-metrics" class="hash-link" aria-label="Direct link to Raft cache metrics" title="Direct link to Raft cache metrics">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_ranges-gauge"><strong><code>buildbuddy_raft_ranges</code></strong> (Gauge)<a href="#buildbuddy_raft_ranges-gauge" class="hash-link" aria-label="Direct link to buildbuddy_raft_ranges-gauge" title="Direct link to buildbuddy_raft_ranges-gauge">​</a></h3><p>Number of raft ranges on each nodehost.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-96">Labels<a href="#labels-96" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>node_host_id</strong>: The ID of a raft nodehost.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_records-gauge"><strong><code>buildbuddy_raft_records</code></strong> (Gauge)<a href="#buildbuddy_raft_records-gauge" class="hash-link" aria-label="Direct link to buildbuddy_raft_records-gauge" title="Direct link to buildbuddy_raft_records-gauge">​</a></h3><p>Number of raft records in each range.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-97">Labels<a href="#labels-97" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>range_id</strong>: The range ID of a raft region.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_bytes-gauge"><strong><code>buildbuddy_raft_bytes</code></strong> (Gauge)<a href="#buildbuddy_raft_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_raft_bytes-gauge" title="Direct link to buildbuddy_raft_bytes-gauge">​</a></h3><p>Size (in bytes) of each range.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-98">Labels<a href="#labels-98" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>range_id</strong>: The range ID of a raft region.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_proposals-counter"><strong><code>buildbuddy_raft_proposals</code></strong> (Counter)<a href="#buildbuddy_raft_proposals-counter" class="hash-link" aria-label="Direct link to buildbuddy_raft_proposals-counter" title="Direct link to buildbuddy_raft_proposals-counter">​</a></h3><p>The total number of statemachine proposals on each range.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-99">Labels<a href="#labels-99" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>range_id</strong>: The range ID of a raft region.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_splits-counter"><strong><code>buildbuddy_raft_splits</code></strong> (Counter)<a href="#buildbuddy_raft_splits-counter" class="hash-link" aria-label="Direct link to buildbuddy_raft_splits-counter" title="Direct link to buildbuddy_raft_splits-counter">​</a></h3><p>The total number of splits per nodehost.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-100">Labels<a href="#labels-100" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>node_host_id</strong>: The ID of a raft nodehost.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_moves-counter"><strong><code>buildbuddy_raft_moves</code></strong> (Counter)<a href="#buildbuddy_raft_moves-counter" class="hash-link" aria-label="Direct link to buildbuddy_raft_moves-counter" title="Direct link to buildbuddy_raft_moves-counter">​</a></h3><p>The total number of moves per nodehost.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-101">Labels<a href="#labels-101" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>node_host_id</strong>: The ID of a raft nodehost.</li><li><strong>move_type</strong>: The type of raft move <code>add</code>, or <code>remove</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_rangecache_lookups-counter"><strong><code>buildbuddy_raft_rangecache_lookups</code></strong> (Counter)<a href="#buildbuddy_raft_rangecache_lookups-counter" class="hash-link" aria-label="Direct link to buildbuddy_raft_rangecache_lookups-counter" title="Direct link to buildbuddy_raft_rangecache_lookups-counter">​</a></h3><p>The total number of rangecache lookups per nodehost.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-102">Labels<a href="#labels-102" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>rangecache_event_type</strong>: Raft RangeCache event type: <code>hit</code>, <code>miss</code>, or <code>update</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_split_duration_usec-histogram"><strong><code>buildbuddy_raft_split_duration_usec</code></strong> (Histogram)<a href="#buildbuddy_raft_split_duration_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_raft_split_duration_usec-histogram" title="Direct link to buildbuddy_raft_split_duration_usec-histogram">​</a></h3><p>The time spent splitting a range in <strong>microseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-103">Labels<a href="#labels-103" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>range_id</strong>: The range ID of a raft region.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_raft_eviction_age_msec-histogram"><strong><code>buildbuddy_raft_eviction_age_msec</code></strong> (Histogram)<a href="#buildbuddy_raft_eviction_age_msec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_raft_eviction_age_msec-histogram" title="Direct link to buildbuddy_raft_eviction_age_msec-histogram">​</a></h3><p>Age of items evicted from the cache, in <strong>milliseconds</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-104">Labels<a href="#labels-104" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>partition_id</strong>: The ID of the disk cache partition this event applied to.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_auth_api_key_lookup_count-counter"><strong><code>buildbuddy_auth_api_key_lookup_count</code></strong> (Counter)<a href="#buildbuddy_auth_api_key_lookup_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_auth_api_key_lookup_count-counter" title="Direct link to buildbuddy_auth_api_key_lookup_count-counter">​</a></h3><p>Total number of API key lookups.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-105">Labels<a href="#labels-105" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>status</strong>: </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_key_refresh_count-counter"><strong><code>buildbuddy_encryption_key_refresh_count</code></strong> (Counter)<a href="#buildbuddy_encryption_key_refresh_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_key_refresh_count-counter" title="Direct link to buildbuddy_encryption_key_refresh_count-counter">​</a></h3><p>Total number of encryption key refresh attempts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_key_refresh_failure_count-counter"><strong><code>buildbuddy_encryption_key_refresh_failure_count</code></strong> (Counter)<a href="#buildbuddy_encryption_key_refresh_failure_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_key_refresh_failure_count-counter" title="Direct link to buildbuddy_encryption_key_refresh_failure_count-counter">​</a></h3><p>Total number of unsuccessful encryption key refresh attempts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_encrypted_block_count-counter"><strong><code>buildbuddy_encryption_encrypted_block_count</code></strong> (Counter)<a href="#buildbuddy_encryption_encrypted_block_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_encrypted_block_count-counter" title="Direct link to buildbuddy_encryption_encrypted_block_count-counter">​</a></h3><p>Total number of blocks encrypted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_encrypted_blob_count-counter"><strong><code>buildbuddy_encryption_encrypted_blob_count</code></strong> (Counter)<a href="#buildbuddy_encryption_encrypted_blob_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_encrypted_blob_count-counter" title="Direct link to buildbuddy_encryption_encrypted_blob_count-counter">​</a></h3><p>Total number of blobs encrypted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_decrypted_block_count-counter"><strong><code>buildbuddy_encryption_decrypted_block_count</code></strong> (Counter)<a href="#buildbuddy_encryption_decrypted_block_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_decrypted_block_count-counter" title="Direct link to buildbuddy_encryption_decrypted_block_count-counter">​</a></h3><p>Total number of blocks decrypted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_decrypted_blob_count-counter"><strong><code>buildbuddy_encryption_decrypted_blob_count</code></strong> (Counter)<a href="#buildbuddy_encryption_decrypted_blob_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_decrypted_blob_count-counter" title="Direct link to buildbuddy_encryption_decrypted_blob_count-counter">​</a></h3><p>Total number of blobs decrypted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_decryption_error_count-counter"><strong><code>buildbuddy_encryption_decryption_error_count</code></strong> (Counter)<a href="#buildbuddy_encryption_decryption_error_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_encryption_decryption_error_count-counter" title="Direct link to buildbuddy_encryption_decryption_error_count-counter">​</a></h3><p>Total number of decryption errors.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_encryption_key_last_encryption_age_msec-histogram"><strong><code>buildbuddy_encryption_key_last_encryption_age_msec</code></strong> (Histogram)<a href="#buildbuddy_encryption_key_last_encryption_age_msec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_encryption_key_last_encryption_age_msec-histogram" title="Direct link to buildbuddy_encryption_key_last_encryption_age_msec-histogram">​</a></h3><p>Age of encrypted keys (i.e.</p><p>how long it has been since the keys were re-encrypted).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_count-counter">​</a></h3><p>Number of compactions performed by the underlying Pebble database.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-106">Labels<a href="#labels-106" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>compaction_type</strong>: Pebble DB compaction type.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_estimated_debt_bytes-gauge">​</a></h3><p>Estimated number of bytes that need to be compacted for the LMS to reach a stable state.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress_bytes-gauge">​</a></h3><p>Number of bytes present in sstables being written by in-progress compactions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_in_progress-gauge">​</a></h3><p>Number of compactions that are in-progress</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_compact_marked_files-gauge">​</a></h3><p>Count of files that are marked for compaction.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_sublevels-gauge">​</a></h3><p>Number of sublevels within the level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-107">Labels<a href="#labels-107" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_num_files</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_num_files-gauge">​</a></h3><p>The total number of files in the level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-108">Labels<a href="#labels-108" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_size_bytes-gauge">​</a></h3><p>The total size in bytes of the files in the level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-109">Labels<a href="#labels-109" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_score</code></strong> (Gauge)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_score-gauge">​</a></h3><p>The level&#x27;s compaction score.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-110">Labels<a href="#labels-110" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_in_count-counter">​</a></h3><p>The number of incoming bytes from other levels read during compactions.</p><p>This excludes bytes moved and bytes ingested. For L0 this is the bytes written to the WAL.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-111">Labels<a href="#labels-111" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_ingested_count-counter">​</a></h3><p>The number of bytes ingested.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-112">Labels<a href="#labels-112" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_moved_count-counter">​</a></h3><p>The number of bytes moved into the level by a move compaction.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-113">Labels<a href="#labels-113" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_read_count-counter">​</a></h3><p>The number of bytes read for compactions at the level.</p><p>This includes bytes read from other levels (BytesIn), as well as bytes read for the level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-114">Labels<a href="#labels-114" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_compacted_count-counter">​</a></h3><p>The number of bytes written during compactions.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-115">Labels<a href="#labels-115" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_bytes_flushed_count-counter">​</a></h3><p>The number of bytes written during flushes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-116">Labels<a href="#labels-116" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_compacted_count-counter">​</a></h3><p>The number of sstables compacted to this level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-117">Labels<a href="#labels-117" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_flushed_count-counter">​</a></h3><p>The number of sstables flushed to this level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-118">Labels<a href="#labels-118" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_ingested_count-counter">​</a></h3><p>The number of sstables ingested into this level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-119">Labels<a href="#labels-119" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_level_tables_moved_count-counter">​</a></h3><p>The number of sstables ingested into to this level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-120">Labels<a href="#labels-120" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>level</strong>: Pebble DB level number.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_op_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_op_count-counter">​</a></h3><p>The number of operations performed against the pebble database.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-121">Labels<a href="#labels-121" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>pebble_op</strong>: Pebble DB operation type.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram"><strong><code>buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec</code></strong> (Histogram)<a href="#buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram" title="Direct link to buildbuddy_remote_cache_pebble_cache_pebble_op_latency_usec-histogram">​</a></h3><p>The latency of operations performed against the pebble database, in microseconds.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-122">Labels<a href="#labels-122" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>pebble_op</strong>: Pebble DB operation type.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter"><strong><code>buildbuddy_remote_cache_pebble_cache_groupid_sample_count</code></strong> (Counter)<a href="#buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter" title="Direct link to buildbuddy_remote_cache_pebble_cache_groupid_sample_count-counter">​</a></h3><p>The number of times a group has been selected for key sampling.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-123">Labels<a href="#labels-123" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>group_id</strong>: Group (organization) ID associated with the request.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="podman-metrics">Podman metrics<a href="#podman-metrics" class="hash-link" aria-label="Direct link to Podman metrics" title="Direct link to Podman metrics">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_podman_soci_store_crash_count-counter"><strong><code>buildbuddy_podman_soci_store_crash_count</code></strong> (Counter)<a href="#buildbuddy_podman_soci_store_crash_count-counter" class="hash-link" aria-label="Direct link to buildbuddy_podman_soci_store_crash_count-counter" title="Direct link to buildbuddy_podman_soci_store_crash_count-counter">​</a></h3><p>Total number of times the soci store binary crashed and was restarted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_podman_get_soci_artifacts_latency_usec-histogram"><strong><code>buildbuddy_podman_get_soci_artifacts_latency_usec</code></strong> (Histogram)<a href="#buildbuddy_podman_get_soci_artifacts_latency_usec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_podman_get_soci_artifacts_latency_usec-histogram" title="Direct link to buildbuddy_podman_get_soci_artifacts_latency_usec-histogram">​</a></h3><p>The latency of retrieving SOCI artifacts from the app and storing them locally per image, in microseconds.</p><p>Note this is slightly different than the latency of the GetArtifacts RPC as the artifacts must be fetched from the cache and stored locally, which adds some additional time.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-124">Labels<a href="#labels-124" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>container_image_tag</strong>: Container image tag.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buildbuddy_podman_image_pull_latency_msec-histogram"><strong><code>buildbuddy_podman_image_pull_latency_msec</code></strong> (Histogram)<a href="#buildbuddy_podman_image_pull_latency_msec-histogram" class="hash-link" aria-label="Direct link to buildbuddy_podman_image_pull_latency_msec-histogram" title="Direct link to buildbuddy_podman_image_pull_latency_msec-histogram">​</a></h3><p>The latency of &#x27;cold&#x27; podman pull requests per image, in milliseconds.</p><p>&#x27;Cold&#x27; means the image hasn&#x27;t been pulled by this executor previously.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels-125">Labels<a href="#labels-125" class="hash-link" aria-label="Direct link to Labels" title="Direct link to Labels">​</a></h4><ul><li><strong>container_image_tag</strong>: Container image tag.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/buildbuddy-io/buildbuddy/edit/master/docs/../docs/prometheus-metrics.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-07-14T00:07:45.000Z">Jul 14, 2023</time></b> by <b>Tyler Williams</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/enterprise-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Enterprise API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/architecture-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture Overview</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="/"><img alt="BuildBuddy Logo" src="/img/logo_white.svg" width="281px" height="32px" class="footer-logo"></a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/ui">Build &amp; Test UI</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/remote-execution">Remote Execution</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/remote-cache">Remote Cache</a></li><li class="footer__item"><a href="https://app.buildbuddy.io" target="_self" rel="noopener noreferrer" class="footer__link-item">Get Started<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/introduction/">Documentation</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/pricing">Pricing</a></li><li class="footer__item"><a href="https://app.buildbuddy.io/" target="_self" rel="noopener noreferrer" class="footer__link-item">Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/privacy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/terms">Terms of Service</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io/buildbuddy/issues/new" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an Issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/contact">Contact Us</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/team">Team</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/careers">Careers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Security</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/security">Security Overview</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/security-updates">Security Updates</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/security-vulnerability-report">Report a Vulnerability</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://slack.buildbuddy.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/buildbuddy_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://linkedin.com/company/buildbuddy" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/buildbuddy-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 Iteration, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a9cd77ce.js"></script>
<script src="/assets/js/main.72c2c97b.js"></script>
</body>
</html>