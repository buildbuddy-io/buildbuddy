syntax = "proto3";

package api.v1;

message ExecuteWorkflowRequest {
  // URL of the repo the workflow is running for
  // Ex. "https://github.com/some-user/acme"
  string repo_url = 1;
  // Branch the workflow should run on
  // Ex. "cool-feature"
  string branch = 2;

  // OPTIONAL FIELDS

  // Name of the workflow action to execute. Corresponds to an action in
  // buildbuddy.yaml, or an action name in the default workflow config if
  // buildbuddy.yaml is missing from the repo.
  //
  // If this is not set, the API will execute all actions in the workflow
  //
  // Ex. "Test all targets"
  string action_name = 3;
  // Whether to run the workflow in a clean container. This prevents all
  // existing workflow containers from being reused, so using this flag is not
  // encouraged.
  bool clean = 4;
  // VISIBILITY build metadata used for the workflow invocation.
  string visibility = 5;
}

message ExecuteWorkflowResponse {
  map<string, string> action_name_to_invocation_id = 1;
}
