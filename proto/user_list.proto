syntax = "proto3";

import "proto/context.proto";
import "proto/user_id.proto";

package user_list;

// A "user list" is a collection of users.
//
// This is usually called a "group" in other systems but we another type of
// resource that's called a "group" so this is given another name to avoid
// confusion.
message UserList {
  string user_list_id = 1;
  string name = 2;
  repeated user_id.DisplayUser user = 3;
}

message GetUserListsRequest {
  context.RequestContext request_context = 1;
}

message GetUserListsResponse {
  context.ResponseContext response_context = 1;

  repeated UserList user_list = 2;
}

message GetUserListRequest {
  context.RequestContext request_context = 1;

  string user_list_id = 2;
}

message GetUserListResponse {
  context.ResponseContext response_context = 1;

  UserList user_list = 2;
}

message CreateUserListRequest {
  context.RequestContext request_context = 1;

  string name = 2;
}

message CreateUserListResponse {
  context.ResponseContext response_context = 1;
}

message DeleteUserListRequest {
  context.RequestContext request_context = 1;

  string user_list_id = 2;
}

message DeleteUserListResponse {
  context.ResponseContext response_context = 1;
}

message UpdateUserListRequest {
  context.RequestContext request_context = 1;

  UserList user_list = 2;
}

message UpdateUserListResponse {
  context.ResponseContext response_context = 1;
}

message UpdateUserListMembershipRequest {
  context.RequestContext request_context = 1;

  string user_list_id = 2;

  enum MembershipAction {
    UNKNOWN_MEMBERHIP_ACTION = 0;
    ADD = 1;
    REMOVE = 2;
  }

  message Update {
    user_id.UserId user_id = 1;
    MembershipAction action = 2;
  }

  repeated Update update = 3;
}

message UpdateUserListMembershipResponse {
  context.ResponseContext response_context = 1;
}
