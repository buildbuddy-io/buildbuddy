                                                           [bazel release 7.4.0]
Usage: bazel query <options> <query-expression>

Executes a query language expression over a specified subgraph of the
build dependency graph.

For example, to show all C++ test rules in the strings package, use:

  % bazel query 'kind("cc_.*test", strings:*)'

or to find all dependencies of //path/to/package:target, use:

  % bazel query 'deps(//path/to/package:target)'

or to find a dependency path between //path/to/package:target and //dependency:

  % bazel query 'somepath(//path/to/package:target, //dependency)'

Options that appear before the command and are parsed by the client:
  --distdir (a path; may be used multiple times)
  --[no]experimental_repository_cache_hardlinks (a boolean; default: "false")
  --experimental_repository_downloader_retries (an integer; default: "0")
  --experimental_scale_timeouts (a double; default: "1.0")
  --http_connector_attempts (an integer; default: "8")
  --http_connector_retry_max_timeout (An immutable length of time.; default: "0s")
  --http_max_parallel_downloads (an integer; default: "8")
  --http_timeout_scaling (a double; default: "1.0")
  --[no]incompatible_disable_native_repo_rules (a boolean; default: "false")
  --repository_cache (a path; default: see description)
  --[no]repository_disable_download (a boolean; default: "false")

Options that control build execution:
  --experimental_ui_max_stdouterr_bytes (an integer in (-1)-1073741819 range; default: "1048576")
  --gc_thrashing_threshold (an integer in 0-100 range; default: "100")
  --[no]incompatible_remote_dangling_symlinks (a boolean; default: "true")
  --[no]incompatible_remote_symlinks (a boolean; default: "true")
  --[no]keep_going [-k] (a boolean; default: "false")
  --loading_phase_threads (an integer, or a keyword ("auto", "HOST_CPUS", "HOST_RAM"), optionally followed by an operation ([-|*]<float>) eg. "auto", "HOST_CPUS*.5"; default: "auto")

Options that configure the toolchain used for action execution:
  --[no]incompatible_enable_proto_toolchain_resolution (a boolean; default: "false")

Options that let the user configure the intended output, affecting its value, as opposed to its existence:
  --bep_maximum_open_remote_upload_files (an integer; default: "-1")
  --remote_download_all
  --remote_download_minimal
  --remote_download_outputs (all, minimal or toplevel; default: "toplevel")
  --remote_download_symlink_template (a string; default: "")
  --remote_download_toplevel
  --repo_env (a 'name=value' assignment with an optional value part; may be used multiple times)

Options that affect how strictly Bazel enforces valid build inputs (rule definitions,  flag combinations, etc.):
  --[no]check_bzl_visibility (a boolean; default: "true")

This option affects semantics of the Starlark language or the build API accessible to BUILD files, .bzl files, or WORKSPACE files.:
  --[no]enable_bzlmod (a boolean; default: "true")
  --[no]enable_workspace (a boolean; default: "true")
  --[no]experimental_action_resource_set (a boolean; default: "true")
  --[no]experimental_bzl_visibility (a boolean; default: "true")
  --[no]experimental_cc_shared_library (a boolean; default: "false")
  --[no]experimental_cc_static_library (a boolean; default: "false")
  --[no]experimental_disable_external_package (a boolean; default: "false")
  --[no]experimental_enable_android_migration_apis (a boolean; default: "false")
  --[no]experimental_enable_scl_dialect (a boolean; default: "false")
  --[no]experimental_google_legacy_api (a boolean; default: "false")
  --[no]experimental_isolated_extension_usages (a boolean; default: "false")
  --[no]experimental_java_library_export (a boolean; default: "false")
  --[no]experimental_platforms_api (a boolean; default: "false")
  --[no]experimental_repo_remote_exec (a boolean; default: "false")
  --[no]experimental_sibling_repository_layout (a boolean; default: "false")
  --[no]incompatible_allow_tags_propagation (a boolean; default: "true")
  --[no]incompatible_always_check_depset_elements (a boolean; default: "true")
  --incompatible_autoload_externally (comma-separated set of options; default: "")
  --[no]incompatible_config_setting_private_default_visibility (a boolean; default: "false")
  --[no]incompatible_depset_for_java_output_source_jars (a boolean; default: "true")
  --[no]incompatible_depset_for_libraries_to_link_getter (a boolean; default: "true")
  --[no]incompatible_disable_objc_library_transition (a boolean; default: "true")
  --[no]incompatible_disable_starlark_host_transitions (a boolean; default: "false")
  --[no]incompatible_disable_target_provider_fields (a boolean; default: "false")
  --[no]incompatible_disallow_empty_glob (a boolean; default: "false")
  --[no]incompatible_disallow_struct_provider_syntax (a boolean; default: "false")
  --[no]incompatible_enable_deprecated_label_apis (a boolean; default: "true")
  --[no]incompatible_enforce_config_setting_visibility (a boolean; default: "true")
  --[no]incompatible_existing_rules_immutable_view (a boolean; default: "true")
  --[no]incompatible_fail_on_unknown_attributes (a boolean; default: "true")
  --[no]incompatible_fix_package_group_reporoot_syntax (a boolean; default: "true")
  --[no]incompatible_java_common_parameters (a boolean; default: "true")
  --[no]incompatible_merge_fixed_and_default_shell_env (a boolean; default: "true")
  --[no]incompatible_new_actions_api (a boolean; default: "true")
  --[no]incompatible_no_attr_license (a boolean; default: "true")
  --[no]incompatible_no_implicit_file_export (a boolean; default: "false")
  --[no]incompatible_no_implicit_watch_label (a boolean; default: "false")
  --[no]incompatible_no_rule_outputs_param (a boolean; default: "false")
  --[no]incompatible_objc_provider_remove_linking_info (a boolean; default: "false")
  --[no]incompatible_package_group_has_public_syntax (a boolean; default: "true")
  --[no]incompatible_require_linker_input_cc_api (a boolean; default: "true")
  --[no]incompatible_run_shell_command_string (a boolean; default: "true")
  --[no]incompatible_stop_exporting_language_modules (a boolean; default: "false")
  --[no]incompatible_struct_has_no_methods (a boolean; default: "false")
  --[no]incompatible_top_level_aspects_require_providers (a boolean; default: "false")
  --[no]incompatible_unambiguous_label_stringification (a boolean; default: "true")
  --[no]incompatible_use_cc_configure_from_rules_cc (a boolean; default: "false")
  --[no]incompatible_use_plus_in_repo_names (a boolean; default: "false")
  --[no]incompatible_visibility_private_attributes_at_definition (a boolean; default: "true")
  --max_computation_steps (a long integer; default: "0")
  --nested_set_depth_limit (an integer; default: "3500")
  --repositories_without_autoloads (comma-separated set of options; default: "")

Options relating to query output and semantics:
  --aspect_deps (off, conservative or precise; default: "conservative")
  --[no]consistent_labels (a boolean; default: "false")
  --[no]experimental_explicit_aspects (a boolean; default: "false")
  --[no]experimental_graphless_query (a tri-state (auto, yes, no); default: "auto")
  --graph:conditional_edges_limit (an integer; default: "4")
  --[no]graph:factored (a boolean; default: "true")
  --graph:node_limit (an integer; default: "512")
  --[no]implicit_deps (a boolean; default: "true")
  --[no]include_aspects (a boolean; default: "true")
  --[no]incompatible_lexicographical_output (a boolean; default: "true")
  --[no]incompatible_package_group_includes_double_slash (a boolean; default: "true")
  --[no]infer_universe_scope (a boolean; default: "false")
  --[no]line_terminator_null (a boolean; default: "false")
  --[no]nodep_deps (a boolean; default: "true")
  --noorder_results
  --null
  --order_output (no, deps, auto or full; default: "auto")
  --order_results
  --output (a string; default: "label")
  --[no]proto:default_values (a boolean; default: "true")
  --[no]proto:definition_stack (a boolean; default: "false")
  --[no]proto:flatten_selects (a boolean; default: "true")
  --[no]proto:include_attribute_source_aspects (a boolean; default: "false")
  --[no]proto:include_synthetic_attribute_hash (a boolean; default: "false")
  --[no]proto:instantiation_stack (a boolean; default: "false")
  --[no]proto:locations (a boolean; default: "true")
  --proto:output_rule_attrs (comma-separated list of options; default: "all")
  --[no]proto:rule_inputs_and_outputs (a boolean; default: "true")
  --query_file (a string; default: "")
  --[no]relative_locations (a boolean; default: "false")
  --[no]strict_test_suite (a boolean; default: "false")
  --[no]tool_deps (a boolean; default: "true")
  --universe_scope (comma-separated list of options; default: "")
  --[no]xml:default_values (a boolean; default: "false")
  --[no]xml:line_numbers (a boolean; default: "true")

Options relating to Bzlmod output and semantics:
  --allow_yanked_versions (a string; may be used multiple times)
  --check_bazel_compatibility (error, warning or off; default: "error")
  --check_direct_dependencies (off, warning or error; default: "warning")
  --[no]ignore_dev_dependency (a boolean; default: "false")
  --lockfile_mode (off, update, refresh or error; default: "update")
  --override_module (an equals-separated mapping of module name to path; may be used multiple times)
  --registry (a string; may be used multiple times)
  --vendor_dir (a path; default: see description)

Options that trigger optimizations of the build time:
  --gc_thrashing_limits (comma separated pairs of <period>:<count>; default: "1s:2,20s:3,1m:5")
  --[no]heuristically_drop_nodes (a boolean; default: "false")
  --[no]incompatible_do_not_split_linking_cmdline (a boolean; default: "true")
  --[no]keep_state_after_build (a boolean; default: "true")
  --skyframe_high_water_mark_full_gc_drops_per_invocation (an integer, >= 0; default: "2147483647")
  --skyframe_high_water_mark_minor_gc_drops_per_invocation (an integer, >= 0; default: "2147483647")
  --skyframe_high_water_mark_threshold (an integer; default: "85")
  --[no]track_incremental_state (a boolean; default: "true")

Options that affect the verbosity, format or location of logging:
  --[no]announce_rc (a boolean; default: "false")
  --[no]attempt_to_print_relative_paths (a boolean; default: "false")
  --bes_backend (a string; default: "")
  --[no]bes_check_preceding_lifecycle_events (a boolean; default: "false")
  --bes_header (a 'name=value' assignment; may be used multiple times)
  --bes_instance_name (a string; default: see description)
  --bes_keywords (comma-separated list of options; may be used multiple times)
  --[no]bes_lifecycle_events (a boolean; default: "true")
  --bes_oom_finish_upload_timeout (An immutable length of time.; default: "10m")
  --bes_outerr_buffer_size (an integer; default: "10240")
  --bes_outerr_chunk_size (an integer; default: "1048576")
  --bes_proxy (a string; default: see description)
  --bes_results_url (a string; default: "")
  --bes_system_keywords (comma-separated list of options; may be used multiple times)
  --bes_timeout (An immutable length of time.; default: "0s")
  --bes_upload_mode (wait_for_upload_complete, nowait_for_upload_complete or fully_async; default: "wait_for_upload_complete")
  --build_event_binary_file (a string; default: "")
  --[no]build_event_binary_file_path_conversion (a boolean; default: "true")
  --build_event_binary_file_upload_mode (wait_for_upload_complete, nowait_for_upload_complete or fully_async; default: "wait_for_upload_complete")
  --build_event_json_file (a string; default: "")
  --[no]build_event_json_file_path_conversion (a boolean; default: "true")
  --build_event_json_file_upload_mode (wait_for_upload_complete, nowait_for_upload_complete or fully_async; default: "wait_for_upload_complete")
  --build_event_max_named_set_of_file_entries (an integer; default: "-1")
  --[no]build_event_publish_all_actions (a boolean; default: "false")
  --build_event_text_file (a string; default: "")
  --[no]build_event_text_file_path_conversion (a boolean; default: "true")
  --build_event_text_file_upload_mode (wait_for_upload_complete, nowait_for_upload_complete or fully_async; default: "wait_for_upload_complete")
  --[no]experimental_announce_profile_path (a boolean; default: "false")
  --[no]experimental_bep_target_summary (a boolean; default: "false")
  --[no]experimental_build_event_expand_filesets (a boolean; default: "false")
  --[no]experimental_build_event_fully_resolve_fileset_symlinks (a boolean; default: "false")
  --experimental_build_event_upload_max_retries (an integer; default: "4")
  --experimental_build_event_upload_retry_minimum_delay (An immutable length of time.; default: "1s")
  --experimental_build_event_upload_strategy (a string; default: see description)
  --[no]experimental_collect_load_average_in_profiler (a boolean; default: "true")
  --[no]experimental_collect_pressure_stall_indicators (a boolean; default: "false")
  --[no]experimental_collect_resource_estimation (a boolean; default: "false")
  --[no]experimental_collect_system_network_usage (a boolean; default: "false")
  --[no]experimental_collect_worker_data_in_profiler (a boolean; default: "false")
  --experimental_command_profile (cpu, wall, alloc or lock; default: see description)
  --experimental_profile_additional_tasks (phase, action, action_check, action_lock, action_release, action_update, action_complete, bzlmod, info, create_package, remote_execution, local_execution, scanner, local_parse, upload_time, remote_process_time, remote_queue, remote_setup, fetch, local_process_time, vfs_stat, vfs_dir, vfs_readlink, vfs_md5, vfs_xattr, vfs_delete, vfs_open, vfs_read, vfs_write, vfs_glob, vfs_vmfs_stat, vfs_vmfs_dir, vfs_vmfs_read, wait, thread_name, thread_sort_index, skyframe_eval, skyfunction, critical_path, critical_path_component, handle_gc_notification, action_counts, action_cache_counts, local_cpu_usage, system_cpu_usage, cpu_usage_estimation, local_memory_usage, system_memory_usage, memory_usage_estimation, system_network_up_usage, system_network_down_usage, workers_memory_usage, system_load_average, starlark_parser, starlark_user_fn, starlark_builtin_fn, starlark_user_compiled_fn, starlark_repository_fn, action_fs_staging, remote_cache_check, remote_download, remote_network, filesystem_traversal, worker_execution, worker_setup, worker_borrow, worker_working, worker_copying_outputs, credential_helper, pressure_stall_io, pressure_stall_memory, conflict_check, dynamic_lock, repository_fetch, repository_vendor or unknown; may be used multiple times)
  --[no]experimental_profile_include_primary_output (a boolean; default: "false")
  --[no]experimental_profile_include_target_label (a boolean; default: "false")
  --[no]experimental_record_metrics_for_all_mnemonics (a boolean; default: "false")
  --experimental_repository_resolved_file (a string; default: "")
  --[no]experimental_run_bep_event_include_residue (a boolean; default: "false")
  --[no]experimental_stream_log_file_uploads (a boolean; default: "false")
  --experimental_workspace_rules_log_file (a path; default: see description)
  --[no]generate_json_trace_profile (a tri-state (auto, yes, no); default: "auto")
  --[no]heap_dump_on_oom (a boolean; default: "false")
  --[no]legacy_important_outputs (a boolean; default: "true")
  --logging (0 <= an integer <= 6; default: "3")
  --memory_profile (a path; default: see description)
  --memory_profile_stable_heap_parameters (integers, separated by a comma expected in pairs; default: "1,0")
  --profile (a path; default: see description)
  --[no]record_full_profiler_data (a boolean; default: "false")
  --remote_print_execution_messages (failure, success or all; default: "failure")
  --[no]slim_profile (a boolean; default: "true")
  --starlark_cpu_profile (a string; default: "")
  --tool_tag (a string; default: "")
  --ui_event_filters (Convert list of comma separated event kind to list of filters; may be used multiple times)

Options specifying or altering a generic input to a Bazel command that does not fall into other categories.:
  --experimental_resolved_file_instead_of_workspace (a string; default: "")

Remote caching and execution options:
  --experimental_circuit_breaker_strategy (failure; default: see description)
  --experimental_downloader_config (a string; default: see description)
  --[no]experimental_guard_against_concurrent_changes (a boolean; default: "false")
  --[no]experimental_remote_cache_async (a boolean; default: "false")
  --experimental_remote_cache_compression_threshold (an integer; default: "0")
  --[no]experimental_remote_cache_lease_extension (a boolean; default: "false")
  --experimental_remote_cache_ttl (An immutable length of time.; default: "3h")
  --experimental_remote_capture_corrupted_outputs (a path; default: see description)
  --[no]experimental_remote_discard_merkle_trees (a boolean; default: "false")
  --experimental_remote_downloader (a string; default: see description)
  --[no]experimental_remote_downloader_local_fallback (a boolean; default: "false")
  --[no]experimental_remote_execution_keepalive (a boolean; default: "false")
  --experimental_remote_failure_rate_threshold (an integer in 0-100 range; default: "10")
  --experimental_remote_failure_window_interval (An immutable length of time.; default: "60s")
  --[no]experimental_remote_mark_tool_inputs (a boolean; default: "false")
  --[no]experimental_remote_merkle_tree_cache (a boolean; default: "false")
  --experimental_remote_merkle_tree_cache_size (a long integer; default: "1000")
  --experimental_remote_output_service (a string; default: see description)
  --experimental_remote_output_service_output_path_prefix (a string; default: "")
  --[no]experimental_remote_require_cached (a boolean; default: "false")
  --experimental_remote_scrubbing_config (Converts to a Scrubber; default: see description)
  --experimental_worker_for_repo_fetching (off, platform, virtual or auto; default: "auto")
  --[no]incompatible_remote_build_event_upload_respect_no_cache (a boolean; default: "false")
  --[no]incompatible_remote_downloader_send_all_headers (a boolean; default: "true")
  --[no]incompatible_remote_output_paths_relative_to_input_root (a boolean; default: "false")
  --[no]incompatible_remote_results_ignore_disk (a boolean; default: "true")
  --[no]remote_accept_cached (a boolean; default: "true")
  --remote_build_event_upload (all or minimal; default: "minimal")
  --remote_bytestream_uri_prefix (a string; default: see description)
  --remote_cache (a string; default: see description)
  --[no]remote_cache_compression (a boolean; default: "false")
  --remote_cache_header (a 'name=value' assignment; may be used multiple times)
  --remote_default_exec_properties (a 'name=value' assignment; may be used multiple times)
  --remote_default_platform_properties (a string; default: "")
  --remote_download_regex (a valid Java regular expression; may be used multiple times)
  --remote_downloader_header (a 'name=value' assignment; may be used multiple times)
  --remote_exec_header (a 'name=value' assignment; may be used multiple times)
  --remote_execution_priority (an integer; default: "0")
  --remote_executor (a string; default: see description)
  --remote_grpc_log (a path; default: see description)
  --remote_header (a 'name=value' assignment; may be used multiple times)
  --remote_instance_name (a string; default: "")
  --[no]remote_local_fallback (a boolean; default: "false")
  --remote_local_fallback_strategy (a string; default: "local")
  --remote_max_connections (an integer; default: "100")
  --remote_proxy (a string; default: see description)
  --remote_result_cache_priority (an integer; default: "0")
  --remote_retries (an integer; default: "5")
  --remote_retry_max_delay (An immutable length of time.; default: "5s")
  --remote_timeout (An immutable length of time.; default: "60s")
  --[no]remote_upload_local_results (a boolean; default: "true")
  --[no]remote_verify_downloads (a boolean; default: "true")

Miscellaneous options, not otherwise categorized.:
  --build_metadata (a 'name=value' assignment; may be used multiple times)
  --color (yes, no or auto; default: "auto")
  --config (a string; may be used multiple times)
  --credential_helper (Path to a credential helper. It may be absolute, relative to the PATH environment variable, or %workspace%-relative. The path be optionally prefixed by a scope  followed by an '='. The scope is a domain name, optionally with a single leading '*' wildcard component. A helper applies to URIs matching its scope, with more specific scopes preferred. If a helper has no scope, it applies to every URI.; may be used multiple times)
  --credential_helper_cache_duration (An immutable length of time.; default: "30m")
  --credential_helper_timeout (An immutable length of time.; default: "10s")
  --curses (yes, no or auto; default: "auto")
  --deleted_packages (comma-separated list of package names; may be used multiple times)
  --disk_cache (a path; default: see description)
  --[no]enable_platform_specific_config (a boolean; default: "false")
  --experimental_disk_cache_gc_idle_delay (An immutable length of time.; default: "5m")
  --experimental_disk_cache_gc_max_age (An immutable length of time.; default: "0")
  --experimental_disk_cache_gc_max_size (a size in bytes, optionally followed by a K, M, G or T multiplier; default: "0")
  --[no]experimental_rule_extension_api (a boolean; default: "false")
  --[no]experimental_windows_watchfs (a boolean; default: "false")
  --[no]fetch (a boolean; default: "true")
  --google_auth_scopes (comma-separated list of options; default: "https://www.googleapis.com/auth/cloud-platform")
  --google_credentials (a string; default: see description)
  --[no]google_default_credentials (a boolean; default: "false")
  --grpc_keepalive_time (An immutable length of time.; default: see description)
  --grpc_keepalive_timeout (An immutable length of time.; default: "20s")
  --[no]incompatible_disable_non_executable_java_binary (a boolean; default: "false")
  --[no]incompatible_disallow_symlink_file_to_dir (a boolean; default: "true")
  --invocation_id (a UUID; default: "")
  --override_repository (an equals-separated mapping of repository name to path; may be used multiple times)
  --package_path (colon-separated list of options; default: "%workspace%")
  --[no]progress_in_terminal_title (a boolean; default: "false")
  --[no]show_loading_progress (a boolean; default: "true")
  --[no]show_progress (a boolean; default: "true")
  --show_progress_rate_limit (a double; default: "0.2")
  --[no]show_timestamps (a boolean; default: "false")
  --tls_certificate (a string; default: see description)
  --tls_client_certificate (a string; default: see description)
  --tls_client_key (a string; default: see description)
  --ui_actions_shown (an integer; default: "8")
  --[no]watchfs (a boolean; default: "false")

(Use 'help --long' for full details or --short to just enumerate options.)
